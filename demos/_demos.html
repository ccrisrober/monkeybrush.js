<!DOCTYPE html>
<html>
<head>
    <title>Texture 3D</title>
    <link rel="stylesheet" type="text/css" href="./libs/style.css" />
</head>
<body>
    <div class="spinner" id="spinner">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </div>
    <div id="stats"></div>
    <div id="samplesPassed"></div>
    <script type="text/javascript" src="./libs/libraries.js"></script>

    <script type="text/javascript" src="../dist/output.js"></script>
    <canvas id="canvas" width="512" height="512"></canvas>

    <script type="x-shader/x-vertex" id="shader-vs">#version 300 es
        #import<VertexPP>
    </script>
    <script type="x-shader/x-fragment" id="shader-fs">#version 300 es
        precision highp float;

        in vec2 uv;

        out vec4 fragColor;

        uniform sampler2D tex;

        const float d = 1./128.;
        void main(void) {
            float c = texture(tex, uv).x;
            int s = 0;
            if (texture(tex, uv + vec2(0., d)).x > 0.) s++;
            if (texture(tex, uv - vec2(0., d)).x > 0.) s++;
            if (texture(tex, uv + vec2(d, 0.)).x > 0.) s++;
            if (texture(tex, uv - vec2(d, 0.)).x > 0.) s++;
            if (texture(tex, uv + vec2(d, d)).x > 0.) s++;
            if (texture(tex, uv - vec2(d, d)).x > 0.) s++;
            if (texture(tex, uv + vec2(d, -d)).x > 0.) s++;
            if (texture(tex, uv - vec2(d, -d)).x > 0.) s++;
            if (c > 0.){
            if ((s == 2) || (s == 3)) fragColor = vec4(uv*0.5+0.5, 0.0, 1.0);
            else fragColor = vec4(vec3(0.),1.);}
            else if (s == 3) fragColor = vec4(uv*0.5+0.5, 0.0, 1.0);
            else fragColor = vec4(vec3(0.),1.);
        }
    </script>
    <script type="x-shader/x-fragment" id="show-fs">#version 300 es
        precision highp float;

        in vec2 uv;

        out vec4 fragColor;

        uniform sampler2D tex;

        void main() {
            fragColor = vec4(texture(tex, uv).rgb, 1.0);
        }
    </script>
    <script type="text/javascript" src="../tfdemo.js"></script>
</body>
</html>
