{"version":3,"sources":["webpack:///webpack/bootstrap c544d2adbc3e7a83222c","webpack:///./lib/index.ts","webpack:///./lib/library/App.ts","webpack:///./lib/library/core/core.ts","webpack:///./lib/library/core/context.ts","webpack:///./lib/library/core/log.ts","webpack:///./lib/library/core/input.ts","webpack:///./lib/library/core/depth.ts","webpack:///./lib/library/core/cull.ts","webpack:///./lib/library/core/blend.ts","webpack:///./lib/library/constants/BlendingType.ts","webpack:///./lib/library/constants/ComparisonFunc.ts","webpack:///./lib/library/resources/resourceMap.ts","webpack:///./lib/library/extras/timer.ts","webpack:///./lib/library/models/sphere.ts","webpack:///./lib/library/models/drawable.ts","webpack:///./lib/library/core/vertexArray.ts","webpack:///./lib/library/extras/extensions.ts","webpack:///./lib/library/core/vertexBuffer.ts","webpack:///./lib/library/constants/BufferType.ts","webpack:///./lib/library/constants/UsageType.ts","webpack:///./lib/library/models/mesh.ts","webpack:///./lib/library/textures/texture2d.ts","webpack:///./lib/library/textures/texture.ts","webpack:///./lib/library/textures/simpleTexture2d.ts","webpack:///./lib/library/core/program.ts","webpack:///./lib/library/constants/ProgramCte.ts","webpack:///./lib/library/core/framebuffer.ts","webpack:///./lib/library/textures/renderBufferTexture.ts","webpack:///./lib/library/resources/programManager.ts","webpack:///./lib/library/resources/loaders.ts","webpack:///./lib/library/lights/pointLight.ts","webpack:///./lib/library/lights/light.ts","webpack:///./lib/library/extras/color.ts","webpack:///./lib/library/maths/vector3.ts","webpack:///./lib/library/maths/vector2.ts","webpack:///./lib/library/_demoCamera.ts","webpack:///./lib/library/extras/skybox.ts","webpack:///./lib/library/textures/cubemapTexture.ts","webpack:///./lib/library/constants/TextureFormat.ts","webpack:///./lib/library/constants/TextureType.ts","webpack:///./lib/library/_decorators.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/build\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap c544d2adbc3e7a83222c\n **/","/// <reference path=\"library/references.d.ts\" />\n\nimport App from \"./library/App\";\n\nimport Core from \"./library/core/core\";\nimport Input from \"./library/core/input\";\nimport Sphere from \"./library/models/sphere\";\nimport Mesh from \"./library/models/mesh\";\nimport Texture2D from \"./library/textures/texture2d\";\nimport SimpleTexture2D from \"./library/textures/simpleTexture2d\";\nimport Program from \"./library/core/program\";\nimport Framebuffer from \"./library/core/framebuffer\";\nimport ProgramManager from \"./library/resources/programManager\";\nimport ResourceMap from \"./library/resources/resourceMap\";\nimport loaders from \"./library/resources/loaders\";\nimport Timer from \"./library/extras/timer\";\nimport PointLight from \"./library/lights/pointLight\";\nimport Vector2 from \"./library/maths/vector2\";\nimport Vector3 from \"./library/maths/vector3\";\nimport Camera2 from \"./library/_demoCamera\";\nimport Skybox from \"./library/extras/skybox\";\n\nimport ProgramCte from \"./library/constants/ProgramCte\";\nimport TextureFormat from \"./library/constants/TextureFormat\";\nimport TextureType from \"./library/constants/TextureType\";\n\n\"use strict\";\n\nlet camera = new Camera2(new Float32Array([-2.7, -1.4, 11.8]));\n\nlet skybox: Skybox;\n\nlet esferita: Sphere;\n\nlet SimpleConfig = function() {\n    return {\n        max: 10,\n        resume: true\n    };\n};\nlet m: Mesh;\n\nlet view;\nlet projection;\n\nlet tex2d: Texture2D;\n\nlet _light = new PointLight(new Vector3<number>( -5.0, 0.0, 0.0 ));\n\nlet identityMatrix = mat4.create();\nmat4.identity(identityMatrix);\nlet model = mat4.create();\nlet angle = 0;\n\nlet text = SimpleConfig();\nfunction loadAssets() {\n    loaders.loadImage(\"assets/images/example.png\", \"exampleImg\");\n    // skybox\n    loaders.loadImage(\"assets/images/canyon/back.jpg\");\n    loaders.loadImage(\"assets/images/canyon/bottom.jpg\");\n    loaders.loadImage(\"assets/images/canyon/front.jpg\");\n    loaders.loadImage(\"assets/images/canyon/left.jpg\");\n    loaders.loadImage(\"assets/images/canyon/right.jpg\");\n    loaders.loadImage(\"assets/images/canyon/top.jpg\");\n}\n\nconst mainShader: string = \"prog\";\n\nlet framebuffer: Framebuffer;\n\nfunction initialize(app: App) {\n    esferita = new Sphere(1.0, 20, 20);\n    m = new Mesh(\"assets/objects/teddy.json\");\n\n    let canvasSize = new Vector2<number>(\n        Core.getInstance().canvas().width,\n        Core.getInstance().canvas().height\n    );\n\n    skybox = new Skybox(\"assets/images/canyon\", false);\n\n    framebuffer = new Framebuffer([\n        new SimpleTexture2D(canvasSize, {\n            \"internalFormat\": TextureFormat.RGB,\n            \"format\": TextureFormat.RGB,\n            \"type\": TextureFormat.Float,\n            \"minFilter\": TextureType.Nearest,\n            \"magFilter\": TextureType.Nearest\n        })\n    ], canvasSize, true, true, {});\n\n    // console.log(app);\n\n    const webgl2 = app.webglVersion() === 2;\n\n    ProgramManager.addWithFun(\"prog\", (): Program => {\n        let prog: Program = new Program();\n        if (webgl2) {\n            prog.addShader(\"./shaders/demoShader.vert\", ProgramCte.shader_type.vertex, ProgramCte.mode.read_file);\n            prog.addShader(\"./shaders/demoShader.frag\", ProgramCte.shader_type.fragment, ProgramCte.mode.read_file);\n        } else {\n            prog.addShader(\"./shaders/demowebgl1.vert\", ProgramCte.shader_type.vertex, ProgramCte.mode.read_file);\n            prog.addShader(\"./shaders/demowebgl1.frag\", ProgramCte.shader_type.fragment, ProgramCte.mode.read_file);\n        }\n        prog.compile();\n\n        prog.addUniforms([\"projection\", \"view\", \"model\",\n            \"normalMatrix\", \"texSampler\", \"viewPos\", \"lightPosition\"]);\n        return prog;\n    });\n\n    let cubeImage = ResourceMap.retrieveAsset(\"exampleImg\");\n    tex2d = new Texture2D(cubeImage, {\n        flipY: true,\n        minFilter: TextureType.Linear,\n        magFilter: TextureType.Linear,\n        wrapS: TextureType.Clamp2Edge,\n        wrapT: TextureType.Clamp2Edge\n    });\n\n    cameraUpdateCb();\n}\n\nfunction cameraUpdateCb() {\n    let canvas = Core.getInstance().canvas();\n    view = camera.GetViewMatrix();\n    projection = camera.GetProjectionMatrix(canvas.width, canvas.height);\n\n    let prog = ProgramManager.get(mainShader);\n    prog.use();\n    prog.sendUniformMat4(\"view\", view);\n    prog.sendUniformMat4(\"projection\", projection);\n    prog.sendUniformVec3(\"viewPos\", camera.position);\n}\n\n// @param dt: Global time in seconds\nfunction updateScene(app: App, dt: number) {\n    if (Input.getInstance().isButtonClicked(Input.mouseButton.Left)) {\n        console.log(\"Mouse left clicked\");\n    }\n\n    camera.timeElapsed = Timer.deltaTime() / 10.0;\n\n    camera.update(cameraUpdateCb);\n\n    angle += Timer.deltaTime() * 0.001;\n}\n\nfunction drawScene(app: App) {\n    Core.getInstance().clearColorAndDepth();\n\n    let prog = ProgramManager.get(mainShader);\n    prog.use();\n\n    tex2d.bind(0);\n    prog.sendUniform1i(\"texSampler\", 0);\n\n    let varvar = text.max;\n    let i = 0, j = 0, k = 0;\n    let dd = -1;\n    for (i = -varvar; i < varvar; i += 5.0) {\n        for (j = -varvar; j < varvar; j += 5.0) {\n            for (k = -varvar; k < varvar; k += 5.0) {\n                dd *= -1;\n                mat4.translate(model, identityMatrix,\n                    vec3.fromValues(i * 1.0, j * 1.0, k * 1.0));\n                mat4.rotateY(model, model, 90.0 * Math.PI / 180);\n                mat4.rotateY(model, model, angle * dd);\n                mat4.scale(model, model, vec3.fromValues(0.1, 0.1, 0.1));\n\n                prog.sendUniformMat4(\"model\", model);\n\n                m.render();\n            }\n        }\n    }\n    skybox.render(view, projection);\n}\n\n// ============================================================================================ //\n// ============================================================================================ //\n// ============================================================================================ //\n// ============================================================================================ //\n// ============================================================================================ //\n// ============================================================================================ //\n\n/**/\nwindow.onload = () => {\n    new App({\n        webglVersion: 2,\n        loadAssets: loadAssets,\n        initialize: initialize,\n        update: updateScene,\n        draw: drawScene,\n        cameraUpdate: cameraUpdateCb,\n        textCB: function(gui: dat.GUI) {\n            gui.add(text, \"max\", 5, 100);\n        }\n    }, text).start();\n};\n/**/\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/index.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"./_decorators.ts\" />\n/// <reference path=\"core/core.ts\" />\n/// <reference path=\"core/input.ts\" />\n/// <reference path=\"resources/resourceMap.ts\" />\n/// <reference path=\"extras/timer.ts\" />\n/// <reference path=\"../typings/vanilla-toasts/vanilla-toasts.d.ts\" />\n\nimport Decorators from \"./_decorators\";\nimport Core from \"./core/core\";\nimport Input from \"./core/input\";\nimport ResourceMap from \"./resources/resourceMap\";\nimport Timer from \"./extras/timer\";\n\n\"use strict\";\n\ninterface IApp {\n    webglVersion?: number;    // TODO: Unused\n    loadAssets: () => void;\n    initialize: (app_: App) => void;\n    update: (app_: App, dt: number) => void;\n    draw: (app_: App, dt?: number) => void;\n    cameraUpdate: () => void;\n    textCB: (gui: dat.GUI) => void;\n}\n\n@Decorators.sealed\nclass App {\n\n    protected stats: Stats;\n    protected gui: dat.GUI;\n\n    protected cameraUpdateCb;\n    constructor(init: IApp, text: any) {\n        if (!init.webglVersion) {\n            init.webglVersion = 2;\n        }\n        this._appFunctions = init;\n        console.log(this._appFunctions);\n        this.__init__(text);\n    };\n\n    public webglVersion(): number {\n        return this._appFunctions.webglVersion;\n    }\n\n    private __init__(text) {\n        Core.getInstance().initialize([1.0, 1.0, 1.0, 1.0]);\n\n        this.gui = new dat.GUI();\n\n\n        this._appFunctions.textCB(this.gui);\n\n        let self = this;\n        this.gui.add(text, \"resume\", true).onChange(function(v) {\n            if (v === true) {\n               self.resume();\n            } else {\n                self.pause();\n            }\n        });\n\n        this.stats = new Stats();\n        this.stats.setMode(0);\n        document.body.appendChild(this.stats.domElement);\n\n        this._appFunctions.loadAssets();\n    }\n\n    public start() {\n        let self = this;\n        ResourceMap.setLoadCompleteCallback(function() {\n            console.log(\"ALL RESOURCES LOADED!!!!\");\n\n            self._appFunctions.initialize(self);\n\n            // Remove loader css3 window\n            document.getElementById(\"spinner\").remove();\n            try {\n                (function __render__(dt?: number) {\n                    // console.log(dt);\n                    Input.getInstance().update();\n\n                    self.stats.begin();\n                    dt *= 0.001; // convert to seconds\n\n                    Timer.update();\n\n                    // self.__resize__();\n\n                    if (self._resume) {\n                        self._appFunctions.update(self, dt);\n                        self._appFunctions.draw(self, dt);    // Draw user function\n                    }\n\n                    self.stats.end();\n\n                    requestAnimationFrame(__render__);\n                })(0.0);\n            } catch (e) {\n                VanillaToasts.create({\n                    title: \"Error:\",\n                    text: `${e}`,\n                    type: \"error\"\n                });\n                throw e;\n            }\n        });\n        return this;\n    };\n\n    public pause() {\n        console.log(\"PAUSE\");\n        this._resume = false;\n    };\n    public resume() {\n        console.log(\"RESUME\");\n        this._resume = true;\n    };\n\n    protected _resume: boolean = true;\n\n    protected __resize__() {\n        let canvas: HTMLCanvasElement = Core.getInstance().canvas();\n        let realToCSSPixels = window.devicePixelRatio || 1;\n\n        // Lookup the size the browser is displaying the canvas in CSS pixels\n        // and compute a size needed to make our drawingbuffer match it in\n        // device pixels.\n        let displayWidth  = Math.floor(canvas.clientWidth  * realToCSSPixels);\n        let displayHeight = Math.floor(canvas.clientHeight * realToCSSPixels);\n\n        // Check if the canvas is not the same size.\n        if (canvas.width  !== displayWidth ||\n            canvas.height !== displayHeight) {\n\n            // Make the canvas the same size\n            canvas.width  = displayWidth;\n            canvas.height = displayHeight;\n\n            // Set the viewport to match\n            Core.getInstance().changeViewport(0, 0, canvas.width, canvas.height);\n\n            // TODO: cameraUpdateCb();\n        }\n    }\n\n    protected _appFunctions: IApp;\n};\n\nexport default App;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/App.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"input.ts\" />\n/// <reference path=\"context.ts\" />\n/// <reference path=\"../constants/_constants.ts\" />\n\nimport Context from \"./context\";\nimport Input from \"./input\";\n\n\"use strict\";\n/**\n* This class get WebGL2 context and animationFrame for your navigator.\n*\n* @class core.Core\n*/\nclass Core {\n    private static _instance: Core = new Core();\n\n    private _gl: WebGLRenderingContext;\n\n    constructor() {\n        if (Core._instance) {\n            throw new Error(\"Error: Instantiation failed: Use Core.getInstance() instead of new.\");\n        }\n        this._gl = Context.getContext();\n\n        Input.getInstance();\n\n        Core._instance = this;\n    }\n\n    public initialize(color: Array<number>) {\n        const gl = this._gl;\n        this.init();\n        // ToneMap.init(gl);\n        gl.clearColor(color[0], color[1], color[2], color[3]);\n    }\n\n    public clearColorAndDepth() {\n        this._gl.clear(this._gl.COLOR_BUFFER_BIT | this._gl.DEPTH_BUFFER_BIT);\n    }\n    public changeViewport(x: number, y: number, w: number, h: number) {\n        this._gl.viewport(x, y, w, h);\n    }\n    public canvas(): HTMLCanvasElement {\n        return this._gl.canvas;\n    }\n    protected init() {\n        Depth.enable();\n        Depth.comparison(ComparisonFunc.Less);\n\n        // Set images to flip y axis to match the texture coordinate space.\n        // gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 1);\n\n        Cull.enable();\n        Blend.disable();\n    }\n\n    public static getInstance(): Core {\n        if (!Core._instance) {\n            console.log(\"Creando core\");\n            Core._instance = new Core();\n        }\n        return Core._instance;\n    }\n\n    /**\n    * Return global WebGL context\n    *\n    * @method getGL\n    * @return {WebGLRenderingContext} Returns WebGL rendering context\n    */\n    public getGL(): WebGLRenderingContext {\n        return this._gl;\n    }\n};\nContext.getContext();\nCore.getInstance();\n\nimport Depth from \"./depth\";\nimport Cull from \"./cull\";\nimport Blend from \"./blend\";\n\nimport ComparisonFunc from \"../constants/ComparisonFunc\";\n\nexport default Core;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/core/core.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"./log.ts\" />\n\nimport log from \"./log\";\n// TODO: in getContext, check antialias or anothers params\nclass Context {\n    static _gl: WebGLRenderingContext = null;\n    static _canvas: HTMLCanvasElement = null;\n    static getContext(canvasName?: string): WebGLRenderingContext {\n        if (!Context._gl) {\n            if (!canvasName) {\n                log.info(\"Not canvas. Create one ...\");\n                this._canvas = document.createElement(\"canvas\");\n                this._canvas.width = 800;\n                this._canvas.height = 800;\n\n                document.body.appendChild(this._canvas);\n            } else {\n                this._canvas = <HTMLCanvasElement>document.getElementById(canvasName);\n            }\n            log.info(\"Get context\");\n            Context._gl = Context._getContext(this._canvas);\n            if (!Context._gl) {\n                document.write(\"<br><b>WebGL is not supported!</b>\");\n                throw new Error(\"WebGL is not supported!\");\n            }\n            log.info(\"WebGLRenderingContext OK :)\");\n            Context._getVendors();\n        }\n        return Context._gl;\n    }\n    protected static _getContext(canvas: HTMLCanvasElement): WebGLRenderingContext {\n        let contexts: string[] = \"webgl2,webgl,experimental-webgl2\".split(\",\");\n        let gl: WebGLRenderingContext;\n        let ctx;\n        for (let i = 0; i < contexts.length; ++i) {\n            ctx = contexts[i];\n            gl = <WebGLRenderingContext>canvas.getContext(contexts[i]);\n            if (gl) {\n                return gl;\n            }\n        }\n        return null;\n    }\n    protected static _getVendors() {\n        let vendors: string[] = \"ms,moz,webkit,o\".split(\",\");\n        if (!window.requestAnimationFrame) {\n            let vendor;\n            for (let i = 0; i < vendors.length; ++i) {\n                vendor = vendors[i];\n                window.requestAnimationFrame = window[vendor + \"RequestAnimationFrame\"];\n                window.cancelAnimationFrame = window[vendor + \"CancelAnimationFrame\"] ||\n                    window[vendor + \"CancelRequestAnimationFrame\"];\n                if (window.requestAnimationFrame) {\n                    break;\n                }\n            }\n        }\n        // Manual fallback\n        if (!window.requestAnimationFrame) {\n            let lastTime = 0;\n            window.requestAnimationFrame = function(cb) {\n                const currTime = Date.now();\n                const timeToCall = Math.max(0, 16 - (currTime - lastTime));\n                const id = window.setTimeout(function() {\n                    cb(currTime + timeToCall);\n                }, timeToCall);\n                lastTime = currTime + timeToCall;\n                return id;\n            };\n        }\n\n        if (!window.cancelAnimationFrame) {\n            window.cancelAnimationFrame = function(id) {\n                clearTimeout(id);\n            };\n        };\n    }\n};\n\nexport default Context;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/core/context.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"../../typings/log4javascript.d.ts\" />\n\n// var log = log4javascript.getDefaultLogger();\n// log.setLevel(log4javascript.Level.INFO);\n\nlet consoleAppender, logger;\nlogger = log4javascript.getLogger(\"my_logger\");\nconsoleAppender = new log4javascript.BrowserConsoleAppender();\nlogger.addAppender(consoleAppender);\n\nexport default logger;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/core/log.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"context.ts\" />\n\nimport Context from \"./context\";\n\n\"use strict\";\n// TODO: Remove Input singleton mode :S\nclass Input {\n    private static _instance: Input = new Input();\n\n    constructor() {\n        if (Input._instance) {\n            throw new Error(\"Error: Instantiation failed: Use Input.getInstance() instead of new.\");\n        }\n\n        for (let i = 0; i < this.keys[\"LastKeyCode\"]; ++i) {\n            this._isKeyPressed[i] = false;\n            this._keyPreviusState[i] = false;\n            this._isKeyClicked[i] = false;\n        }\n\n        for (let i = 0; i < 3; ++i) {\n            this._buttonPreviousState[i] = false;\n            this._isButtonClicked[i] = false;\n            this._isButtonPressed[i] = false;\n        }\n\n        let self = this;\n        // Register handles\n        window.addEventListener(\"keyup\", function(ev: KeyboardEvent) {\n            if (ev.keyCode === 40 || ev.keyCode === 38) {\n                ev.preventDefault();\n            }\n            self._onKeyUp(ev);\n        });\n        window.addEventListener(\"keydown\", function(ev: KeyboardEvent) {\n            if (ev.keyCode === 40 || ev.keyCode === 38) {\n                ev.preventDefault();\n            }\n            self._onKeyDown(ev);\n        });\n        window.addEventListener(\"mousedown\", function(ev: MouseEvent) {\n            self._onMouseDown(ev);\n        });\n        window.addEventListener(\"mousemove\", function(ev: MouseEvent) {\n            self._onMouseMove(ev);\n        });\n        window.addEventListener(\"mouseup\", function(ev: MouseEvent) {\n            self._onMouseUp(ev);\n        });\n\n        Input._instance = this;\n    }\n\n    // Mouse states\n    public static mouseButton = {\n        Left: 0,\n        Middle: 1,\n        Right: 2\n    };\n\n    // Key code constants\n    public keys = {\n        Left_Shift: 16,\n        // arrows\n        Left: 37,\n        Up: 38,\n        Right: 39,\n        Down: 40,\n\n        // space bar\n        Space: 32,\n\n        // numbers\n        Zero: 48,\n        One: 49,\n        Two: 50,\n        Three: 51,\n        Four: 52,\n        Five: 53,\n        Six: 54,\n        Seven: 55,\n        Eight: 56,\n        Nine: 57,\n\n        // Alphabets\n        A: 65,\n        D: 68,\n        E: 69,\n        F: 70,\n        G: 71,\n        I: 73,\n        J: 74,\n        K: 75,\n        L: 76,\n        M: 77,\n        N: 78,\n        O: 79,\n        P: 80,\n        Q: 81,\n        R: 82,\n        S: 83,\n        W: 87,\n        LastKeyCode: 222\n    };\n\n    public update() {\n        for (let i = 0; i < this.keys[\"LastKeyCode\"]; ++i) {\n            this._isKeyClicked[i] = (!this._keyPreviusState[i]) && this._isKeyPressed[i];\n            this._keyPreviusState[i] = this._isKeyPressed[i];\n        }\n        for (let i = 0; i < 3; ++i) {\n            this._isButtonClicked[i] = (!this._buttonPreviousState[i]) && this._isButtonPressed[i];\n            this._buttonPreviousState[i] = this._isButtonPressed[i];\n        }\n    }\n\n    public isKeyPressed(keycode: number) {\n        return this._isKeyPressed[keycode];\n    }\n\n    public isKeyClicked(keycode: number) {\n        return this._isKeyClicked[keycode];\n    }\n\n    // Previous key state\n    protected _keyPreviusState: Array<boolean> = [];\n    // Pressed keys\n    protected _isKeyPressed: Array<boolean> = [];\n    // Click events: once an event is set, it will remain there until polled\n    protected _isKeyClicked: Array<boolean> = [];\n\n    protected _onKeyDown(ev: KeyboardEvent) {\n        this._isKeyPressed[ev.keyCode] = true;\n    }\n\n    protected _onKeyUp(ev: KeyboardEvent) {\n        this._isKeyPressed[ev.keyCode] = false;\n    }\n    public _buttonPreviousState: Array<boolean> = [];\n    public _isButtonPressed: Array<boolean> = [];\n    public _isButtonClicked: Array<boolean> = [];\n    public _mousePosX = -1;\n    public _mousePosY = -1;\n    protected _onMouseMove(ev: MouseEvent): boolean {\n        let inside = false;\n        const canvas = Context.getContext().canvas;\n        let bbox = canvas.getBoundingClientRect();\n\n        // const x = Math.round((ev.clientX - bbox.left) * (canvas.width / bbox.width));\n        // const y = Math.round((ev.clientY - bbox.top) * (canvas.width / bbox.width));\n\n        const x = ((ev.clientX - bbox.left) - canvas.height / 2) / (canvas.height / 2);\n        const y = (canvas.width / 2 - (ev.clientY - bbox.top)) / (canvas.width / 2);\n\n        if ((x >= 0) && (x < canvas.width) &&\n            (y >= 0) && (y < canvas.height)) {\n            this._mousePosX = x;\n            this._mousePosY = canvas.height - 1 - y;\n            inside = true;\n        }\n        return inside;\n    }\n\n    protected _onMouseDown(ev: MouseEvent) {\n        if (this._onMouseMove(ev)) {\n            this._isButtonPressed[ev.button] = true;\n        }\n    };\n    protected _onMouseUp(ev: MouseEvent) {\n        this._onMouseMove(ev);\n        this._isButtonPressed[ev.button] = false;\n    };\n    public static getInstance(): Input {\n        return Input._instance;\n    };\n    public isButtonPressed(button): boolean {\n        return this._isButtonPressed[button];\n    }\n    public isButtonClicked(button): boolean {\n        return this._isButtonClicked[button];\n    }\n    public getMousePosX(): number {\n        return this._mousePosX;\n    }\n    public getMousePosY(): number {\n        return this._mousePosY;\n    }\n};\n\nexport default Input;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/core/input.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"../constants/_constants.ts\" />\n/// <reference path=\"context.ts\" />\n\nimport Context from \"./context\";\nimport ComparisonFunc from \"../constants/ComparisonFunc\";\n\n\"use strict\";\n\nclass Depth {\n    /**\n     * Enable depth testing.\n     */\n    public static enable() {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        gl.enable(gl.DEPTH_TEST);\n    }\n\n    /**\n     * Enable writing into the depth buffer.\n     */\n    public static use() {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        gl.depthMask(true);\n    }\n\n    /**\n     * Specify the mode used for depth buffer comparisons.\n     * @param {ComparisonFunc} compFunc: Comparisor mode.\n     */\n    public static comparison(compFunc: ComparisonFunc) {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        gl.depthFunc(compFunc);\n    }\n\n    /**\n     * Specify mapping of depth values from normalized device coordinates to window coordinates.\n     * @param {number = 0.0} znear: Specifies the mapping of the near clipping plane to window coordinates.\n     * @param {number = 1.0} zfar: Specifies the mapping of the far clipping plane to window coordinates.\n     */\n    public static depthRange(znear: number = 0.0, zfar: number = 1.0) {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        if (znear > zfar || znear < 0.0 || zfar > 1.0) {\n            console.warn(\"Values out of range [(znear < zfar), (znear > 0), (zfar < 1)]\");\n            return;\n        }\n        gl.depthRange(znear, zfar);\n    }\n\n    /**\n     * Clear depth buffer.\n     */\n    public static clear() {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        gl.clear(gl.DEPTH_BUFFER_BIT);\n    }\n\n    /**\n     * Disable writing into the depth buffer.\n     */\n    public static unuse() {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        gl.depthMask(false);\n    }\n\n    /**\n     * Disable depth testing.\n     */\n    public static disable() {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        gl.disable(gl.DEPTH_TEST);\n    }\n\n    /**\n     * Checks if depth test is activated\n     * @return {boolean}: True if activated\n     */\n    public static isEnabled(): boolean {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        return gl.isEnabled(gl.DEPTH_TEST);\n    }\n};\n\nexport default Depth;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/core/depth.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"../constants/_constants.ts\" />\n/// <reference path=\"context.ts\" />\n\nimport Context from \"./context\";\n\n\"use strict\";\n\nclass Cull {\n    /**\n     * Enable cullFace test.\n     */\n    public static enable() {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        gl.enable(gl.CULL_FACE);\n    }\n\n    /**\n     * Get current cullFace mode\n     * @return {Face}: Current cullFace mode\n     */\n    public static getMode(): Face {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        return gl.getParameter(gl.CULL_FACE_MODE);\n    }\n\n    /**\n     * Specify whether front/back-facing facets can be culled.\n     * @param {Face} mode: Cull face mode\n     */\n    public static setMode(mode: Face) {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        gl.cullFace(mode);\n    }\n\n    /**\n     * Disable cullFace test.\n     */\n    public static disable() {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        gl.disable(gl.CULL_FACE);\n    }\n\n    /**\n     * Checks if cullFace is activated\n     * @return {boolean}: True if activated\n     */\n    public static isEnabled(): boolean {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        return gl.isEnabled(gl.CULL_FACE);\n    }\n};\n\nimport Face from \"../constants/Face\";\n\nexport default Cull;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/core/cull.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"../constants/_constants.ts\" />\n/// <reference path=\"context.ts\" />\n\nimport Context from \"./context\";\n\nimport BlendingEq from \"../constants/BlendingEq\";\nimport BlendingType from \"../constants/BlendingType\";\n\n\"use strict\";\n\n/**\n * Blend wrapper\n * @class Blend\n */\nclass Blend {\n    /**\n     * Enable blending\n     */\n    public static enable() {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        gl.enable(gl.BLEND);\n    }\n    /**\n     * Specify the equation used for both the RGB blend equation and the Alpha blend equation\n     * @param {BlendingEq} mode: Specifies how source and destination colors are combined\n     */\n    public static equation(mode: BlendingEq) {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        gl.blendEquation(mode);\n    }\n    /**\n     * Set the RGB blend equation and the alpha blend equation separately\n     * @param {BlendingEq} modeRGB: Specifies the RGB blend equation,\n     *      how thered, green, and blue components of the source and\n     *      destination colors are combined.\n     * @param {BlendingEq} modeAlpha: Specifies the alpha blend equation,\n     *      how the alpha component of the source and destination colors\n     *      are combined.\n     */\n    public static equationSeparate(modeRGB: BlendingEq, modeAlpha: BlendingEq) {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        gl.blendEquationSeparate(modeRGB, modeAlpha);\n    }\n\n    public getBlendEquRGB(): BlendingEq {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        return gl.getParameter(gl.BLEND_EQUATION_RGB);\n    }\n    public getBlendEquAlpha(): BlendingEq {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        return gl.getParameter(gl.BLEND_EQUATION_ALPHA);\n    }\n    /**\n     * Set the blend color\n     * @param {number = 0.0} red\n     * @param {number = 0.0} green\n     * @param {number = 0.0} blue\n     * @param {number = 0.0} alpha\n     */\n    public static color(red: number = 0.0,\n        green: number = 0.0,\n        blue: number = 0.0,\n        alpha: number = 0.0) {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        gl.blendColor(red, green, blue, alpha);\n    }\n    /**\n     * Specify pixel arithmetic.\n     * @param {BlendingType = BlendingType.One} sfactor: Specifies how the red,\n     *     green, blue, and alpha source blending factors are computed.\n     * @param {BlendingType = BlendingType.Zero} dfactor: Specifies how the red,\n     *     green, blue, and alpha destination blending factors are computed.\n     */\n    public static func(sfactor: BlendingType = BlendingType.One,\n        dfactor: BlendingType = BlendingType.Zero) {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        gl.blendFunc(sfactor, dfactor);\n    }\n\n    /**\n     * Specify pixel arithmetic for RGB and alpha components separately.\n     * @param {BlendingType = BlendingType.One} rcRGB: Specifies how the red, green,\n     *      and blue blending factors are computed.\n     * @param {BlendingType = BlendingType.Zero} dstRGB: Specifies how the red, green,\n     *      and blue destination blending factors are computed.\n     * @param {BlendingType = BlendingType.One} srcAlpha: Specified how the alpha source\n     *      blending factor is computed.\n     * @param {BlendingType = BlendingType.Zero} dstAlpha: Specified how the alpha destination\n     *      blending factor is computed.\n     */\n    public static funcSeparate(srcRGB: BlendingType = BlendingType.One,\n        dstRGB: BlendingType = BlendingType.Zero,\n        srcAlpha: BlendingType = BlendingType.One,\n        dstAlpha: BlendingType = BlendingType.Zero) {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        gl.blendFuncSeparate(srcRGB, dstRGB, srcAlpha, dstAlpha);\n    }\n\n    /**\n     * Disable blending\n     */\n    public static disable() {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        gl.disable(gl.BLEND);\n    }\n\n    /**\n     * Checks if blending is activated\n     * @return {boolean}: True if activated\n     */\n    public static isEnabled(): boolean {\n        const gl = Context.getContext(); // Core.getInstance().getGL();\n        return gl.isEnabled(gl.BLEND);\n    }\n\n};\n\nexport default Blend;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/core/blend.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"../core/context.ts\" />\nimport Context from \"../core/context\";\n\n\"use strict\";\n\nconst gl = Context.getContext();\n\n// Blending type\nenum BlendingType {\n    Zero = gl.ZERO,\n    One = gl.ONE,\n    SrcColor = gl.SRC_COLOR,\n    OneMinusSrcColor = gl.ONE_MINUS_SRC_COLOR,\n    SrcAlpha = gl.SRC_ALPHA,\n    OneMinusSrcAlpha = gl.ONE_MINUS_SRC_ALPHA,\n    DstAlpha = gl.DST_ALPHA,\n    OneMinusDstAlpha = gl.ONE_MINUS_DST_ALPHA,\n    DstColor = gl.DST_COLOR,\n    OneMinusDstColor = gl.ONE_MINUS_DST_COLOR,\n    SrcAlphaSaturate = gl.SRC_ALPHA_SATURATE,\n    CteColor = gl.CONSTANT_COLOR,\n    OneMinusCteColor = gl.ONE_MINUS_CONSTANT_COLOR,\n    CteAlpha = gl.CONSTANT_ALPHA,\n    OneMinusCteAlpha = gl.ONE_MINUS_CONSTANT_ALPHA,\n};\n\nexport default BlendingType;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/constants/BlendingType.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"../core/context.ts\" />\nimport Context from \"../core/context\";\n\n\"use strict\";\n\nconst gl = Context.getContext();\n\n// Comparison function\nenum ComparisonFunc {\n    Never = gl.NEVER,                       ///< Comparison always fails\n    Always = gl.ALWAYS,                     ///< Comparison always succeeds\n    Less = gl.LESS,                         ///< Passes if source is less than the destination\n    Equal = gl.EQUAL,                       ///< Passes if source is equal to the destination\n    NotEqual = gl.NOTEQUAL,                 ///< Passes if source is not equal to the destination\n    LessEqual = gl.LEQUAL,                  ///< Passes if source is less than or equal to the destination\n    Greater = gl.GREATER,                   ///< Passes if source is greater than to the destination\n    GreaterEqual = gl.GEQUAL                ///< Passes if source is greater than or equal to the destination\n};\n\nexport default ComparisonFunc;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/constants/ComparisonFunc.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"../../typings/vanilla-toasts/vanilla-toasts.d.ts\" />\n\n\"use strict\";\n\nnamespace ResourceMap {\n    export class MapEntry {\n        public _asset: string;\n        public _refCount: number;\n        constructor(resName: string) {\n            this._asset = resName;\n            this._refCount = 1;\n        }\n        public getAsset(): string { return this._asset; }\n        public setAsset(name: string) {\n            this._asset = name;\n        }\n        public count(): number {\n            return this._refCount;\n        }\n        public incCount() {\n            this._refCount++;\n        }\n        public decCount() {\n            this._refCount--;\n        }\n    }\n    /**\n     * [_numOutstandingLoads description]\n     * @type {number}\n     */\n    let _numOutstandingLoads: number = 0;\n    /**\n     * [_loadCompleteCallback description]\n     * @type {Function}\n     */\n    let _loadCompleteCallback: Function = null;\n    /**\n     * [MapEntry description]\n     * @type {[type]}\n     */\n    export let _resourceMap: { [ key: string ]: MapEntry; } = {};\n    /**\n     * @param {string}\n     */\n    export function asyncLoadRequested(resName: string) {\n        _resourceMap[resName] = new MapEntry(resName);\n        ++_numOutstandingLoads;\n    };\n    /**\n     * @param {string}\n     */\n    export function asyncLoadFailed(resName: string) {\n        VanillaToasts.create({\n            title: `${resName} completed`,\n            text: \"\",\n            type: \"error\",\n            timeout: 2500\n        });\n        --_numOutstandingLoads;\n        _checkForAllLoadCompleted();\n    }\n    /**\n     * @param {string}\n     * @param {[type]}\n     */\n    export function asyncLoadCompleted(resName: string, loadedAsset) {\n        if (!isAssetLoaded(resName)) {\n            VanillaToasts.create({\n                title: `asyncLoadCompleted: [${resName}] not in map!`,\n                text: \"\",\n                type: \"error\",\n                timeout: 2500\n            });\n        }\n        VanillaToasts.create({\n            title: `${resName} completed`,\n            text: \"\",\n            type: \"success\",\n            timeout: 1500\n        });\n        _resourceMap[resName].setAsset(loadedAsset);\n        --_numOutstandingLoads;\n        _checkForAllLoadCompleted();\n    };\n    /**\n     *\n     */\n    function _checkForAllLoadCompleted() {\n        if ((_numOutstandingLoads === 0) && (_loadCompleteCallback !== null)) {\n            let funToCall = _loadCompleteCallback;\n            _loadCompleteCallback = null;\n            funToCall();\n        }\n    };\n    /**\n     * Set callback function that called when all assets have finished loading.\n     * @param {Function}\n     */\n    export function setLoadCompleteCallback(fn) {\n        _loadCompleteCallback = fn;\n        _checkForAllLoadCompleted();\n    };\n    /**\n     * Get asset from alias/name\n     * @param  {string} resName [description]\n     * @return {any}\n     */\n    export function retrieveAsset(resName: string): any {\n        let r = null;\n        if (resName in _resourceMap) {\n            r = _resourceMap[resName].getAsset();\n        } else {\n            alert(`retrieveAsset: [${resName}] not in map!`);\n        }\n        return r;\n    };\n    /**\n     * Check whether the resource has already been loaded.\n     * @param  {string} resName: Resource name\n     * @return {boolean}: True if resource exist\n     */\n    export function isAssetLoaded(resName: string): boolean {\n        return (resName in _resourceMap);\n    };\n    /**\n     * @param {string}\n     */\n    export function incAssetRefCount (resName: string) {\n        _resourceMap[resName].incCount();\n    };\n    /**\n     * Unload a existing resource.\n     * @param {string}\n     */\n    export function unloadAsset (resName: string) {\n        let c = 0;\n        if (resName in _resourceMap) {\n            _resourceMap[resName].decCount();\n            c = _resourceMap[resName].count();\n            if (c === 0) {\n                delete _resourceMap[resName];\n            }\n        }\n        return c;\n    };\n};\n\nexport default ResourceMap;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/resources/resourceMap.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\n\"use strict\";\n\nnamespace Timer {\n    let _lastTime = Date.now();\n    let _deltaTime = 0.0;\n\n    let _currentTime, _timeElapsed;\n    /**\n     *\n     */\n    export function update() {\n        _currentTime = Date.now();\n        _timeElapsed = _currentTime - _lastTime;\n        _deltaTime = _timeElapsed;\n        _lastTime = _currentTime;\n    }\n    /**\n     * @return {number}\n     */\n    export function deltaTime(): number {\n        return _deltaTime;\n    }\n}\n\nexport default Timer;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/extras/timer.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"drawable.ts\" />\n\nimport Drawable from \"./drawable\";\n\n\"use strict\";\n\n/**\n * Sphere class\n * @class Sphere\n */\nclass Sphere extends Drawable {\n    /**\n     * Sphere constructor\n     * @param {number} radius [description]\n     * @param {number} slices [description]\n     * @param {number} stacks [description]\n     */\n    constructor(radius: number, slices: number, stacks: number) {\n        super();\n\n        let nv = (slices + 1) * (stacks + 1);\n        let elements = (slices * 2 * (stacks - 1)) * 3;\n\n        // v\n        let v = new Array(3 * nv);\n        // Normals\n        let n = new Array(3 * nv);\n        // Tex coords\n        let tex = new Array(2 * nv);\n        // Elements\n        let el = new Array(elements);\n\n        // Generate the vertex data\n        // Generate positions and normals\n        let theta, phi;\n        let thetaFac = Math.PI * 2.0 / slices;\n        let phiFac = Math.PI / stacks;\n        let nx, ny, nz, s, t;\n        let idx = 0, tIdx = 0;\n        for ( let i = 0; i <= slices; ++i ) {\n            theta = i * thetaFac;\n                    s = i / slices;\n            for ( let j = 0; j <= stacks; ++j ) {\n                phi = j * phiFac;\n                            t = j / stacks;\n                nx = Math.sin(phi) * Math.cos(theta);\n                ny = Math.sin(phi) * Math.sin(theta);\n                nz = Math.cos(phi);\n                v[idx] = radius * nx; v[idx + 1] = radius * ny; v[idx + 2] = radius * nz;\n                n[idx] = nx; n[idx + 1] = ny; n[idx + 2] = nz;\n                idx += 3;\n\n                            tex[tIdx] = s;\n                            tex[tIdx + 1] = t;\n                            tIdx += 2;\n            }\n        }\n\n        // Generate the element list\n        idx = 0;\n        for ( let i = 0; i < slices; ++i ) {\n            let stackStart = i * (stacks + 1);\n            let nextStackStart = (i + 1) * (stacks + 1);\n            for ( let j = 0; j < stacks; ++j ) {\n                if ( j === 0 ) {\n                    el[idx] = stackStart;\n                    el[idx + 1] = stackStart + 1;\n                    el[idx + 2] = nextStackStart + 1;\n                    idx += 3;\n                } else if ( j === stacks - 1) {\n                    el[idx] = stackStart + j;\n                    el[idx + 1] = stackStart + j + 1;\n                    el[idx + 2] = nextStackStart + j;\n                    idx += 3;\n                } else {\n                    el[idx] = stackStart + j;\n                    el[idx + 1] = stackStart + j + 1;\n                    el[idx + 2] = nextStackStart + j + 1;\n                    el[idx + 3] = nextStackStart + j;\n                    el[idx + 4] = stackStart + j;\n                    el[idx + 5] = nextStackStart + j + 1;\n                    idx += 6;\n                }\n            }\n        }\n\n        this._handle = [];\n        this._vao.bind();\n\n        this.addElementArray(new Uint16Array(el));\n\n        this.addBufferArray(0, new Float32Array(v), 3);\n        this.addBufferArray(1, new Float32Array(n), 3);\n        this.addBufferArray(2, new Float32Array(tex), 2);\n\n        this._indicesLen = el.length;\n    }\n    // public render() {\n        // gl.lineWidth(1.0);\n        // Puts vertices to buffer and links it to attribute letiable 'ppos'\n        // gl.drawElements(gl.LINE_STRIP, this._indicesLen, gl.UNSIGNED_SHORT, 0);\n};\n\nexport default Sphere;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/models/sphere.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"../core/core.ts\" />\n/// <reference path=\"../core/vertexArray.ts\" />\n/// <reference path=\"../core/vertexBuffer.ts\" />\n/// <reference path=\"../constants/_constants.ts\" />\n/// <reference path=\"../extras/extensions.ts\" />\n\nimport Core from \"../core/core.ts\";\nimport VertexArray from \"../core/vertexArray.ts\";\nimport VertexBuffer from \"../core/vertexBuffer.ts\";\nimport UsageType from \"../constants/UsageType.ts\";\nimport BufferType from \"../constants/BufferType.ts\";\nimport extensions from \"../extras/extensions\";\n\n\"use strict\";\n\nconst gl = Core.getInstance().getGL();\n\ndeclare var WebGL2RenderingContext: any;\n\n/**\n * Drawable abstract class\n * @class Drawable\n */\nabstract class Drawable {\n    protected _indicesLen: number;\n    protected _handle: Array<VertexBuffer>;\n    protected _vao: VertexArray;\n    /**\n     * Drawable constructor\n     */\n    constructor() {\n        this._vao = new VertexArray();\n    };\n\n    /**\n     * Add Element buffer object.\n     * @param {Uint16Array} data [description]\n     * @param {UsageType = UsageType.StaticDraw} type [description]\n     */\n    protected addElementArray(data: Uint16Array, type: UsageType = UsageType.StaticDraw) {\n        let vb: VertexBuffer = new VertexBuffer(BufferType.ElementArray);\n        vb.bufferData(new Uint16Array(data), type);\n        this._handle.push(vb);\n        return vb;\n    };\n\n    /**\n     * Add Vertex buffer object.\n     * @param  {number} attribLocation [description]\n     * @param  {Float32Array} data [description]\n     * @param  {number} numElems [description]\n     * @param  {UsageType = UsageType.StaticDraw} type [description]\n     * @return {VertexBuffer} [description]\n     */\n    protected addBufferArray(attribLocation: number,\n        data: Float32Array, numElems: number, type: UsageType = UsageType.StaticDraw): VertexBuffer {\n        let vb: VertexBuffer = new VertexBuffer(BufferType.Array);\n        vb.bufferData(data, type);\n        vb.vertexAttribPointer(attribLocation, numElems, gl.FLOAT);\n        this._handle.push(vb);\n        return vb;\n    };\n\n    /**\n     * Normal render\n     */\n    public render() {\n        this._vao.bind();\n        gl.drawElements(gl.TRIANGLES, this._indicesLen, gl.UNSIGNED_SHORT, 0);\n        this._vao.unbind();\n    };\n\n    /**\n     * Render with element instance mode\n     * @param {number} numInstances: Instances to render\n     */\n    public renderElementInstance(numInstances: number) {\n        this._vao.bind();\n        if (gl instanceof WebGL2RenderingContext) {\n            (<any>gl).drawElementsInstanced(\n                gl.TRIANGLES,\n                this._indicesLen,\n                gl.UNSIGNED_SHORT,\n                0,\n                numInstances\n            );\n        } else {\n            const ext = extensions.get(\"ANGLE_instanced_arrays\");\n            if (ext) {\n                ext.drawElementsInstancedANGLE(\n                    gl.TRIANGLES,\n                    this._indicesLen,\n                    gl.UNSIGNED_SHORT,\n                    0,\n                    numInstances\n                );\n            }\n        }\n        this._vao.unbind();\n    };\n\n    /**\n     * Render with array instance mode\n     * @param {number} numInstances: Instances to render\n     */\n    public renderArrayInstance(numInstances: number) {\n        this._vao.bind();\n        if (gl instanceof WebGL2RenderingContext) {\n            (<any>gl).drawArraysInstanced(\n                gl.TRIANGLES,\n                0,\n                this._indicesLen,\n                numInstances\n            );\n        } else {\n            const ext = extensions.get(\"ANGLE_instanced_arrays\");\n            if (ext) {\n                ext.drawArraysInstancedANGLE(\n                    gl.TRIANGLES,\n                    0,\n                    this._indicesLen,\n                    numInstances\n                );\n            }\n        }\n        this._vao.unbind();\n    };\n\n}\n\nexport default Drawable;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/models/drawable.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"../core/core.ts\" />\n/// <reference path=\"../extras/extensions.ts\" />\n\nimport Core from \"../core/core\";\nimport extensions from \"../extras/extensions\";\n\n\"use strict\";\n\nconst gl = Core.getInstance().getGL();\n\ndeclare var WebGL2RenderingContext: any;\n\nclass VertexArray {\n    /**\n     * [_handle description]\n     * @type {WebGLVertexArrayObject}\n     */\n    protected _handle: any; // TODO: WebGLVertexArrayObject;\n    /**\n     * Vertex array constructor\n     * @param {WebGLVertexArrayObject} vao [description]\n     */\n    constructor(vao?: any /**/) {\n        if (vao !== undefined) {\n            this._handle = vao;\n        } else {\n            if (gl instanceof WebGL2RenderingContext) {\n                this._handle = (<any>gl).createVertexArray();\n            } else {\n                const ext = extensions.get(\"OES_vertex_array_object\");\n                if (ext) {\n                    this._handle = ext.createVertexArrayOES();\n                }\n            }\n        }\n        this.bind();\n    }\n    /**\n     * [wrap description]\n     * @param {WebGLVertexArrayObject} vao [description]\n     */\n    public static wrap(vao: any /*WebGLVertexArrayObject*/) {\n        return new VertexArray(vao);\n    }\n    /**\n     * [bind description]\n     */\n    public bind() {\n        if (gl instanceof WebGL2RenderingContext) {\n            (<any>gl).bindVertexArray(this._handle);\n            return;\n        }\n        const ext = extensions.get(\"OES_vertex_array_object\");\n        if (ext) {\n            ext.bindVertexArrayOES(this._handle);\n        }\n    }\n    /**\n     * [unbind description]\n     */\n    public unbind() {\n        if (gl instanceof WebGL2RenderingContext) {\n            (<any>gl).bindVertexArray(null);\n            return;\n        }\n        const ext = extensions.get(\"OES_vertex_array_object\");\n        if (ext) {\n            ext.bindVertexArrayOES(null);\n        }\n    }\n    /**\n     * Destroy vertex array\n     */\n    public destroy() {\n        this.bind();\n        if (gl instanceof WebGL2RenderingContext) {\n            (<any>gl).deleteVertexArray(this._handle);\n            return;\n        }\n        const ext = extensions.get(\"OES_vertex_array_object\");\n        if (ext) {\n            ext.deleteVertexArrayOES(this._handle);\n        }\n    }\n    /**\n     * Check if current context supports VertexArray\n     * @return {boolean} True if current context supports VertexArray\n     */\n    public static isSupported(): boolean {\n        return gl instanceof WebGL2RenderingContext ||\n            extensions.get(\"OES_vertex_array_object\");\n    }\n    /**\n    public is(): boolean {\n        if (gl instanceof WebGL2RenderingContext) {\n            return (<any>gl).isVertexArray(this._handle);\n        }\n        const ext = extensions.get(\"OES_vertex_array_object\");\n        if (ext) {\n            return ext.isVertexArrayOES(this._handle);\n        }\n        return false;\n    }\n    /**/\n};\n\nexport default VertexArray;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/core/vertexArray.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"../core/core.ts\" />\n\nimport Core from \"../core/core\";\n\n\"use strict\";\n\nconst gl = Core.getInstance().getGL();\n\n// TODO: UNUSED\nnamespace extensions {\n    /**\n     * [_extensions description]\n     * @type {Object}\n     */\n    let _extensions = {};\n    /**\n     * [get description]\n     * @param {string} name [description]\n     */\n    export function get(name: string) {\n        if (name in _extensions) {\n            return _extensions[name];\n        }\n        let ext = gl.getExtension(name) || gl.getExtension(\"WEBKIT_\" + name) || gl.getExtension(\"MOZ_\" + name);\n\n        if (ext === null) {\n            console.warn(name + \" extension not supported.\");\n            return;\n        }\n        _extensions[name] = ext;\n        return ext;\n    }\n};\n\nexport default extensions;\n\n// const ext = gl_.getExtension(\"OES_draw_buffers_indexed\");\n// console.log(ext);\n\n/*let arr = [\n    'OES_element_index_uint',\n    'EXT_sRGB',\n    'EXT_blend_minmax',\n    'EXT_frag_depth',\n    'WEBGL_depth_texture',\n    'WEBKIT_WEBGL_depth_texture',\n    'EXT_shader_texture_lod',\n    'OES_standard_derivatives',\n    'OES_texture_float',\n    'OES_texture_half_float',\n    'OES_texture_half_float_linear',\n    'OES_vertex_array_object',\n    'WEBGL_draw_buffers',\n    'OES_fbo_render_mipmap',\n    'ANGLE_instanced_arrays'\n];\n\narr.forEach((v: string) => {\n    console.log(v);\n    console.log(gl_.getExtension(v));\n});*/\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/extras/extensions.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"../core/core.ts\" />\n/// <reference path=\"../constants/_constants.ts\" />\n\nimport Core from \"../core/core\";\nimport BufferType from \"../constants/BufferType\";\nimport UsageType from \"../constants/UsageType\";\n\n\"use strict\";\n\nconst gl = Core.getInstance().getGL();\n\nclass VertexBuffer {\n    /**\n     * [_buffer description]\n     * @type {WebGLBuffer}\n     */\n    protected _buffer: WebGLBuffer;\n    /**\n     * [_type description]\n     * @type {BufferType}\n     */\n    protected _type: BufferType = BufferType.Array;\n    /**\n     * Vertex buffer constructor\n     * @param {BufferType = BufferType.Array}\n     */\n    constructor(type: BufferType = BufferType.Array) {\n        this._buffer = gl.createBuffer();\n        this._type = type;\n        this.bind();\n    }\n    /**\n     * [bind description]\n     * @param {BufferType} type [description]\n     */\n    public bind(type?: BufferType) {\n        if (type !== undefined) {\n            this._type = type;\n        }\n        gl.bindBuffer(this._type, this._buffer);\n    }\n    /**\n     * [unbind description]\n     */\n    public unbind() {\n        gl.bindBuffer(this._type, null);\n    }\n    /**\n     * [getBufferType description]\n     * @return {BufferType} [description]\n     */\n    public getBufferType(): BufferType {\n        return this._type;\n    }\n    /**\n     * [getBuffer description]\n     * @return {WebGLBuffer} [description]\n     */\n    public getBuffer(): WebGLBuffer {\n        return this._buffer;\n    }\n    /**\n     * [destroy description]\n     */\n    public destroy() {\n        gl.bindBuffer(this._type, 0);\n        if (!this._buffer) {\n            gl.deleteBuffer(this._buffer);\n        }\n        this._buffer = null;\n    }\n    /**\n     * [bufferData description]\n     * @param {Float32Array | Uint16Array}          data  [description]\n     * @param {UsageType    = UsageType.StaticDraw} usage [description]\n     */\n    public bufferData(data: Float32Array | Uint16Array, usage: UsageType = UsageType.StaticDraw) {\n        this.bind();\n        gl.bufferData(this._type, data, usage);\n    }\n    /**\n     * [attribDivisor description]\n     * @param {number}    position [description]\n     * @param {number}    length   [description]\n     * @param {number}    divisor  [description]\n     * @param {number =        0}           stride [description]\n     */\n    public attribDivisor(position: number, length: number, divisor: number, stride: number = 0) {\n        this.bind();\n        gl.enableVertexAttribArray(position);\n        gl.vertexAttribPointer(position,\n            length,\n            gl.FLOAT,\n            false,\n            length * Float32Array.BYTES_PER_ELEMENT,\n            0);\n        (<any>gl).vertexAttribDivisor(position, divisor);\n    }\n    /**\n     * [vertexAttribPointer description]\n     * @param {number}     attribLocation [description]\n     * @param {number}     numElems       [description]\n     * @param {number}     type           [description]\n     * @param {boolean =              false}       normalized [description]\n     * @param {number  =              0}           offset     [description]\n     */\n    public vertexAttribPointer(attribLocation: number, numElems: number, type: number,\n        normalized: boolean = false, offset: number = 0) {\n        this.bind();\n        gl.enableVertexAttribArray(attribLocation);\n        gl.vertexAttribPointer(\n            attribLocation, // Attribute location\n            numElems, // Number of elements per attribute\n            type, // Type of elements\n            normalized,\n            numElems * Float32Array.BYTES_PER_ELEMENT, // Size of an individual vertex\n            offset // Offset from the beginning of a single vertex to this attribute\n        );\n    }\n}\n\nexport default VertexBuffer;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/core/vertexBuffer.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"../core/context.ts\" />\nimport Context from \"../core/context\";\n\n\"use strict\";\n\nconst gl = Context.getContext();\n\n// Array buffer type\nenum BufferType {\n    Array = gl.ARRAY_BUFFER,\n    ElementArray = gl.ELEMENT_ARRAY_BUFFER,\n    TransformFeedback = (<any>gl).TRANSFORM_FEEDBACK_BUFFER,\n    Uniform = (<any>gl).UNIFORM_BUFFER,\n    PixelPack = (<any>gl).PIXEL_PACK_BUFFER,\n    PixelUnpack = (<any>gl).PIXEL_UNPACK_BUFFER,\n    CopyRead = (<any>gl).COPY_READ_BUFFER,\n    CopyWrite = (<any>gl).COPY_WRITE_BUFFER,\n};\n\nexport default BufferType;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/constants/BufferType.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"../core/context.ts\" />\nimport Context from \"../core/context\";\n\n\"use strict\";\n\nconst gl = Context.getContext();\n\n// Usage type\nenum UsageType {\n    StaticDraw = gl.STATIC_DRAW,\n    DynamicDraw = gl.DYNAMIC_DRAW,\n    StreamDraw = gl.STREAM_DRAW,\n\n    StaticRead = (<any>gl).STATIC_READ,\n    DynamicRead = (<any>gl).DYNAMIC_READ,\n    StreamRead = (<any>gl).STREAM_READ,\n\n    StaticCopy = (<any>gl).STATIC_COPY,\n    DynamicCopy = (<any>gl).DYNAMIC_COPY,\n    StreamCopy = (<any>gl).STREAM_COPY,\n};\n\nexport default UsageType;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/constants/UsageType.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"drawable.ts\" />\n\nimport Drawable from \"./drawable\";\n\n\"use strict\";\n\n/**\n * Mesh class\n * @class Mesh\n */\nclass Mesh extends Drawable {\n    /**\n     * Mesh definition\n     * @param {string} fileRoute: Json file route\n     */\n    constructor(fileRoute: string) {\n        super();\n        this.loadJSON(fileRoute);\n    }\n\n    /**\n     * Vao construction\n     * @param {[type]} model: Model object in JSON format\n     * @param {[type]} el: Indices array\n     */\n    private createVAO(model, el: Array<number>) {\n        this._handle = [];\n        this._vao.bind();\n        // console.log(model.meshes[0]);\n\n        if (model.meshes[0].vertices) {\n            let verts = model.meshes[0].vertices;\n            this.addBufferArray(0, new Float32Array(verts), 3);\n        }\n        if (model.meshes[0].normals) {\n            let norms = model.meshes[0].normals;\n            this.addBufferArray(1, new Float32Array(norms), 3);\n        }\n        if (model.meshes[0].texturecoords) {\n            let tc = model.meshes[0].texturecoords[0];\n            this.addBufferArray(2, new Float32Array(tc), 2);\n        }\n\n        this.addElementArray(new Uint16Array(el));\n\n        this._vao.unbind();\n        this._indicesLen = el.length;\n    }\n\n    /**\n     * Read JSON file\n     * @param {string} url: Json file route\n     */\n    private loadJSON(url: string) {\n        let request = new XMLHttpRequest();\n        request.open(\"GET\", url, false);\n        let self = this;\n        request.onload = function () {\n            if (request.status < 200 || request.status > 299) {\n                console.log(`Error: HTTP Status ${request.status} on resource ${url}`);\n                return {};\n            } else {\n                let modelObj = JSON.parse(request.responseText);\n                self.createVAO(modelObj, [].concat.apply([], modelObj.meshes[0].faces));\n            }\n        };\n        request.send();\n    }\n};\n\nexport default Mesh;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/models/mesh.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"texture.ts\" />\n/// <reference path=\"texOptions.ts\" />\n/// <reference path=\"../extras/extensions.ts\" />\n\nimport Core from \"../core/core\";\nimport Texture from \"./texture\";\nimport TexOptions from \"./texOptions\";\nimport extensions from \"../extras/extensions\";\n\n\"use strict\";\n\nconst gl = Core.getInstance().getGL();\n\n// TODO: Es necesario realmente el tamao??\nclass Texture2D extends Texture {\n    protected _flipY: boolean;\n    protected _minFilter: number;\n    protected _magFilter: number;\n    protected _wraps: Array<number>;\n\n    constructor(data/*: ImageData*/, options: TexOptions = {}, onSuccess: () => void = null) {\n        super(gl.TEXTURE_2D);\n        // options = options || {};\n\n        // TODO: Support compression\n\n        this._flipY = options[\"flipY\"] === true;\n        this._handle = gl.createTexture();\n\n        let _internalformat = options[\"internalformat\"] || gl.RGBA;\n        let _format = options[\"format\"] || gl.RGBA;\n        let _type = options[\"type\"] || gl.UNSIGNED_BYTE;\n        const _level = options[\"level\"] || 0;\n\n        this._minFilter = options[\"minFilter\"] || gl.NEAREST;\n        this._magFilter = options[\"magFilter\"] || gl.NEAREST;\n        let wraps = options[\"wrap\"] || [gl.CLAMP_TO_EDGE, gl.CLAMP_TO_EDGE];\n\n        this.bind();\n\n        gl.texImage2D(\n            this._target,\n            _level, // Level of details\n            _internalformat, // Internal format\n            _format, // Format\n            _type, // Size of each channel\n            data\n        );\n\n        gl.texParameteri(this._target, gl.TEXTURE_MIN_FILTER, this._minFilter);\n        gl.texParameteri(this._target, gl.TEXTURE_MAG_FILTER, this._magFilter);\n        this.wrap(wraps);\n\n        /*// Prevent NPOT textures\n        // gl.NEAREST is also allowed, instead of gl.LINEAR, as neither mipmap.\n        gl.texParameteri(this._target, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        // Prevents s-coordinate wrapping (repeating).\n        gl.texParameteri(this._target, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        // Prevents t-coordinate wrapping (repeating).\n        gl.texParameteri(this._target, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);*/\n\n        if (onSuccess) {\n            onSuccess();\n        }\n    }\n    public genMipMap() {\n        this.bind();\n        // TODO: Check NPOT??\n        gl.generateMipmap(this._target);\n    }\n    public wrap(modes: Array<number>) {\n        if (modes.length !== 2) {\n            throw new Error(\"Must specify wrapS, wrapT modes\");\n        }\n        this.bind();\n        gl.texParameteri(this._target, gl.TEXTURE_WRAP_S, modes[0]);\n        gl.texParameteri(this._target, gl.TEXTURE_WRAP_T, modes[1]);\n        this._wraps = modes;\n    }\n    public minFilter(filter: number) {\n        this.bind();\n        gl.texParameteri(this._target, gl.TEXTURE_MIN_FILTER, filter);\n        this._minFilter = filter;\n    }\n    public magFilter(filter: number) {\n        this.bind();\n        gl.texParameteri(this._target, gl.TEXTURE_MAG_FILTER, filter);\n        this._magFilter = filter;\n    }\n    public bind(slot?: number) {\n        if (typeof slot === \"number\") {\n            gl.activeTexture(gl.TEXTURE0 + slot);\n        }\n        gl.bindTexture(this._target, this._handle);\n    }\n    public unbind() {\n        gl.bindTexture(this._target, null);\n    }\n    public destroy() {\n        gl.deleteTexture(this._handle);\n        this._handle = null;\n    }\n    /*public setPixelStorage() {\n        //gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this.premultiplyAlpha)\n        //gl.pixelStorei(gl.UNPACK_ALIGNMENT, this.unpackAlignment)\n        //gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, this.flipY)\n    }*/\n\n    /**\n     * Set texture anisotropic level\n     * @param {number = 0} level: Anisotropic level\n     */\n    public setAnisotropic(level: number = 0) {\n        level = Math.floor(level);\n        const ext = extensions.get(\"EXT_texture_filter_anisotropic\");\n        const max_anisotropy = gl.getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT);\n        if (max_anisotropy < level) {\n            gl.texParameterf(this._target, ext.TEXTURE_MAX_ANISOTROPY_EXT, level);\n        }\n    }\n};\n\nexport default Texture2D;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/textures/texture2d.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"../core/core.ts\" />\n/// <reference path=\"../maths/vector2.ts\" />\n\nimport Core from \"../core/core\";\nimport Vector2 from \"../maths/vector2\";\n\n\"use strict\";\n\ndeclare var WebGL2RenderingContext: any;\n\n// TODO: Redimension\nabstract class Texture {\n    protected _handle: WebGLTexture;\n    protected _target: number;\n    protected _size: Vector2<number>;\n    constructor(target: number) { // todo: size!\n        this._target = target;\n    }\n    get target(): number { return this._target; }\n    abstract destroy(): void;\n\n    abstract bind(slot?: number);\n\n    public handle(): WebGLTexture {\n        return this._handle;\n    }\n\n    public setLOD(lod: number) {\n        const gl = Core.getInstance().getGL();\n        if (gl instanceof WebGL2RenderingContext) {\n            gl.texParameterf(this._target, (<any>gl).TEXTURE_MIN_LOD, lod);\n            gl.texParameterf(this._target, (<any>gl).TEXTURE_MAX_LOD, lod);\n        } else {\n            console.log(\"TEXTURE LOD isnt supported\");\n        }\n    }\n\n    // TODO: Move to abstract methods\n    public getHeight(): number { return -1; }\n    public getWidth(): number { return -1; }\n};\n\nexport default Texture;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/textures/texture.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"texture.ts\" />\n/// <reference path=\"texOptions.ts\" />\n\nimport Core from \"../core/core\";\nimport Texture from \"./texture\";\nimport Vector2 from \"../maths/vector2\";\nimport TexOptions from \"./texOptions\";\n\n\"use strict\";\n\nconst gl = Core.getInstance().getGL();\n\nclass SimpleTexture2D extends Texture {\n    protected _flipY: boolean;\n    protected _minFilter: number;\n    protected _magFilter: number;\n    protected _wraps: Array<number>;\n\n    constructor(size: Vector2<number>, options: TexOptions = {}) {\n        super(gl.TEXTURE_2D);\n        options = options || {};\n\n        this._handle = gl.createTexture();\n\n        // TODO: Support compression\n\n        this._flipY = options.flipY === true;\n\n        let _internalformat = options.internalFormat || gl.RGBA;\n        let _format = options.format || gl.RGBA;\n        let _type = options.type || gl.UNSIGNED_BYTE;\n        const _level = options.level || 0;\n\n        this._minFilter = options.minFilter || gl.NEAREST;\n        this._magFilter = options.magFilter || gl.NEAREST;\n        let wraps = [\n            options.wrapS || gl.CLAMP_TO_EDGE,\n            options.wrapT || gl.CLAMP_TO_EDGE,\n        ];\n\n        this.bind();\n\n        gl.texImage2D(\n            this._target,\n            _level, // Level of details\n            _internalformat, // Internal format\n            size.x,\n            size.y,\n            0,\n            _format, // Format\n            _type, // Size of each channel\n            null\n        );\n\n        gl.texParameteri(this._target, gl.TEXTURE_MIN_FILTER, this._minFilter);\n        gl.texParameteri(this._target, gl.TEXTURE_MAG_FILTER, this._magFilter);\n        this.wrap(wraps);\n\n        /*// Prevent NPOT textures\n        // gl.NEAREST is also allowed, instead of gl.LINEAR, as neither mipmap.\n        gl.texParameteri(this._target, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        // Prevents s-coordinate wrapping (repeating).\n        gl.texParameteri(this._target, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        // Prevents t-coordinate wrapping (repeating).\n        gl.texParameteri(this._target, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);*/\n    }\n    public genMipMap() {\n        const gl = Core.getInstance().getGL();\n        this.bind();\n        // TODO: Check NPOT??\n        gl.generateMipmap(this._target);\n    }\n    public wrap(modes: Array<number>) {\n        if (modes.length !== 2) {\n            throw new Error(\"Must specify wrapS, wrapT modes\");\n        }\n        this.bind();\n        gl.texParameteri(this._target, gl.TEXTURE_WRAP_S, modes[0]);\n        gl.texParameteri(this._target, gl.TEXTURE_WRAP_T, modes[1]);\n        this._wraps = modes;\n    }\n    public minFilter(filter: number) {\n        this.bind();\n        gl.texParameteri(this._target, gl.TEXTURE_MIN_FILTER, filter);\n        this._minFilter = filter;\n    }\n    public magFilter(filter: number) {\n        this.bind();\n        gl.texParameteri(this._target, gl.TEXTURE_MAG_FILTER, filter);\n        this._magFilter = filter;\n    }\n    public bind(slot?: number) {\n        if (typeof slot === \"number\") {\n            gl.activeTexture(gl.TEXTURE0 + slot);\n        }\n        gl.bindTexture(this._target, this._handle);\n    }\n    public unbind() {\n        gl.bindTexture(this._target, null);\n    }\n    public destroy() {\n        gl.deleteTexture(this._handle);\n        this._handle = null;\n    }\n    /*public setPixelStorage() {\n        //gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this.premultiplyAlpha)\n        //gl.pixelStorei(gl.UNPACK_ALIGNMENT, this.unpackAlignment)\n        //gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, this.flipY)\n    }*/\n};\n\nexport default SimpleTexture2D;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/textures/simpleTexture2d.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"core.ts\" />\n/// <reference path=\"../constants/ProgramCte.ts\" />\n\nimport Core from \"./core\";\nimport ProgramCte from \"../constants/ProgramCte\";\n\n\"use strict\";\n\n/**\n * Program class\n * @class Program\n */\nclass Program {\n    constructor() {\n        this._shaders = [];\n    }\n    private _compiledShader: WebGLProgram;\n    private _shaders: Array<WebGLShader>;\n\n    public _vertexSource: string;\n    public _fragmentSource: string;\n\n    public uniformLocations: { [key: string]: WebGLUniformLocation; } = {};\n    public attribLocations: { [key: string]: number; } = {};\n\n    /**\n     * @param {string[]}\n     */\n    public addAttributesArgs(...attrs: string[]) {\n        this.addAttributes(attrs);\n    }\n    /**\n     * @param {Array<string>}\n     */\n    public addAttributes(attrs: Array<string>) {\n        const gl = Core.getInstance().getGL();\n        for (let attr in attrs) {\n            attr = attrs[attr];\n            let attrID = gl.getAttribLocation(this._compiledShader, attr);\n            if (attrID < 0) {\n                console.error(attr + \" undefined\");\n                continue;\n            }\n            this.attribLocations[attr] = attrID;\n        }\n    }\n    /**\n     * @param {string[]}\n     */\n    public addUniformsArgs(...unifs: string[]) {\n        this.addUniforms(unifs);\n    }\n    /**\n     * @param {Array<string>}\n     */\n    public addUniforms(unifs: Array<string>) {\n        const gl = Core.getInstance().getGL();\n        for (let unif in unifs) {\n            unif = unifs[unif];\n            let unifID: WebGLUniformLocation = gl.getUniformLocation(this._compiledShader, unif);\n            if (unifID < 0) {\n                console.error(unif + \" undefined\");\n                continue;\n            }\n            this.uniformLocations[unif] = unifID;\n        }\n    }\n    /**\n     * @return {WebGLProgram}\n     */\n    public program(): WebGLProgram {\n        return this._compiledShader;\n    }\n    /**\n     * @param {string}\n     * @param {shader_type}\n     * @param {mode}\n     */\n    public addShader(shader_: string, /*type: number*/ st: ProgramCte.shader_type, _mode: ProgramCte.mode) {\n        const gl = Core.getInstance().getGL();\n\n        let shader: WebGLShader;\n\n        let type: number = -1;\n        if (st === ProgramCte.shader_type.vertex) {\n            type = gl.VERTEX_SHADER;\n        } else if (st === ProgramCte.shader_type.fragment) {\n            type = gl.FRAGMENT_SHADER;\n        }\n        if (type < 0) {\n            throw new Error(\"SHADER TYPE UNDEFINED\");\n        }\n\n        if (_mode === ProgramCte.mode.read_file) {\n            shader = this.loadAndCompileWithFile(shader_, type);\n        } else if (_mode === ProgramCte.mode.read_script) {\n            shader = this.loadAndCompile(shader_, type);\n        } else if (_mode === ProgramCte.mode.read_text) {\n            shader = this.loadAndCompileFromText(shader_, type);\n        }\n        this._shaders.push(shader);\n    }\n\n    public _compile() {\n        const gl = Core.getInstance().getGL();\n        // Create and compile shader\n        this._compiledShader = gl.createProgram();\n        for (let i = 0; i < this._shaders.length; ++i) {\n            gl.attachShader(this._compiledShader, this._shaders[i]);\n        }\n    }\n\n    public _link(): boolean {\n        const gl = Core.getInstance().getGL();\n        gl.linkProgram(this._compiledShader);\n\n        // Checkin errors\n        if (!gl.getProgramParameter(this._compiledShader, gl.LINK_STATUS)) {\n            alert(\"ERROR\");\n            console.warn(\"Error in program linking:\" + gl.getProgramInfoLog(this._compiledShader));\n            console.log({\n                vertex: this._vertexSource,\n                fragment: this._fragmentSource\n            });\n            throw \"SHADER ERROR\";\n        }\n        return true;\n    }\n\n    /**\n     * Compile and link program\n     * @return {boolean}: True if not errors\n     */\n    public compile(): boolean {\n        const gl = Core.getInstance().getGL();\n        // Create and compile shader\n        this._compiledShader = gl.createProgram();\n        for (let i = 0; i < this._shaders.length; ++i) {\n            gl.attachShader(this._compiledShader, this._shaders[i]);\n        }\n        gl.linkProgram(this._compiledShader);\n\n        // Checkin errors\n        if (!gl.getProgramParameter(this._compiledShader, gl.LINK_STATUS)) {\n            alert(\"ERROR\");\n            console.warn(\"Error in program linking:\" + gl.getProgramInfoLog(this._compiledShader));\n            console.log({\n                vertex: this._vertexSource,\n                fragment: this._fragmentSource\n            });\n            throw \"SHADER ERROR\";\n        }\n        return true;\n    }\n    /**\n     * @param {string}\n     * @param {number}\n     */\n    private loadAndCompileWithFile(filePath: string, shaderType: number) {\n        let request: XMLHttpRequest = new XMLHttpRequest();\n        request.open(\"GET\", filePath, false);\n        try {\n            request.send();\n        } catch (err) {\n            alert(\"ERROR: \" + filePath);\n            console.log(\"ERROR: \" + filePath);\n            return null;\n        }\n        let shaderSource: string = request.responseText;\n        if (shaderSource === null) {\n            alert(\"WARNING: \" + filePath + \" failed\");\n            console.log(this._fragmentSource);\n            throw \"SHADER ERROR\";\n        }\n\n        return this.compileShader(shaderSource, shaderType);\n    }\n    /**\n     * @param {string}\n     * @param {number}\n     */\n    private loadAndCompileFromText(shaderSource: string, shaderType: number) {\n        if (shaderSource === null) {\n            alert(\"WARNING: \" + shaderSource + \" failed\");\n            console.log(this._fragmentSource);\n            throw \"SHADER ERROR\";\n        }\n\n        return this.compileShader(shaderSource, shaderType);\n    }\n    /**\n     * @param {string}\n     * @param {number}\n     */\n    private loadAndCompile(id: string, shaderType: number) {\n        let shaderText: HTMLElement, shaderSource: string;\n\n        // Get shader from index.html\n        shaderText = document.getElementById(id);\n        shaderSource = shaderText.firstChild.textContent;\n\n        if (shaderSource === null) {\n            alert(\"WARNING: \" + id + \" failed\");\n            console.log(this._fragmentSource);\n            throw \"SHADER ERROR\";\n        }\n\n        return this.compileShader(shaderSource, shaderType);\n    }\n    /**\n     * @param {string}\n     * @param {number}\n     */\n    private compileShader(shaderSource: string, shaderType: number) {\n        const gl = Core.getInstance().getGL();\n        let compiledShader: WebGLShader;\n\n        if (shaderType === gl.VERTEX_SHADER) {\n            this._vertexSource = shaderSource;\n        } else if (shaderType === gl.FRAGMENT_SHADER) {\n            this._fragmentSource = shaderSource;\n        }\n\n        // Create shader\n        compiledShader = gl.createShader(shaderType);\n\n        // Compilate shader\n        gl.shaderSource(compiledShader, shaderSource);\n        gl.compileShader(compiledShader);\n\n        // Check errors\n        if (!gl.getShaderParameter(compiledShader, gl.COMPILE_STATUS)) {\n            alert(\"ERROR: \" + gl.getShaderInfoLog(compiledShader));\n            console.log(\"ERROR: \" + gl.getShaderInfoLog(compiledShader));\n            console.log({\n                vertex: this._vertexSource,\n                fragment: this._fragmentSource\n            });\n            throw \"SHADER ERROR\";\n        }\n        return compiledShader;\n    }\n    /**\n     *\n     */\n    public use() {\n        const gl = Core.getInstance().getGL();\n        gl.useProgram(this._compiledShader);\n    }\n    /**\n     *\n     */\n    public destroy() {\n        const gl = Core.getInstance().getGL();\n        this._shaders.forEach((shader) => {\n            gl.detachShader(this.compileShader, shader);\n        });\n        gl.deleteShader(this._compiledShader);\n    }\n\n    /*\n    protected getPropSetter(path, location, type) {\n        // Check primitive types\n        switch (type) {\n            case \"bool\":\n            case \"int\":\n                return \"gl.uniform1i(location, value)\";\n            case \"float\":\n                return \"gl.uniform1f(location, value)\";\n            case \"uint\":\n                return \"gl.uniform1ui(location, value)\";\n        }\n\n        // Check sampler type\n        if (/^(u|i)?sampler(2D|3D|Cube|2DArray)$/.test(type)) {\n            return 'gl.uniform1i(location, value)'\n        }\n\n        // Check complex matrix type\n        if (/^mat[0-9]x[0-9]$/.test(type)) {\n            let dims = type.substring(type.length - 3)\n            return 'gl.uniformMatrix' + dims + 'fv(location, Boolean(transposed), value)'\n        }\n\n        // Checksimple type\n        let vecIdx = type.indexOf('vec');\n        let count = parseInt(type.charAt(type.length - 1), 10) || -1;\n\n        if ((vecIdx === 0 || vecIdx === 1) && (count >= 1 && count <= 4)) {\n            let vtype = type.charAt('0')\n            switch (vtype) {\n                case 'b':\n                case 'i':\n                    return 'gl.uniform' + count + 'iv(location, value)';\n                case 'u':\n                    return 'gl.uniform' + count + 'uiv(locaiton, value)';\n                case 'v': // regular vecN\n                    return 'gl.uniform' + count + 'fv(location, value)';\n                default:\n                    throw new Error('unrecognized uniform type ' + type + ' for ' + path);\n            }\n        }\n\n        let matIdx = type.indexOf('mat');\n        count = parseInt(type.charAt(type.length - 1), 10) || -1;\n        console.log(count);\n\n        if ((matIdx === 0 || matIdx === 1) && (count >= 2 && count <= 4)) {\n            return 'gl.uniformMatrix' + count + 'fv(location, Boolean(transposed), value)';\n        }\n        throw new Error('unrecognized uniform type ' + type + ' for ' + path);\n    }\n\n    public sendUniform(uniform, type) {\n        let path = uniform;\n        let location = this.uniformLocations[path];\n        let setter = this.getPropSetter(path, location, type);\n\n        let srcfn = `\n        return function uniformGetSet (value, transposed) {\n            transposed = typeof transposed !== 'undefined' ? transposed: false;\n            location = prog.uniformLocations[name];\n                if (!location) {\n                    prog.addUniforms([name]);\n                    location = prog.uniformLocations[name];\n                }\n                if (location) {\n                    ${setter}\n                    //console.log(\"SENDED\");\n                } else {\n                    //console.error(\"ERROR\");\n                }\n        }`;\n\n        let generated = new Function('prog', 'gl', 'name', 'location', srcfn);\n        const gl = Core.getInstance().getGL();\n        return generated(this, gl, uniform, location);\n    }*/\n    /**\n     * @param {string}\n     * @param {number}\n     */\n    public sendUniform1f(name: string, value: number) {\n        const gl = Core.getInstance().getGL();\n        gl.uniform1f(this.uniformLocations[name], value);\n    }\n    /**\n     * @param {string}\n     * @param {number}\n     */\n    public sendUniform1i(name: string, value: number) {\n        const gl = Core.getInstance().getGL();\n        gl.uniform1i(this.uniformLocations[name], value);\n    }\n    /**\n     * @param {string}\n     * @param {boolean}\n     */\n    public sendUniform1b(name: string, value: boolean) {\n        const gl = Core.getInstance().getGL();\n        gl.uniform1i(this.uniformLocations[name], value === true ? 1 : 0);\n    }\n    /**\n     * @param {string}\n     * @param {Float32Array}\n     */\n    public sendUniformVec3(name: string, value: Float32Array) {\n        const gl = Core.getInstance().getGL();\n        gl.uniform3fv(this.uniformLocations[name], value);\n    }\n    /**\n     * @param {string}\n     * @param {Float32Array}\n     * @param {boolean   = false}\n     */\n    public sendUniformMat4(name: string, value: Float32Array, transpose: boolean = false) {\n        const gl = Core.getInstance().getGL();\n        gl.uniformMatrix4fv(this.uniformLocations[name], transpose, value);\n    }\n};\n\nexport default Program;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/core/program.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\n\"use strict\";\n\nnamespace ProgramCte {\n    export enum mode {\n        read_file,\n        read_script,\n        read_text\n    };\n    export enum shader_type {\n        vertex,\n        fragment\n    }\n};\n\nexport default ProgramCte;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/constants/ProgramCte.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"core.ts\" />\n/// <reference path=\"../textures/texture.ts\" />\n/// <reference path=\"../textures/simpleTexture2D.ts\" />\n/// <reference path=\"../textures/renderBufferTexture.ts\" />\n/// <reference path=\"..//maths/vector2.ts\" />\n///\nimport Core from \"./core\";\nimport Texture from \"../textures/texture\";\nimport SimpleTexture2D from \"../textures/simpleTexture2D\";\nimport RenderBufferTexture from \"../textures/renderBufferTexture\";\nimport Vector2 from \"../maths/vector2\";\n\n\"use strict\";\n\nconst gl = Core.getInstance().getGL();\n\n// TODO: Redimension\n// TODO: Blit FBO (https://www.opengl.org/wiki/Framebuffer#Blitting)\nclass Framebuffer {\n    protected _size: Vector2<number>;\n    protected _handle: WebGLFramebuffer;\n    protected _attachments: Array<number>;\n    public _renderBuffer: RenderBufferTexture;\n    public _depth: SimpleTexture2D;\n\n    public _colors: Array<Texture>;\n\n    // TODO: Stencil unused\n    constructor(textures: Array<Texture>, size: Vector2<number>, depth: boolean = false,\n        stencil: boolean = false, options = {}) {\n        let numColors = textures.length;\n        if (numColors < 0) {\n            throw new Error(\"must specify >= 0 color attachments\");\n        } else if (numColors > 1) {\n            if (numColors > gl.getParameter((<any>gl).MAX_COLOR_ATTACHMENTS)) {\n                throw new Error(`GL context doesnt support ${numColors} color attachments`);\n            }\n        }\n\n        options = options || {};\n\n        this._colors = textures;\n        this._size = size;\n\n        this._handle = gl.createFramebuffer();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this._handle);\n\n        // Each textures to fbo\n        textures.forEach((texture: Texture, i: number) => {\n            texture.bind();\n\n            // Only supported simple textures\n            // TODO: Cubemap or texture3D\n            let target = texture.target;\n\n            gl.framebufferTexture2D(gl.FRAMEBUFFER,\n                gl.COLOR_ATTACHMENT0 + i,\n                target,\n                texture.handle(), 0);\n\n            (<any>texture).unbind();    // TODO: Unbind debera ser un abstract de texture\n        });\n\n        // TODO: Check no texture attachments (default render buffer storage)\n\n        if (depth) {\n            this._renderBuffer = new RenderBufferTexture(\n                size,\n                gl.DEPTH_COMPONENT16,\n                gl.DEPTH_ATTACHMENT\n            );\n        }\n\n        /**\n        // TODO\n        if (depth && stencil) {\n            this._depth = new SimpleTexture2D(size, {\n                type: (<any>gl).UNSIGNED_INT_24_8,\n                format: gl.DEPTH_STENCIL\n            });\n            let target = this._depth.target;\n\n            gl.framebufferTexture2D(gl.FRAMEBUFFER,\n                gl.DEPTH_STENCIL_ATTACHMENT,\n                target,\n                this._depth.handle(), 0);\n        } else if (depth && !stencil) {\n            this._depth = new SimpleTexture2D(size, {\n                type: (<any>gl).UNSIGNED_SHORT,\n                format: gl.DEPTH_COMPONENT\n            });\n            let target = this._depth.target;\n\n            gl.framebufferTexture2D(gl.FRAMEBUFFER,\n                gl.DEPTH_ATTACHMENT,\n                target,\n                this._depth.handle(), 0);\n        } else {\n            this._renderBuffer = new RenderBufferTexture(\n                size,\n                gl.STENCIL_INDEX,\n                gl.STENCIL_ATTACHMENT\n            );\n        }\n        /**/\n\n        if (numColors > 1) {\n            let drawBuffs = [];\n            for (let i = 0; i < numColors; ++i) {\n                drawBuffs.push(gl.COLOR_ATTACHMENT0 + i);\n            }\n            (<any>gl).drawBuffers(drawBuffs);\n        }\n\n        // Check status\n        let status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n        if (status !== gl.FRAMEBUFFER_COMPLETE) {\n            this.destroy();\n            this.checkStatus(status);\n        }\n        this.unbind();\n    }\n\n    private checkStatus(status: number) {\n        switch (status) {\n            case gl.FRAMEBUFFER_UNSUPPORTED:\n                throw new Error(\"framebuffer: Framebuffer unsupported\");\n            case gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:\n                throw new Error(\"framebuffer: Framebuffer incomplete attachment\");\n            case gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:\n                throw new Error(\"framebuffer: Framebuffer incomplete dimensions\");\n            case gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:\n                throw new Error(\"framebuffer: Framebuffer incomplete missing attachment\");\n            default:\n                throw new Error(\"framebuffer: Framebuffer failed for unspecified reason\");\n        }\n    }\n\n    public bind() {\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this._handle);\n    }\n\n    public onlyBindTextures() {\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        this._colors.forEach((tex: Texture, idx: number) => {\n            tex.bind(idx);\n        });\n    }\n\n    public unbind() {\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    }\n\n    public rebuild(size: Vector2<number>) {\n        if (!size.isEqual(this._size)) {\n            // TODO\n        }\n    }\n\n    public destroy() {\n        let oldBinding = gl.getParameter(gl.FRAMEBUFFER_BINDING);\n\n        if (oldBinding === this._handle) {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        }\n\n        this._colors.forEach((texture: Texture) => {\n            texture.destroy();\n        });\n\n        gl.deleteFramebuffer(this._handle);\n\n        // Destroy depth/stencil\n        if (this._renderBuffer) {\n            this._renderBuffer.destroy();\n            this._renderBuffer = null;\n        }\n\n        // Destroy depth\n        if (this._depth) {\n            this._depth.destroy();\n            this._depth = null;\n        }\n    }\n};\n\nexport default Framebuffer;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/core/framebuffer.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"../maths/vector2.ts\" />\n/// <reference path=\"../core/Core.ts\" />\n\nimport Core from \"../core/core\";\nimport Vector2 from \"../maths/vector2\";\n\n\"use strict\";\n\nconst gl = Core.getInstance().getGL();\n\nclass RenderBufferTexture {\n    protected _handle: WebGLRenderbuffer;\n    constructor(size: Vector2<number>, format: number, attachment: number) {\n        this._handle = gl.createRenderbuffer();\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this._handle);\n        gl.renderbufferStorage(gl.RENDERBUFFER, format, size.x, size.y);\n        gl.framebufferRenderbuffer(gl.FRAMEBUFFER, attachment, gl.RENDERBUFFER, this._handle);\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n    }\n    public destroy() {\n        gl.deleteTexture(this._handle);\n    }\n};\n\nexport default RenderBufferTexture;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/textures/renderBufferTexture.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"../core/program.ts\" />\n\nimport Program from \"../core/program\";\n\n\"use strict\";\n\ninterface ProgramCallback {\n    (): Program;\n};\ninterface ProgramUseCallback {\n    (prog: Program): void;\n};\nnamespace ProgramManager {\n    /**\n     * [Program cache]\n     */\n    let _progDictionary: { [ key: string ]: Program; } = {};\n    /**\n     * Get program from name\n     * @param  {string} name: Program name\n     * @return {Program}\n     */\n    export function get(name: string): Program {\n        let prog = _progDictionary[name];\n        if (!prog) {\n            throw new Error(`Program ${name} undefined`);\n        }\n        return prog;\n    }\n    /**\n     * Execute a callback function using the specified program (name).\n     * @param  {string} name: Program name\n     * @param {ProgramUseCallback}: Function to execute\n     */\n    export function getCB(name: string, cb: ProgramUseCallback) {\n        let prog = get(name);\n        if (!prog) {\n            throw new Error(`Program ${name} undefined`);\n        }\n        cb(prog);\n    }\n    /**\n     * Add a new program with his name and a function that creates the program.\n     * @param {string} name: Program name\n     * @param {ProgramCallback}: Function that creates the program (return program)\n     */\n    export function addWithFun(name: string, fn: ProgramCallback) {\n        add(name, fn());\n    }\n    /**\n     * Add a existing program with his name and the program.\n     * @param {string} name: Program name.\n     * @param {Program} prog: Existing program.\n     */\n    export function add(name: string, prog: Program) {\n        if (!prog) {\n            throw new Error(`Program ${name} undefined`);\n        }\n        _progDictionary[name] = prog;\n    }\n    /**\n     * Destroy all programs and clear cache.\n     */\n    export function destroy() {\n        for (let key in _progDictionary) {\n            _progDictionary[key].destroy();\n        }\n        _progDictionary = {};\n    }\n};\n\nexport default ProgramManager;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/resources/programManager.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"resourceMap.ts\" />\n\nimport ResourceMap from \"./resourceMap\";\n\n\"use strict\";\n\nnamespace loaders {\n    function _getAlias(imageSrc: string, alias: string): string {\n        return (alias.length < 1) ? imageSrc : alias;\n    }\n\n    export function loadVideo(videoSrc: string, alias: string = \"\") {\n        /*alias = _getAlias(videoSrc, alias);\n        if (!ResourceMap.isAssetLoaded(alias)) {\n            // Update resources in load counter\n            ResourceMap.asyncLoadRequested(alias);\n\n            // Async request the data from server\n            let request = new XMLHttpRequest();\n            request.open(\"GET\", videoSrc, true);\n\n            request.responseType = \"arraybuffer\";\n\n            request.onload = function () {\n                // Asynchronously decode, then call the function in parameter.\n                var video: HTMLVideoElement = <HTMLVideoElement> document.createElement(alias);\n                video.src = videoSrc;\n                ResourceMap.asyncLoadCompleted(alias, video);\n            }.bind(this);\n\n            request.send();\n        }*/\n        /*// Create HTML Video Element to play the video\n        var video = document.createElement('video');\n        video.addEventListener('canplay', function (e) {\n            videoTexture.setSource(video);\n        });\n        video.src = this.videoUrl;\n        video.crossOrigin = 'anonymous';\n        video.loop = true;\n        video.play();*/\n    }\n\n    /**\n     * @param {string}\n     * @param {string = \"\"}\n     */\n    export function loadImage(imageSrc: string, alias: string = \"\") {\n        alias = _getAlias(imageSrc, alias);\n        if (!ResourceMap.isAssetLoaded(alias)) {\n            let img = new Image();\n            ResourceMap.asyncLoadRequested(alias);\n            img.onload = function() {\n                // setTimeout(function() {\n                    ResourceMap.asyncLoadCompleted(alias, img);\n                // }, 2500);\n            };\n            img.onerror = function(err) {\n                ResourceMap.asyncLoadFailed(alias);\n            };\n            img.src = imageSrc;\n        } else {\n            ResourceMap.incAssetRefCount(alias);\n        }\n    }\n    /**\n     * @param {string}\n     */\n    export function unloadImage(imageSrc: string) {\n        ResourceMap.unloadAsset(imageSrc);\n    }\n    /**\n     * @param {string}\n     */\n    export function loadAudio(clipName: string, alias: string = \"\") {\n        alias = _getAlias(clipName, alias);\n        if (!(ResourceMap.isAssetLoaded(alias))) {\n            // Update resources in load counter\n            ResourceMap.asyncLoadRequested(alias);\n\n            // Async request the data from server\n            let request = new XMLHttpRequest();\n            request.open(\"GET\", clipName, true);\n\n            // Specify that the request retrieves binary data.\n            request.responseType = \"arraybuffer\";\n\n            request.onload = function () {\n                // Asynchronously decode, then call the function in parameter.\n                this._audioContext.decodeAudioData(request.response,\n                    function (buffer) {\n                        ResourceMap.asyncLoadCompleted(alias, buffer);\n                    }\n                );\n            }.bind(this);\n            request.send();\n        }\n    }\n    /**\n     * @param {string}\n     */\n    export function unloadAudio(clipName: string) {\n        ResourceMap.unloadAsset(clipName);\n    }\n    /**\n     * @param {string}\n     * @param {number}\n     * @param {number}\n     * @param {string = \"\"}\n     */\n    export function loadHDRImage(imageSrc: string, width: number, height: number, alias: string = \"\") {\n        alias = _getAlias(imageSrc, alias);\n        if (!ResourceMap.isAssetLoaded(alias)) {\n            ResourceMap.asyncLoadRequested(alias);\n            // Async request the data from server\n            let request = new XMLHttpRequest();\n            request.open(\"GET\", imageSrc, true);\n\n            // Specify that the request retrieves binary data.\n            request.responseType = \"arraybuffer\";\n\n            request.onload = function () {\n                // Asynchronously decode, then call the function in parameter.\n\n                const arrayBuffer = request.response;\n                if ( arrayBuffer ) {\n                    let bytes = new Uint8Array( arrayBuffer );\n                    let data = new Float32Array( width * height * 3 );\n\n                    let byteIdx = 0;\n\n                    // skip the main header (we already assume the format, width and height)\n                    for ( ; byteIdx < bytes.length; byteIdx++ ) {\n                        if ( bytes[byteIdx] === 0x0A && bytes[byteIdx + 1] === 0x0A ) {\n                            byteIdx = byteIdx + 2;\n                            break;\n                        }\n                    }\n                    // skip the resolution bit\n                    for ( ; byteIdx < bytes.length; byteIdx++ ) {\n                        if ( bytes[byteIdx] === 0x0A ) {\n                            byteIdx = byteIdx + 1;\n                            break;\n                        }\n                    }\n\n                    let idx = 0;\n                    for ( let row = 0; row < height; row++ ) {\n                        for ( let col = 0; col < width; col++ ) {\n                            const r = bytes[byteIdx++];\n                            const g = bytes[byteIdx++];\n                            const b = bytes[byteIdx++];\n                            const e = bytes[byteIdx++];\n                            const expFactor = Math.pow( 2, e - 128 );\n                            data[idx++] = ( r / 256 ) * expFactor;\n                            data[idx++] = ( g / 256 ) * expFactor;\n                            data[idx++] = ( b / 256 ) * expFactor;\n                        }\n                    }\n                    ResourceMap.asyncLoadCompleted(alias, data);\n                }\n\n            }.bind(this);\n            request.send();\n        } else {\n            ResourceMap.incAssetRefCount(alias);\n        }\n    }\n    /**\n     * @param {string}\n     */\n    export function unloadHDRImage(imageSrc: string) {\n        ResourceMap.unloadAsset(imageSrc);\n    }\n};\n\nexport default loaders;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/resources/loaders.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"light.ts\" />\n\nimport Light from \"./light\";\nimport Vector3 from \"../maths/vector3\";\n\n\"use strict\";\n\n// TODO: Replace Vector3 to Vect3\n\n\n/**\n * Point light class\n * @class PointLight\n */\nclass PointLight extends Light {\n    /**\n     * [Light position]\n     * @type {Vector3<number>}\n     */\n    protected _position: Vector3<number>;\n    /**\n     * @param {Vector3<number> = new Vector3<number>(0.0, 0.0, 0.0)} position\n     */\n    constructor(position: Vector3<number> = new Vector3<number>(0.0, 0.0, 0.0)) {\n        super();\n        this._position = position;\n    }\n    /**\n     * Get light position\n     * @return {Vector3<number>}\n     */\n    get position(): Vector3<number> { return this._position; }\n    /**\n     * Set light position\n     * @param {Vector3<number>} position\n     */\n    set position(position: Vector3<number>) { this._position = position; }\n\n    /**\n     * Increment position from current position\n     * @param {number = 0.0} x\n     * @param {number = 0.0} y\n     * @param {number = 0.0} z\n     */\n    public addTransform(x: number = 0.0, y: number = 0.0, z: number = 0.0) {\n        this._position.x += x;\n        this._position.y += y;\n        this._position.z += z;\n    }\n};\n\nexport default PointLight;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/lights/pointLight.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"../extras/color.ts\" />\n/// <reference path=\"../maths/vector3.ts\" />\n\nimport Color from \"../extras/color\";\nimport Vector3 from \"../maths/vector3\";\n\n\"use strict\";\n\n// TODO: Replace Vector3 to Vect3\n\n\n/**\n * Light abstract class\n * @class Light\n */\nabstract class Light {\n    /**\n     * [Intensity value]\n     * @type {number}\n     */\n    protected _intensity: number;\n    /**\n     * [Light color]\n     * @type {Color}\n     */\n    protected _color: Color;\n    protected _enable: boolean;\n    /**\n     * [Attenuation light value]\n     * @type {Vector3<number>}\n     */\n    protected _attenuation: Vector3<number>;\n    constructor() {\n        this._intensity = 1.0;\n        this._color = new Color(1.0, 1.0, 1.0);\n        this._enable = true;\n        this._attenuation = new Vector3<number>(\n            1.0,        // Constant\n            0.014,      // Linear\n            0.0007      // Quadratic\n        );\n    }\n\n    /**\n     * Set constant attenuation value.\n     * @param {number} v: Constant attenuation value.\n     */\n    public setConstantAtt(value: number) {\n        this._attenuation.x = value;\n    }\n    /**\n     * Set linear attenuation value.\n     * @param {number} v: Linear attenuation value.\n     */\n    public setLinearAtt(value: number) {\n        this._attenuation.y = value;\n    }\n    /**\n     * Set quadratic attenuation value.\n     * @param {number} v: Quadratic attenuation value.\n     */\n    public setQuadraticAtt(value: number) {\n        this._attenuation.z = value;\n    }\n    /**\n     * Get light attenuation value.\n     * @return {Vector3<number>}\n     */\n    get attenuation(): Vector3<number> { return this._attenuation; }\n\n    /**\n     * Get light intensity.\n     * @return {number}\n     */\n    get intensity(): number { return this._intensity; }\n    /**\n     * Set light intensity.\n     * @param {number} intensity: Light intensity.\n     */\n    set intensity(intensity: number) { this._intensity = intensity; }\n\n    /**\n     * Get light color.\n     * @return {Color}\n     */\n    get color(): Color { return this._color; }\n    /**\n     * Set light color\n     * @param {Color} color: Color value\n     */\n    set color(color: Color) { this._color = color; }\n};\n\nexport default Light;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/lights/light.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n// TODO: Change _color to Vector3\n\n\"use strict\";\n\nclass Color {\n    /**\n     * [Array description]\n     * @param {[type]} 3 [description]\n     */\n    protected _color = new Array(3);\n    /**\n     * [constructor description]\n     * @param {number} r [description]\n     * @param {number} g [description]\n     * @param {number} b [description]\n     */\n    constructor(r: number, g: number, b: number) {\n        this.setRGB(r, g, b);\n    }\n    /**\n     * @return {number}\n     */\n    get r(): number { return this._color[0]; }\n    /**\n     * @return {number}\n     */\n    get g(): number { return this._color[1]; }\n    /**\n     * @return {number}\n     */\n    get b(): number { return this._color[2]; }\n    /**\n     * @param {number}\n     */\n    set r(r: number) { this._color[0] = r; }\n    /**\n     * @param {number}\n     */\n    set g(g: number) { this._color[1] = g; }\n    /**\n     * @param {number}\n     */\n    set b(b: number) { this._color[2] = b; }\n    /**\n     * [setRGB description]\n     * @param  {number} r [description]\n     * @param  {number} g [description]\n     * @param  {number} b [description]\n     * @return {Color}    [description]\n     */\n    public setRGB(r: number, g: number, b: number): Color {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n\n        return this;\n    }\n    /**\n     * [toHSL description]\n     * @return {Color} [description]\n     */\n    public toHSL(): Color {\n        const max = Math.max(this.r, this.g, this.b),\n            min = Math.min(this.r, this.g, this.b);\n\n        let h, s, l = (max + min) / 2;\n\n        if (max === min) {\n            h = s = 0;  // achromatic\n        } else {\n            let d = max - min;\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n            switch (max) {\n                case this.r: h = (this.g - this.b) / d +\n                    (this.g < this.b ? 6 : 0); break;\n                case this.g: h = (this.b - this.r) / d + 2; break;\n                case this.b: h = (this.r - this.g) / d + 4; break;\n            }\n            h /= 6;\n        }\n        return new Color(h, s, l);\n    }\n};\n\nexport default Color;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/extras/color.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\n\"use strict\";\n\n/**\n * Vector3<T> class\n * @class Vector3<T>\n */\nclass Vector3<T> {\n    public x: T;\n    public y: T;\n    public z: T;\n    /**\n     * Vector3<T> constructor\n     * @param {T} x: First value\n     * @param {T} y: Second value\n     * @param {T} z: Third value\n     */\n    constructor(x: T, y: T, z: T) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n    /**\n     * Check if two vector3<T> are equals\n     * @param  {Vector3<T>} other: Second vector\n     * @return {boolean}: True if both equals\n     */\n    public isEqual(other: Vector3<T>): boolean {\n        return this.x === other.x && this.y === other.y && this.z === other.z;\n    }\n};\n\nexport default Vector3;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/maths/vector3.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\n\"use strict\";\n\n/**\n * Vector2<T> class\n * @class Vector2<T>\n */\nclass Vector2<T> {\n    public x: T;\n    public y: T;\n    /**\n     * Vector2<T> constructor\n     * @param {T} x: First value\n     * @param {T} y: Second value\n     */\n    constructor(x: T, y: T) {\n        this.x = x;\n        this.y = y;\n    }\n    /**\n     * Check if two vector2<T> are equals\n     * @param  {Vector2<T>} other: Second vector\n     * @return {boolean}: True if both equals\n     */\n    public isEqual(other: Vector2<T>): boolean {\n        return this.x === other.x && this.y === other.y;\n    }\n};\n\nexport default Vector2;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/maths/vector2.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"core/input.ts\" />\n\nimport Input from \"./core/input\";\n\n\"use strict\";\n\nclass Camera2 {\n    // Camera attrs\n    public position: Float32Array;\n    protected front: Float32Array;\n    protected up: Float32Array;\n    protected right: Float32Array;\n    protected worldUp: Float32Array;\n\n    // Euler angles\n    protected yaw: number;\n    protected pitch: number;\n\n    // Camera options\n    protected movSpeed: number = 0.05;\n    protected mouseSensivity: number = 0.25;\n    protected _updateCamera: boolean = false;\n    public timeElapsed: number;\n\n    private view: Float32Array = mat4.create();\n    private proj: Float32Array = mat4.create();\n\n    public GetPos(): Float32Array {\n        return this.position;\n    }\n\n    constructor(position: Float32Array = vec3.fromValues(0, 0, 0),\n        up: Float32Array = vec3.fromValues(0, 1, 0), yaw: number = -90.0, pitch: number = 0.0) {\n        this.front = vec3.fromValues(0, 0, -1);\n        this.position = position;\n        this.worldUp = up;\n        this.yaw = yaw;\n        this.pitch = pitch;\n\n        this.right = vec3.create();\n        this.up = vec3.create();\n\n        this.updateCameraVectors();\n    }\n    public update(callback: Function) {\n        this._updateCamera = false;\n\n        let speed = 1.0;\n\n        if (Input.getInstance().isKeyPressed(Input.getInstance().keys.Left_Shift)) {\n            speed = 2.5;\n        }\n\n        if (Input.getInstance().isKeyPressed(Input.getInstance().keys.W)) {\n            this.processKeyboard(4, speed);\n            this._updateCamera = true;\n        }\n        if (Input.getInstance().isKeyPressed(Input.getInstance().keys.S)) {\n            this.processKeyboard(5, speed);\n            this._updateCamera = true;\n        }\n        if (Input.getInstance().isKeyPressed(Input.getInstance().keys.A)) {\n            this.processKeyboard(2, speed);\n            this._updateCamera = true;\n        }\n        if (Input.getInstance().isKeyPressed(Input.getInstance().keys.D)) {\n            this.processKeyboard(3, speed);\n            this._updateCamera = true;\n        }\n        if (Input.getInstance().isKeyPressed(Input.getInstance().keys.E)) {\n            this.processKeyboard(0, speed);\n            this._updateCamera = true;\n        }\n        if (Input.getInstance().isKeyPressed(Input.getInstance().keys.Q)) {\n            this.processKeyboard(1, speed);\n            this._updateCamera = true;\n        }\n        if (Input.getInstance().isKeyPressed(38)) {\n            this.processMouseMovement(0.0, 2.5);\n            this._updateCamera = true;\n        }\n        if (Input.getInstance().isKeyPressed(40)) {\n            this.processMouseMovement(0.0, -2.5);\n            this._updateCamera = true;\n        }\n        if (Input.getInstance().isKeyPressed(37)) {\n            // this.processMouseMovement(2.5, 0.0);\n            this.processMouseMovement(-2.5, 0.0);\n            this._updateCamera = true;\n        }\n        if (Input.getInstance().isKeyPressed(39)) {\n            // this.processMouseMovement(-2.5, 0.0);\n            this.processMouseMovement(2.5, 0.0);\n            this._updateCamera = true;\n        }\n        if (this._updateCamera && callback) {\n            callback();\n        }\n    }\n\n    public processKeyboard(direction: number, speed: number = 1.0) {\n        if (this.timeElapsed > 25) {\n            return;\n        }\n        const velocity = this.movSpeed * this.timeElapsed * speed;\n        // console.log(direction);\n        if (direction === 0) {\n            this.position = vec3.scaleAndAdd(this.position, this.position, this.front, velocity);\n        } else if (direction === 1) {\n            this.position = vec3.scaleAndAdd(this.position, this.position, this.front, -velocity);\n        } else if (direction === 2) {\n            this.position = vec3.scaleAndAdd(this.position, this.position, this.right, -velocity);\n        } else if (direction === 3) {\n            this.position = vec3.scaleAndAdd(this.position, this.position, this.right, velocity);\n        } else if (direction === 4) {\n            this.position = vec3.scaleAndAdd(this.position, this.position, this.up, velocity);\n        } else if (direction === 5) {\n            this.position = vec3.scaleAndAdd(this.position, this.position, this.up, -velocity);\n        }\n    }\n\n    public processMouseMovement(xOffset: number, yOffset: number) {\n        xOffset *= this.movSpeed * 2.0 * this.timeElapsed;\n        yOffset *= this.movSpeed * 2.0 * this.timeElapsed;\n\n        this.yaw += xOffset;\n        this.pitch += yOffset;\n\n        if (this.pitch > 89.0) {\n            this.pitch = 89.0;\n        }\n        if (this.pitch < -89.0) {\n            this.pitch = -89.0;\n        }\n        this.updateCameraVectors();\n    }\n\n    public updateCameraVectors() {\n        const front: Float32Array = vec3.fromValues(\n            Math.cos(glMatrix.toRadian(this.yaw)) * Math.cos(glMatrix.toRadian(this.pitch)),\n            Math.sin(glMatrix.toRadian(this.pitch)),\n            Math.sin(glMatrix.toRadian(this.yaw)) * Math.cos(glMatrix.toRadian(this.pitch))\n        );\n        this.front = vec3.normalize(this.front, front);\n\n        // Recalculate right and up vector\n        this.right = vec3.cross(this.right, this.front, this.worldUp);\n        this.right = vec3.normalize(this.right, this.right);\n        this.up = vec3.cross(this.up, this.right, this.front);\n        this.up = vec3.normalize(this.up, this.up);\n    }\n\n    public GetViewMatrix(): Float32Array {\n        let aux = vec3.create();\n        this.view = mat4.lookAt(this.view, this.position, vec3.add(aux, this.position, this.front), this.up);\n        return this.view;\n    }\n    public GetOrthoProjectionMatrix(w: number, h: number): Float32Array {\n        const ymax = 0.001 * Math.tan(45.0 * Math.PI / 360);\n        const ymin = -ymax;\n        const xmin = ymin * (w * 1.0) / (h * 1.0);\n        const xmax = ymax * (w * 1.0) / (h * 1.0);\n        this.proj = mat4.ortho(this.proj, xmin, xmax, ymin, ymax, 0.001, 1000.0);\n        return this.proj;\n    }\n    public GetProjectionMatrix(w: number, h: number): Float32Array {\n        this.proj = mat4.perspective(this.proj, 45.0, (w * 1.0) / (h * 1.0), 0.001, 1000.0);\n\n        // this.proj = mat4.ortho(this.proj, -10.0, 10.0, -10.0, 10.0, 0.001, 1000.0);\n\n        return this.proj;\n    }\n};\n\nexport default Camera2;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/_demoCamera.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"../core/core.ts\" />\n/// <reference path=\"../core/program.ts\" />\n/// <reference path=\"../resources/resourceMap.ts\" />\n/// <reference path=\"../textures/cubemapTexture.ts\" />\n/// <reference path=\"../core/depth.ts\" />\n/// <reference path=\"../constants/ProgramCte.ts\" />\n/// <reference path=\"../constants/ComparisonFunc.ts\" />\n/// <reference path=\"../core/vertexBuffer.ts\" />\n/// <reference path=\"../core/vertexArray.ts\" />\n\nimport Core from \"../core/core.ts\";\nimport Program from \"../core/program.ts\";\nimport ResourceMap from \"../resources/resourceMap.ts\";\nimport CubeMapTexture from \"../textures/cubemapTexture.ts\";\nimport Depth from \"../core/depth.ts\";\n\nimport ProgramCte from \"../constants/ProgramCte\";\nimport ComparisonFunc from \"../constants/ComparisonFunc\";\n\nimport VertexBuffer from \"../core/vertexBuffer.ts\";\nimport VertexArray from \"../core/vertexArray\";\n\nimport UsageType from \"../constants/UsageType.ts\";\nimport BufferType from \"../constants/BufferType.ts\";\n\n\"use strict\";\n\nclass Skybox {\n    /**\n     * [skyboxVAO description]\n     * @type {VertexArray}\n     */\n    protected skyboxVAO: VertexArray;\n    /**\n     * [skyboxVBO description]\n     * @type {VertexBuffer}\n     */\n    protected skyboxVBO: VertexBuffer;\n    /**\n     * [_prog description]\n     * @type {Program}\n     */\n    protected _prog: Program;\n    /**\n     * [cubeMapTexture description]\n     * @type {CubeMapTexture}\n     */\n    protected cubeMapTexture: CubeMapTexture;\n    /**\n     * @param {string}\n     */\n    constructor(dir: string, isWebGL2: boolean = true) {\n        let faces: Array<string> = [];\n        faces.push(dir + \"/right.jpg\");\n        faces.push(dir + \"/left.jpg\");\n        faces.push(dir + \"/top.jpg\");\n        faces.push(dir + \"/bottom.jpg\");\n        faces.push(dir + \"/back.jpg\");\n        faces.push(dir + \"/front.jpg\");\n\n        const gl: WebGLRenderingContext = Core.getInstance().getGL();\n\n        this._prog = new Program();\n\n        let vs: string;\n\n        if (isWebGL2) {\n            vs = `#version 300 es\n            precision highp float;\n            layout (location = 0) in vec3 position;\n            out vec3 TexCoords;\n            uniform mat4 projection;\n            uniform mat4 view;\n            void main() {\n                vec4 pos = projection * view * vec4(position, 1.0);\n                gl_Position = pos.xyww;\n                TexCoords = position;\n            }`;\n        } else {\n            vs = `precision highp float;\n            attribute vec3 position;\n            varying vec3 TexCoords;\n            uniform mat4 projection;\n            uniform mat4 view;\n            void main() {\n                vec4 pos = projection * view * vec4(position, 1.0);\n                gl_Position = pos.xyww;\n                TexCoords = position;\n            }`;\n        }\n\n\n        this._prog.addShader(vs, ProgramCte.shader_type.vertex, ProgramCte.mode.read_text);\n\n        let fg: string;\n\n        if (isWebGL2) {\n            fg = `#version 300 es\n            precision highp float;\n            in vec3 TexCoords;\n            out vec4 color;\n            uniform samplerCube skybox;\n            void main() {\n                color = texture(skybox, TexCoords);\n            }`;\n        } else {\n            fg = `precision highp float;\n            varying vec3 TexCoords;\n            uniform samplerCube skybox;\n            void main() {\n                gl_FragColor = textureCube(skybox, TexCoords);\n            }`;\n        }\n\n\n        this._prog.addShader(fg, ProgramCte.shader_type.fragment, ProgramCte.mode.read_text);\n        this._prog.compile();\n\n        this._prog.addUniforms([\"view\", \"projection\"]);\n\n        let skyboxVertices = new Float32Array([\n            // Positions\n            -1.0,  1.0, -1.0,\n            -1.0, -1.0, -1.0,\n             1.0, -1.0, -1.0,\n             1.0, -1.0, -1.0,\n             1.0,  1.0, -1.0,\n            -1.0,  1.0, -1.0,\n\n            -1.0, -1.0,  1.0,\n            -1.0, -1.0, -1.0,\n            -1.0,  1.0, -1.0,\n            -1.0,  1.0, -1.0,\n            -1.0,  1.0,  1.0,\n            -1.0, -1.0,  1.0,\n\n             1.0, -1.0, -1.0,\n             1.0, -1.0,  1.0,\n             1.0,  1.0,  1.0,\n             1.0,  1.0,  1.0,\n             1.0,  1.0, -1.0,\n             1.0, -1.0, -1.0,\n\n            -1.0, -1.0,  1.0,\n            -1.0,  1.0,  1.0,\n             1.0,  1.0,  1.0,\n             1.0,  1.0,  1.0,\n             1.0, -1.0,  1.0,\n            -1.0, -1.0,  1.0,\n\n            -1.0,  1.0, -1.0,\n             1.0,  1.0, -1.0,\n             1.0,  1.0,  1.0,\n             1.0,  1.0,  1.0,\n            -1.0,  1.0,  1.0,\n            -1.0,  1.0, -1.0,\n\n            -1.0, -1.0, -1.0,\n            -1.0, -1.0,  1.0,\n             1.0, -1.0, -1.0,\n             1.0, -1.0, -1.0,\n            -1.0, -1.0,  1.0,\n             1.0, -1.0,  1.0\n        ]);\n\n        this.skyboxVAO = new VertexArray();\n        this.skyboxVAO.bind();\n\n        this.skyboxVBO = new VertexBuffer(BufferType.Array);\n        this.skyboxVBO.bind();\n        this.skyboxVBO.bufferData(skyboxVertices, UsageType.StaticDraw);\n        this.skyboxVBO.vertexAttribPointer(0, 3, gl.FLOAT, false, 0);\n        this._loadCubemap(faces);\n\n        this.skyboxVAO.unbind();\n    }\n    /**\n     * @param {Float32Array}\n     * @param {Float32Array}\n     */\n    public render(view: Float32Array, projection: Float32Array) {\n        const gl: WebGLRenderingContext = Core.getInstance().getGL();\n\n        Depth.comparison(ComparisonFunc.LessEqual);\n        this._prog.use();\n\n        let auxView = mat3.create();\n        auxView = mat3.fromMat4(auxView, view);\n        // Remove any translation\n        auxView = new Float32Array([\n            auxView[0], auxView[1], auxView[2], 0.0,\n            auxView[3], auxView[4], auxView[5], 0.0,\n            auxView[6], auxView[7], auxView[8], 0.0,\n                   0.0,        0.0,        0.0, 0.0\n        ]);\n        this._prog.sendUniformMat4(\"view\", auxView);\n        this._prog.sendUniformMat4(\"projection\", projection);\n\n        this.cubeMapTexture.bind(0);\n\n        this.skyboxVAO.bind();\n        gl.drawArrays(gl.TRIANGLES, 0, 36);\n        this.skyboxVAO.unbind();\n\n        Depth.comparison(ComparisonFunc.Less);\n    }\n    /**\n     *\n     */\n    public destroy() {\n        this.cubeMapTexture.destroy();\n    }\n    /**\n     * @param {Array<string>}\n     */\n    protected _loadCubemap(faces: Array<string>) {\n        this.cubeMapTexture = new CubeMapTexture();\n        this.cubeMapTexture.bind();\n\n        faces.forEach(function(face: string, i: number) {\n            let img = ResourceMap.retrieveAsset(face);\n            this.cubeMapTexture.addImage(i, img);\n        }.bind(this));\n\n        this.cubeMapTexture.finishTex();\n        this.cubeMapTexture.unbind();\n    }\n};\n\nexport default Skybox;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/extras/skybox.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"texture.ts\" />\n/// <reference path=\"texOptions.ts\" />\n\nimport Texture from \"./texture\";\nimport Core from \"../core/core\";\nimport TexOptions from \"./texOptions\";\n\n\"use strict\";\n\nclass CubeMapTexture extends Texture {\n    protected _flipY: boolean;\n    protected _minFilter: number;\n    protected _magFilter: number;\n    protected _wraps: Array<number>;\n\n    protected finished: boolean;\n\n    constructor(options: TexOptions = {}) {\n        const gl = Core.getInstance().getGL();\n        super(gl.TEXTURE_CUBE_MAP);\n        options = options || {};\n\n        this.finished = false;\n\n        // TODO: Faltan todo el tema de filtrados o wrap de las opciones\n            // que me he saltado por falta de tiempo :(\n        this._handle = gl.createTexture();\n    }\n    public addImage(i: number, data) {\n        const gl = Core.getInstance().getGL();\n        gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0,\n            gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, data);\n    }\n    public bind(slot?: number) {\n        const gl = Core.getInstance().getGL();\n        if (typeof slot === \"number\") {\n            gl.activeTexture(gl.TEXTURE0 + slot);\n        }\n        gl.bindTexture(this._target, this._handle);\n    }\n    public unbind() {\n        const gl = Core.getInstance().getGL();\n        gl.bindTexture(this._target, null);\n    }\n    public destroy() {\n        const gl = Core.getInstance().getGL();\n        gl.deleteTexture(this._handle);\n        this._handle = null;\n    }\n    public finishTex() {\n        const gl = Core.getInstance().getGL();\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n\n        if ((<any>gl).TEXTURE_WRAP_R) {\n            gl.texParameteri(gl.TEXTURE_CUBE_MAP, (<any>gl).TEXTURE_WRAP_R, gl.CLAMP_TO_EDGE);\n        }\n\n\n        this.finished = true;\n    }\n};\n\nexport default CubeMapTexture;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/textures/cubemapTexture.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"../core/context.ts\" />\n///\nimport Context from \"../core/context\";\n\n\"use strict\";\n\nconst gl = Context.getContext();\n\nenum TextureFormat {\n    RGB = gl.RGB,\n    Float = gl.FLOAT\n};\n\nexport default TextureFormat;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/constants/TextureFormat.ts\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\n///\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n/// software and associated documentation files (the \"Software\"), to deal in the Software\n/// without restriction, including without limitation the rights to use, copy, modify,\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n/// permit persons to whom the Software is furnished to do so, subject to the following\n/// conditions:\n///\n/// The above copyright notice and this permission notice shall be included in\n/// all copies or substantial portions of the Software.\n///\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n/// <reference path=\"../core/context.ts\" />\n///\nimport Context from \"../core/context\";\n\n\"use strict\";\n\nconst gl = Context.getContext();\n\nenum TextureType {\n    Nearest = gl.NEAREST,\n    Linear = gl.LINEAR,\n    Clamp2Edge = gl.CLAMP_TO_EDGE\n};\n\nexport default TextureType;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/constants/TextureType.ts\n **/","\nexport default {\n    sealed: function(constructor: Function) {\n        Object.seal(constructor);\n        Object.seal(constructor.prototype);\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/library/_decorators.ts\n **/"],"sourceRoot":""}