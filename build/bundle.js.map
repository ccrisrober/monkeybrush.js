{"version":3,"sources":["webpack:///webpack/bootstrap c81eefae160dbac89d0b","webpack:///./lib/index.ts","webpack:///./lib/library/App.ts","webpack:///./lib/library/core/core.ts","webpack:///./lib/library/core/context.ts","webpack:///./lib/library/core/log.ts","webpack:///./lib/library/core/input.ts","webpack:///./lib/library/core/depth.ts","webpack:///./lib/library/core/cull.ts","webpack:///./lib/library/core/blend.ts","webpack:///./lib/library/constants/BlendingType.ts","webpack:///./lib/library/constants/ComparisonFunc.ts","webpack:///./lib/library/resources/resourceMap.ts","webpack:///./lib/library/extras/timer.ts","webpack:///./lib/library/models/sphere.ts","webpack:///./lib/library/models/drawable.ts","webpack:///./lib/library/core/vertexArray.ts","webpack:///./lib/library/extras/extensions.ts","webpack:///./lib/library/core/vertexBuffer.ts","webpack:///./lib/library/constants/BufferType.ts","webpack:///./lib/library/constants/UsageType.ts","webpack:///./lib/library/models/mesh.ts","webpack:///./lib/library/textures/texture2d.ts","webpack:///./lib/library/textures/texture.ts","webpack:///./lib/library/textures/simpleTexture2d.ts","webpack:///./lib/library/core/program.ts","webpack:///./lib/library/constants/ProgramCte.ts","webpack:///./lib/library/core/framebuffer.ts","webpack:///./lib/library/textures/renderBufferTexture.ts","webpack:///./lib/library/resources/programManager.ts","webpack:///./lib/library/resources/loaders.ts","webpack:///./lib/library/lights/pointLight.ts","webpack:///./lib/library/lights/light.ts","webpack:///./lib/library/extras/color.ts","webpack:///./lib/library/maths/vector3.ts","webpack:///./lib/library/maths/vector2.ts","webpack:///./lib/library/_demoCamera.ts","webpack:///./lib/library/extras/skybox.ts","webpack:///./lib/library/textures/cubemapTexture.ts","webpack:///./lib/library/constants/TextureFormat.ts","webpack:///./lib/library/constants/TextureType.ts"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,kCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB,YAAY;AACjC,0BAAyB,YAAY;AACrC,8BAA6B,YAAY;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;;;;;;ACjKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC;AAChC;AACA;AACA;AACA;AACA,2DAA0D;AAC1D;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;AChIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,oBAAoB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;ACrGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,8BAA8B;AACrD;AACA;AACA;AACA;AACA,wBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,wBAAuB,8BAA8B;AACrD;AACA;AACA;AACA,wBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;AC/LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA;AACA,gBAAe,eAAe;AAC9B;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA;AACA,gBAAe,aAAa;AAC5B,gBAAe,aAAa;AAC5B;AACA;AACA,gCAA+B,aAAa;AAC5C,+BAA8B,YAAY;AAC1C,oDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA;AACA,iBAAgB,QAAQ;AACxB;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA;AACA,iBAAgB,KAAK;AACrB;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA;AACA,gBAAe,KAAK;AACpB;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA;AACA,iBAAgB,QAAQ;AACxB;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA;AACA,gBAAe,WAAW;AAC1B;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA;AACA,gBAAe,YAAY;AAC3B;AACA;AACA,gBAAe,YAAY;AAC3B;AACA;AACA;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA;AACA,gBAAe,aAAa;AAC5B,gBAAe,aAAa;AAC5B,gBAAe,aAAa;AAC5B,gBAAe,aAAa;AAC5B;AACA;AACA,8BAA6B,WAAW;AACxC,gCAA+B,aAAa;AAC5C,+BAA8B,YAAY;AAC1C,gCAA+B,aAAa;AAC5C,oDAAmD;AACnD;AACA;AACA;AACA;AACA,gBAAe,gCAAgC;AAC/C;AACA,gBAAe,iCAAiC;AAChD;AACA;AACA;AACA,kCAAiC,yCAAyC;AAC1E,kCAAiC,0CAA0C;AAC3E,oDAAmD;AACnD;AACA;AACA;AACA;AACA,gBAAe,gCAAgC;AAC/C;AACA,gBAAe,iCAAiC;AAChD;AACA,gBAAe,gCAAgC;AAC/C;AACA,gBAAe,iCAAiC;AAChD;AACA;AACA;AACA,iCAAgC,wCAAwC;AACxE,iCAAgC,yCAAyC;AACzE,mCAAkC,0CAA0C;AAC5E,mCAAkC,2CAA2C;AAC7E,oDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA;AACA,iBAAgB,QAAQ;AACxB;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;ACrIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC,oCAAoC;AACrC;AACA;AACA;;;;;;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAgF;AAChF,EAAC,wCAAwC;AACzC;AACA;AACA;;;;;;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAmD,oBAAoB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC,kCAAkC;AACnC;AACA;AACA;;;;;;;ACtLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,EAAC,sBAAsB;AACvB;AACA;;;;;;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,aAAa;AACpC;AACA;AACA,4BAA2B,aAAa;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,YAAY;AACnC;AACA;AACA,4BAA2B,YAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;ACxHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,YAAY;AAC3B,gBAAe,iCAAiC;AAChD;AACA;AACA,+BAA8B,6CAA6C;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB,aAAa;AAC7B,iBAAgB,OAAO;AACvB,iBAAgB,iCAAiC;AACjD,iBAAgB,aAAa;AAC7B;AACA;AACA,+BAA8B,6CAA6C;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;;;;;;;AC1HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,uBAAuB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,uBAAuB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC,gCAAgC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAC,EAAE;;;;;;;AC3EH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA,+BAA8B,sCAAsC;AACpE;AACA;AACA,mBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,WAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,WAAW;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,YAAY;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,2BAA2B;AAC1C,gBAAe,oCAAoC;AACnD;AACA;AACA,gCAA+B,2CAA2C;AAC1E;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,kBAAkB;AACjC;AACA;AACA,iCAAgC,YAAY;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,6BAA6B;AAC5C,gBAAe,yBAAyB;AACxC;AACA;AACA,qCAAoC,oBAAoB;AACxD,iCAAgC,YAAY;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;;;;;;;AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC,gCAAgC;AACjC;AACA;AACA;;;;;;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC,8BAA8B;AAC/B;AACA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,cAAc;AAC/C,oCAAmC,kBAAkB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA4E;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,gBAAe,WAAW;AAC1B;AACA;AACA,gCAA+B,WAAW;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;ACjIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAA+C,WAAW;AAC1D,+CAA8C,WAAW;AACzD;AACA,EAAC;AACD;AACA;AACA;;;;;;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA4E;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;AC5GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,yBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,yBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf,gBAAe;AACf,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,0BAA0B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA,wBAAuB,0BAA0B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB;AACtB;AACA,kBAAiB;AACjB;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA,MAAK;AACL;AACA,gBAAe;AACf,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf,gBAAe;AACf,gBAAe;AACf;AACA;AACA,oCAAmC,mBAAmB;AACtD;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;ACrYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK,0CAA0C;AAC/C;AACA;AACA;AACA;AACA;AACA,MAAK,wDAAwD;AAC7D;AACA,EAAC,gCAAgC;AACjC;AACA;AACA;;;;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B,eAAe;AAC9C,kCAAiC,iBAAiB;AAClD,kCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,cAAa;AACb;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,eAAe;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;ACrKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,OAAO;AACvB,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,gBAAgB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC,wCAAwC;AACzC;AACA;AACA;;;;;;;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B,YAAY;AAC3C;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA,gBAAe;AACf,gBAAe;AACf;AACA;AACA,gCAA+B,YAAY;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA,gCAA+B,YAAY;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf,gBAAe;AACf,gBAAe;AACf,gBAAe;AACf;AACA;AACA,gCAA+B,YAAY;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,wBAAwB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,wBAAwB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC,cAAc;AACnD,0CAAyC,aAAa;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA,EAAC,0BAA0B;AAC3B;AACA;AACA;;;;;;;ACjMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,qDAAqD;AACpE;AACA;AACA,mCAAkC,oDAAoD;AACtF;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA,+CAA8C,uBAAuB;AACrE;AACA;AACA,gBAAe,gBAAgB;AAC/B;AACA,uDAAsD,2BAA2B;AACjF;AACA;AACA,gBAAe,aAAa;AAC5B,gBAAe,aAAa;AAC5B,gBAAe,aAAa;AAC5B;AACA;AACA,4BAA2B,SAAS;AACpC,4BAA2B,SAAS;AACpC,4BAA2B,SAAS;AACpC;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA,+BAA8B,uBAAuB;AACrD;AACA,iBAAgB;AAChB;AACA,+BAA8B,uBAAuB;AACrD;AACA,iBAAgB;AAChB;AACA,+BAA8B,uBAAuB;AACrD;AACA,gBAAe;AACf;AACA,gCAA+B,oBAAoB;AACnD;AACA,gBAAe;AACf;AACA,gCAA+B,oBAAoB;AACnD;AACA,gBAAe;AACf;AACA,gCAA+B,oBAAoB;AACnD;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB,OAAO;AACvB,iBAAgB,OAAO;AACvB,iBAAgB,MAAM;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,MAAM;AACtB;AACA;AACA;AACA;AACA;AACA,uBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;AC5GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,EAAE;AACjB,gBAAe,EAAE;AACjB,gBAAe,EAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,WAAW;AAC3B,iBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,EAAE;AACjB,gBAAe,EAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,WAAW;AAC3B,iBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,qCAAqC;AACvE,6BAA4B,+BAA+B;AAC3D,8BAA6B,aAAa;AAC1C,gCAA+B,aAAa;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B,aAAa;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;ACxKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA,mCAAkC,iBAAiB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAqE,qDAAqD,iCAAiC,sCAAsC,gCAAgC,2BAA2B,qEAAqE,yCAAyC,uCAAuC,eAAe;AACha;AACA;AACA,yCAAwC,sCAAsC,qCAAqC,sCAAsC,gCAAgC,2BAA2B,qEAAqE,yCAAyC,uCAAuC,eAAe;AACxX;AACA;AACA;AACA;AACA,sEAAqE,gCAAgC,6BAA6B,yCAAyC,2BAA2B,qDAAqD,eAAe;AAC1Q;AACA;AACA,yCAAwC,qCAAqC,yCAAyC,2BAA2B,gEAAgE,eAAe;AAChO;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;ACzKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC,sCAAsC;AACvC;AACA;AACA;;;;;;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC,kCAAkC;AACnC;AACA;AACA","file":"./build/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap c81eefae160dbac89d0b\n **/","/// <reference path=\"library/references.d.ts\" />\r\n\"use strict\";\r\nvar App_1 = require(\"./library/App\");\r\nvar core_1 = require(\"./library/core/core\");\r\nvar input_1 = require(\"./library/core/input\");\r\nvar sphere_1 = require(\"./library/models/sphere\");\r\nvar mesh_1 = require(\"./library/models/mesh\");\r\nvar texture2d_1 = require(\"./library/textures/texture2d\");\r\nvar simpleTexture2d_1 = require(\"./library/textures/simpleTexture2d\");\r\nvar program_1 = require(\"./library/core/program\");\r\nvar framebuffer_1 = require(\"./library/core/framebuffer\");\r\nvar programManager_1 = require(\"./library/resources/programManager\");\r\nvar resourceMap_1 = require(\"./library/resources/resourceMap\");\r\nvar loaders_1 = require(\"./library/resources/loaders\");\r\nvar timer_1 = require(\"./library/extras/timer\");\r\nvar pointLight_1 = require(\"./library/lights/pointLight\");\r\nvar vector2_1 = require(\"./library/maths/vector2\");\r\nvar vector3_1 = require(\"./library/maths/vector3\");\r\nvar _demoCamera_1 = require(\"./library/_demoCamera\");\r\nvar skybox_1 = require(\"./library/extras/skybox\");\r\nvar ProgramCte_1 = require(\"./library/constants/ProgramCte\");\r\nvar TextureFormat_1 = require(\"./library/constants/TextureFormat\");\r\nvar TextureType_1 = require(\"./library/constants/TextureType\");\r\n\"use strict\";\r\nvar camera = new _demoCamera_1[\"default\"](new Float32Array([-2.7, -1.4, 11.8]));\r\nvar skybox;\r\nvar esferita;\r\nvar SimpleConfig = function () {\r\n    return {\r\n        max: 10,\r\n        resume: true\r\n    };\r\n};\r\nvar m;\r\nvar view;\r\nvar projection;\r\nvar tex2d;\r\nvar _light = new pointLight_1[\"default\"](new vector3_1[\"default\"](-5.0, 0.0, 0.0));\r\nvar identityMatrix = mat4.create();\r\nmat4.identity(identityMatrix);\r\nvar model = mat4.create();\r\nvar angle = 0;\r\nvar text = SimpleConfig();\r\nfunction loadAssets() {\r\n    loaders_1[\"default\"].loadImage(\"assets/images/example.png\", \"exampleImg\");\r\n    // skybox\r\n    loaders_1[\"default\"].loadImage(\"assets/images/canyon/back.jpg\");\r\n    loaders_1[\"default\"].loadImage(\"assets/images/canyon/bottom.jpg\");\r\n    loaders_1[\"default\"].loadImage(\"assets/images/canyon/front.jpg\");\r\n    loaders_1[\"default\"].loadImage(\"assets/images/canyon/left.jpg\");\r\n    loaders_1[\"default\"].loadImage(\"assets/images/canyon/right.jpg\");\r\n    loaders_1[\"default\"].loadImage(\"assets/images/canyon/top.jpg\");\r\n    // video\r\n    // loaders.loadVideo(\"assets/video/Firefox.ogv\");\r\n}\r\nvar mainShader = \"prog\";\r\nvar framebuffer;\r\nfunction initialize(app) {\r\n    esferita = new sphere_1[\"default\"](1.0, 20, 20);\r\n    m = new mesh_1[\"default\"](\"assets/objects/teddy.json\");\r\n    var canvasSize = new vector2_1[\"default\"](core_1[\"default\"].getInstance().canvas().width, core_1[\"default\"].getInstance().canvas().height);\r\n    skybox = new skybox_1[\"default\"](\"assets/images/canyon\", false);\r\n    framebuffer = new framebuffer_1[\"default\"]([\r\n        new simpleTexture2d_1[\"default\"](canvasSize, {\r\n            \"internalFormat\": TextureFormat_1[\"default\"].RGB,\r\n            \"format\": TextureFormat_1[\"default\"].RGB,\r\n            \"type\": TextureFormat_1[\"default\"].Float,\r\n            \"minFilter\": TextureType_1[\"default\"].Nearest,\r\n            \"magFilter\": TextureType_1[\"default\"].Nearest\r\n        })\r\n    ], canvasSize, true, true, {});\r\n    // console.log(app);\r\n    var webgl2 = app.webglVersion() === 2;\r\n    programManager_1[\"default\"].addWithFun(\"prog\", function () {\r\n        var prog = new program_1[\"default\"]();\r\n        if (webgl2) {\r\n            prog.addShader(\"./shaders/demoShader.vert\", ProgramCte_1[\"default\"].shader_type.vertex, ProgramCte_1[\"default\"].mode.read_file);\r\n            prog.addShader(\"./shaders/demoShader.frag\", ProgramCte_1[\"default\"].shader_type.fragment, ProgramCte_1[\"default\"].mode.read_file);\r\n        }\r\n        else {\r\n            prog.addShader(\"./shaders/demowebgl1.vert\", ProgramCte_1[\"default\"].shader_type.vertex, ProgramCte_1[\"default\"].mode.read_file);\r\n            prog.addShader(\"./shaders/demowebgl1.frag\", ProgramCte_1[\"default\"].shader_type.fragment, ProgramCte_1[\"default\"].mode.read_file);\r\n        }\r\n        prog.compile();\r\n        prog.addUniforms([\"projection\", \"view\", \"model\",\r\n            \"normalMatrix\", \"texSampler\", \"viewPos\", \"lightPosition\"]);\r\n        return prog;\r\n    });\r\n    var cubeImage = resourceMap_1[\"default\"].retrieveAsset(\"exampleImg\");\r\n    tex2d = new texture2d_1[\"default\"](cubeImage, {\r\n        flipY: true,\r\n        minFilter: TextureType_1[\"default\"].Linear,\r\n        magFilter: TextureType_1[\"default\"].Linear,\r\n        wrapS: TextureType_1[\"default\"].Clamp2Edge,\r\n        wrapT: TextureType_1[\"default\"].Clamp2Edge\r\n    });\r\n    cameraUpdateCb();\r\n}\r\nfunction cameraUpdateCb() {\r\n    var canvas = core_1[\"default\"].getInstance().canvas();\r\n    view = camera.GetViewMatrix();\r\n    projection = camera.GetProjectionMatrix(canvas.width, canvas.height);\r\n    var prog = programManager_1[\"default\"].get(mainShader);\r\n    prog.use();\r\n    prog.sendUniformMat4(\"view\", view);\r\n    prog.sendUniformMat4(\"projection\", projection);\r\n    prog.sendUniformVec3(\"viewPos\", camera.position);\r\n}\r\n// @param dt: Global time in seconds\r\nfunction updateScene(app, dt) {\r\n    if (input_1[\"default\"].getInstance().isButtonClicked(input_1[\"default\"].mouseButton.Left)) {\r\n        console.log(\"Mouse left clicked\");\r\n    }\r\n    camera.timeElapsed = timer_1[\"default\"].deltaTime() / 10.0;\r\n    camera.update(cameraUpdateCb);\r\n    angle += timer_1[\"default\"].deltaTime() * 0.001;\r\n}\r\nfunction drawScene(app) {\r\n    core_1[\"default\"].getInstance().clearColorAndDepth();\r\n    var prog = programManager_1[\"default\"].get(mainShader);\r\n    prog.use();\r\n    tex2d.bind(0);\r\n    prog.sendUniform1i(\"texSampler\", 0);\r\n    var varvar = text.max;\r\n    var i = 0, j = 0, k = 0;\r\n    var dd = -1;\r\n    for (i = -varvar; i < varvar; i += 5.0) {\r\n        for (j = -varvar; j < varvar; j += 5.0) {\r\n            for (k = -varvar; k < varvar; k += 5.0) {\r\n                dd *= -1;\r\n                mat4.translate(model, identityMatrix, vec3.fromValues(i * 1.0, j * 1.0, k * 1.0));\r\n                mat4.rotateY(model, model, 90.0 * Math.PI / 180);\r\n                mat4.rotateY(model, model, angle * dd);\r\n                mat4.scale(model, model, vec3.fromValues(0.1, 0.1, 0.1));\r\n                prog.sendUniformMat4(\"model\", model);\r\n                m.render();\r\n            }\r\n        }\r\n    }\r\n    skybox.render(view, projection);\r\n}\r\n// ============================================================================================ //\r\n// ============================================================================================ //\r\n// ============================================================================================ //\r\n// ============================================================================================ //\r\n// ============================================================================================ //\r\n// ============================================================================================ //\r\n/**/\r\nwindow.onload = function () {\r\n    new App_1[\"default\"]({\r\n        webglVersion: 2,\r\n        loadAssets: loadAssets,\r\n        initialize: initialize,\r\n        update: updateScene,\r\n        draw: drawScene,\r\n        cameraUpdate: cameraUpdateCb,\r\n        textCB: function (gui) {\r\n            gui.add(text, \"max\", 5, 100);\r\n        }\r\n    }, text).start();\r\n};\r\n/**/\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/index.ts\n ** module id = 0\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"core/core.ts\" />\r\n/// <reference path=\"core/input.ts\" />\r\n/// <reference path=\"resources/resourceMap.ts\" />\r\n/// <reference path=\"extras/timer.ts\" />\r\n/// <reference path=\"../typings/vanilla-toasts/vanilla-toasts.d.ts\" />\r\nvar core_1 = require(\"./core/core\");\r\nvar input_1 = require(\"./core/input\");\r\nvar resourceMap_1 = require(\"./resources/resourceMap\");\r\nvar timer_1 = require(\"./extras/timer\");\r\n\"use strict\";\r\nvar App = (function () {\r\n    function App(init, text) {\r\n        this._resume = true;\r\n        if (!init.webglVersion) {\r\n            init.webglVersion = 2;\r\n        }\r\n        this._appFunctions = init;\r\n        console.log(this._appFunctions);\r\n        this.__init__(text);\r\n    }\r\n    ;\r\n    App.prototype.webglVersion = function () {\r\n        return this._appFunctions.webglVersion;\r\n    };\r\n    App.prototype.__init__ = function (text) {\r\n        core_1[\"default\"].getInstance().initialize([1.0, 1.0, 1.0, 1.0]);\r\n        this.gui = new dat.GUI();\r\n        this._appFunctions.textCB(this.gui);\r\n        var self = this;\r\n        this.gui.add(text, \"resume\", true).onChange(function (v) {\r\n            if (v === true) {\r\n                self.resume();\r\n            }\r\n            else {\r\n                self.pause();\r\n            }\r\n        });\r\n        this.stats = new Stats();\r\n        this.stats.setMode(0);\r\n        document.body.appendChild(this.stats.domElement);\r\n        this._appFunctions.loadAssets();\r\n    };\r\n    App.prototype.start = function () {\r\n        var self = this;\r\n        resourceMap_1[\"default\"].setLoadCompleteCallback(function () {\r\n            console.log(\"ALL RESOURCES LOADED!!!!\");\r\n            self._appFunctions.initialize(self);\r\n            // Remove loader css3 window\r\n            document.getElementById(\"spinner\").remove();\r\n            try {\r\n                (function __render__(dt) {\r\n                    // console.log(dt);\r\n                    input_1[\"default\"].getInstance().update();\r\n                    self.stats.begin();\r\n                    dt *= 0.001; // convert to seconds\r\n                    timer_1[\"default\"].update();\r\n                    // self.__resize__();\r\n                    if (self._resume) {\r\n                        self._appFunctions.update(self, dt);\r\n                        self._appFunctions.draw(self, dt); // Draw user function\r\n                    }\r\n                    self.stats.end();\r\n                    requestAnimationFrame(__render__);\r\n                })(0.0);\r\n            }\r\n            catch (e) {\r\n                VanillaToasts.create({\r\n                    title: \"Error:\",\r\n                    text: \"\" + e,\r\n                    type: \"error\"\r\n                });\r\n                throw e;\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    ;\r\n    App.prototype.pause = function () {\r\n        console.log(\"PAUSE\");\r\n        this._resume = false;\r\n    };\r\n    ;\r\n    App.prototype.resume = function () {\r\n        console.log(\"RESUME\");\r\n        this._resume = true;\r\n    };\r\n    ;\r\n    App.prototype.__resize__ = function () {\r\n        var canvas = core_1[\"default\"].getInstance().canvas();\r\n        var realToCSSPixels = window.devicePixelRatio || 1;\r\n        // Lookup the size the browser is displaying the canvas in CSS pixels\r\n        // and compute a size needed to make our drawingbuffer match it in\r\n        // device pixels.\r\n        var displayWidth = Math.floor(canvas.clientWidth * realToCSSPixels);\r\n        var displayHeight = Math.floor(canvas.clientHeight * realToCSSPixels);\r\n        // Check if the canvas is not the same size.\r\n        if (canvas.width !== displayWidth ||\r\n            canvas.height !== displayHeight) {\r\n            // Make the canvas the same size\r\n            canvas.width = displayWidth;\r\n            canvas.height = displayHeight;\r\n            // Set the viewport to match\r\n            core_1[\"default\"].getInstance().changeViewport(0, 0, canvas.width, canvas.height);\r\n        }\r\n    };\r\n    return App;\r\n}());\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = App;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/App.ts\n ** module id = 1\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"input.ts\" />\r\n/// <reference path=\"context.ts\" />\r\n/// <reference path=\"../constants/_constants.ts\" />\r\nvar context_1 = require(\"./context\");\r\nvar input_1 = require(\"./input\");\r\n\"use strict\";\r\n/**\r\n* This class get WebGL2 context and animationFrame for your navigator.\r\n*\r\n* @class core.Core\r\n*/\r\nvar Core = (function () {\r\n    function Core() {\r\n        if (Core._instance) {\r\n            throw new Error(\"Error: Instantiation failed: Use Core.getInstance() instead of new.\");\r\n        }\r\n        this._gl = context_1[\"default\"].getContext();\r\n        input_1[\"default\"].getInstance();\r\n        Core._instance = this;\r\n    }\r\n    Core.prototype.initialize = function (color) {\r\n        var gl = this._gl;\r\n        this.init();\r\n        // ToneMap.init(gl);\r\n        gl.clearColor(color[0], color[1], color[2], color[3]);\r\n    };\r\n    Core.prototype.clearColorAndDepth = function () {\r\n        this._gl.clear(this._gl.COLOR_BUFFER_BIT | this._gl.DEPTH_BUFFER_BIT);\r\n    };\r\n    Core.prototype.changeViewport = function (x, y, w, h) {\r\n        this._gl.viewport(x, y, w, h);\r\n    };\r\n    Core.prototype.canvas = function () {\r\n        return this._gl.canvas;\r\n    };\r\n    Core.prototype.init = function () {\r\n        depth_1[\"default\"].enable();\r\n        depth_1[\"default\"].comparison(ComparisonFunc_1[\"default\"].Less);\r\n        // Set images to flip y axis to match the texture coordinate space.\r\n        // gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 1);\r\n        cull_1[\"default\"].enable();\r\n        blend_1[\"default\"].disable();\r\n    };\r\n    Core.getInstance = function () {\r\n        if (!Core._instance) {\r\n            console.log(\"Creando core\");\r\n            Core._instance = new Core();\r\n        }\r\n        return Core._instance;\r\n    };\r\n    /**\r\n    * Return global WebGL context\r\n    *\r\n    * @method getGL\r\n    * @return {WebGLRenderingContext} Returns WebGL rendering context\r\n    */\r\n    Core.prototype.getGL = function () {\r\n        return this._gl;\r\n    };\r\n    Core._instance = new Core();\r\n    return Core;\r\n}());\r\n;\r\ncontext_1[\"default\"].getContext();\r\nCore.getInstance();\r\nvar depth_1 = require(\"./depth\");\r\nvar cull_1 = require(\"./cull\");\r\nvar blend_1 = require(\"./blend\");\r\nvar ComparisonFunc_1 = require(\"../constants/ComparisonFunc\");\r\nexports.__esModule = true;\r\nexports[\"default\"] = Core;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/core/core.ts\n ** module id = 2\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"./log.ts\" />\r\nvar log_1 = require(\"./log\");\r\n// TODO: in getContext, check antialias or anothers params\r\nvar Context = (function () {\r\n    function Context() {\r\n    }\r\n    Context.getContext = function (canvasName) {\r\n        if (!Context._gl) {\r\n            if (!canvasName) {\r\n                log_1[\"default\"].info(\"Not canvas. Create one ...\");\r\n                this._canvas = document.createElement(\"canvas\");\r\n                this._canvas.width = 800;\r\n                this._canvas.height = 800;\r\n                document.body.appendChild(this._canvas);\r\n            }\r\n            else {\r\n                this._canvas = document.getElementById(canvasName);\r\n            }\r\n            log_1[\"default\"].info(\"Get context\");\r\n            Context._gl = Context._getContext(this._canvas);\r\n            if (!Context._gl) {\r\n                document.write(\"<br><b>WebGL is not supported!</b>\");\r\n                throw new Error(\"WebGL is not supported!\");\r\n            }\r\n            log_1[\"default\"].info(\"WebGLRenderingContext OK :)\");\r\n            Context._getVendors();\r\n        }\r\n        return Context._gl;\r\n    };\r\n    Context._getContext = function (canvas) {\r\n        var contexts = \"webgl2,webgl,experimental-webgl2\".split(\",\");\r\n        var gl;\r\n        var ctx;\r\n        for (var i = 0; i < contexts.length; ++i) {\r\n            ctx = contexts[i];\r\n            gl = canvas.getContext(contexts[i]);\r\n            if (gl) {\r\n                return gl;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    Context._getVendors = function () {\r\n        var vendors = \"ms,moz,webkit,o\".split(\",\");\r\n        if (!window.requestAnimationFrame) {\r\n            var vendor = void 0;\r\n            for (var i = 0; i < vendors.length; ++i) {\r\n                vendor = vendors[i];\r\n                window.requestAnimationFrame = window[vendor + \"RequestAnimationFrame\"];\r\n                window.cancelAnimationFrame = window[vendor + \"CancelAnimationFrame\"] ||\r\n                    window[vendor + \"CancelRequestAnimationFrame\"];\r\n                if (window.requestAnimationFrame) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        // Manual fallback\r\n        if (!window.requestAnimationFrame) {\r\n            var lastTime_1 = 0;\r\n            window.requestAnimationFrame = function (cb) {\r\n                var currTime = Date.now();\r\n                var timeToCall = Math.max(0, 16 - (currTime - lastTime_1));\r\n                var id = window.setTimeout(function () {\r\n                    cb(currTime + timeToCall);\r\n                }, timeToCall);\r\n                lastTime_1 = currTime + timeToCall;\r\n                return id;\r\n            };\r\n        }\r\n        if (!window.cancelAnimationFrame) {\r\n            window.cancelAnimationFrame = function (id) {\r\n                clearTimeout(id);\r\n            };\r\n        }\r\n        ;\r\n    };\r\n    Context._gl = null;\r\n    Context._canvas = null;\r\n    return Context;\r\n}());\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = Context;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/core/context.ts\n ** module id = 3\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"../../typings/log4javascript.d.ts\" />\r\n// var log = log4javascript.getDefaultLogger();\r\n// log.setLevel(log4javascript.Level.INFO);\r\nvar consoleAppender, logger;\r\nlogger = log4javascript.getLogger(\"my_logger\");\r\nconsoleAppender = new log4javascript.BrowserConsoleAppender();\r\nlogger.addAppender(consoleAppender);\r\nexports.__esModule = true;\r\nexports[\"default\"] = logger;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/core/log.ts\n ** module id = 4\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"context.ts\" />\r\nvar context_1 = require(\"./context\");\r\n\"use strict\";\r\n// TODO: Remove Input singleton mode :S\r\nvar Input = (function () {\r\n    function Input() {\r\n        // Key code constants\r\n        this.keys = {\r\n            Left_Shift: 16,\r\n            // arrows\r\n            Left: 37,\r\n            Up: 38,\r\n            Right: 39,\r\n            Down: 40,\r\n            // space bar\r\n            Space: 32,\r\n            // numbers\r\n            Zero: 48,\r\n            One: 49,\r\n            Two: 50,\r\n            Three: 51,\r\n            Four: 52,\r\n            Five: 53,\r\n            Six: 54,\r\n            Seven: 55,\r\n            Eight: 56,\r\n            Nine: 57,\r\n            // Alphabets\r\n            A: 65,\r\n            D: 68,\r\n            E: 69,\r\n            F: 70,\r\n            G: 71,\r\n            I: 73,\r\n            J: 74,\r\n            K: 75,\r\n            L: 76,\r\n            M: 77,\r\n            N: 78,\r\n            O: 79,\r\n            P: 80,\r\n            Q: 81,\r\n            R: 82,\r\n            S: 83,\r\n            W: 87,\r\n            LastKeyCode: 222\r\n        };\r\n        // Previous key state\r\n        this._keyPreviusState = [];\r\n        // Pressed keys\r\n        this._isKeyPressed = [];\r\n        // Click events: once an event is set, it will remain there until polled\r\n        this._isKeyClicked = [];\r\n        this._buttonPreviousState = [];\r\n        this._isButtonPressed = [];\r\n        this._isButtonClicked = [];\r\n        this._mousePosX = -1;\r\n        this._mousePosY = -1;\r\n        if (Input._instance) {\r\n            throw new Error(\"Error: Instantiation failed: Use Input.getInstance() instead of new.\");\r\n        }\r\n        for (var i = 0; i < this.keys[\"LastKeyCode\"]; ++i) {\r\n            this._isKeyPressed[i] = false;\r\n            this._keyPreviusState[i] = false;\r\n            this._isKeyClicked[i] = false;\r\n        }\r\n        for (var i = 0; i < 3; ++i) {\r\n            this._buttonPreviousState[i] = false;\r\n            this._isButtonClicked[i] = false;\r\n            this._isButtonPressed[i] = false;\r\n        }\r\n        var self = this;\r\n        // Register handles\r\n        window.addEventListener(\"keyup\", function (ev) {\r\n            if (ev.keyCode === 40 || ev.keyCode === 38) {\r\n                ev.preventDefault();\r\n            }\r\n            self._onKeyUp(ev);\r\n        });\r\n        window.addEventListener(\"keydown\", function (ev) {\r\n            if (ev.keyCode === 40 || ev.keyCode === 38) {\r\n                ev.preventDefault();\r\n            }\r\n            self._onKeyDown(ev);\r\n        });\r\n        window.addEventListener(\"mousedown\", function (ev) {\r\n            self._onMouseDown(ev);\r\n        });\r\n        window.addEventListener(\"mousemove\", function (ev) {\r\n            self._onMouseMove(ev);\r\n        });\r\n        window.addEventListener(\"mouseup\", function (ev) {\r\n            self._onMouseUp(ev);\r\n        });\r\n        Input._instance = this;\r\n    }\r\n    Input.prototype.update = function () {\r\n        for (var i = 0; i < this.keys[\"LastKeyCode\"]; ++i) {\r\n            this._isKeyClicked[i] = (!this._keyPreviusState[i]) && this._isKeyPressed[i];\r\n            this._keyPreviusState[i] = this._isKeyPressed[i];\r\n        }\r\n        for (var i = 0; i < 3; ++i) {\r\n            this._isButtonClicked[i] = (!this._buttonPreviousState[i]) && this._isButtonPressed[i];\r\n            this._buttonPreviousState[i] = this._isButtonPressed[i];\r\n        }\r\n    };\r\n    Input.prototype.isKeyPressed = function (keycode) {\r\n        return this._isKeyPressed[keycode];\r\n    };\r\n    Input.prototype.isKeyClicked = function (keycode) {\r\n        return this._isKeyClicked[keycode];\r\n    };\r\n    Input.prototype._onKeyDown = function (ev) {\r\n        this._isKeyPressed[ev.keyCode] = true;\r\n    };\r\n    Input.prototype._onKeyUp = function (ev) {\r\n        this._isKeyPressed[ev.keyCode] = false;\r\n    };\r\n    Input.prototype._onMouseMove = function (ev) {\r\n        var inside = false;\r\n        var canvas = context_1[\"default\"].getContext().canvas;\r\n        var bbox = canvas.getBoundingClientRect();\r\n        // const x = Math.round((ev.clientX - bbox.left) * (canvas.width / bbox.width));\r\n        // const y = Math.round((ev.clientY - bbox.top) * (canvas.width / bbox.width));\r\n        var x = ((ev.clientX - bbox.left) - canvas.height / 2) / (canvas.height / 2);\r\n        var y = (canvas.width / 2 - (ev.clientY - bbox.top)) / (canvas.width / 2);\r\n        if ((x >= 0) && (x < canvas.width) &&\r\n            (y >= 0) && (y < canvas.height)) {\r\n            this._mousePosX = x;\r\n            this._mousePosY = canvas.height - 1 - y;\r\n            inside = true;\r\n        }\r\n        return inside;\r\n    };\r\n    Input.prototype._onMouseDown = function (ev) {\r\n        if (this._onMouseMove(ev)) {\r\n            this._isButtonPressed[ev.button] = true;\r\n        }\r\n    };\r\n    ;\r\n    Input.prototype._onMouseUp = function (ev) {\r\n        this._onMouseMove(ev);\r\n        this._isButtonPressed[ev.button] = false;\r\n    };\r\n    ;\r\n    Input.getInstance = function () {\r\n        return Input._instance;\r\n    };\r\n    ;\r\n    Input.prototype.isButtonPressed = function (button) {\r\n        return this._isButtonPressed[button];\r\n    };\r\n    Input.prototype.isButtonClicked = function (button) {\r\n        return this._isButtonClicked[button];\r\n    };\r\n    Input.prototype.getMousePosX = function () {\r\n        return this._mousePosX;\r\n    };\r\n    Input.prototype.getMousePosY = function () {\r\n        return this._mousePosY;\r\n    };\r\n    Input._instance = new Input();\r\n    // Mouse states\r\n    Input.mouseButton = {\r\n        Left: 0,\r\n        Middle: 1,\r\n        Right: 2\r\n    };\r\n    return Input;\r\n}());\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = Input;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/core/input.ts\n ** module id = 5\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"../constants/_constants.ts\" />\r\n/// <reference path=\"context.ts\" />\r\nvar context_1 = require(\"./context\");\r\n\"use strict\";\r\nvar Depth = (function () {\r\n    function Depth() {\r\n    }\r\n    /**\r\n     * Enable depth testing.\r\n     */\r\n    Depth.enable = function () {\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        gl.enable(gl.DEPTH_TEST);\r\n    };\r\n    /**\r\n     * Enable writing into the depth buffer.\r\n     */\r\n    Depth.use = function () {\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        gl.depthMask(true);\r\n    };\r\n    /**\r\n     * Specify the mode used for depth buffer comparisons.\r\n     * @param {ComparisonFunc} compFunc: Comparisor mode.\r\n     */\r\n    Depth.comparison = function (compFunc) {\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        gl.depthFunc(compFunc);\r\n    };\r\n    /**\r\n     * Specify mapping of depth values from normalized device coordinates to window coordinates.\r\n     * @param {number = 0.0} znear: Specifies the mapping of the near clipping plane to window coordinates.\r\n     * @param {number = 1.0} zfar: Specifies the mapping of the far clipping plane to window coordinates.\r\n     */\r\n    Depth.depthRange = function (znear, zfar) {\r\n        if (znear === void 0) { znear = 0.0; }\r\n        if (zfar === void 0) { zfar = 1.0; }\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        if (znear > zfar || znear < 0.0 || zfar > 1.0) {\r\n            console.warn(\"Values out of range [(znear < zfar), (znear > 0), (zfar < 1)]\");\r\n            return;\r\n        }\r\n        gl.depthRange(znear, zfar);\r\n    };\r\n    /**\r\n     * Clear depth buffer.\r\n     */\r\n    Depth.clear = function () {\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        gl.clear(gl.DEPTH_BUFFER_BIT);\r\n    };\r\n    /**\r\n     * Disable writing into the depth buffer.\r\n     */\r\n    Depth.unuse = function () {\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        gl.depthMask(false);\r\n    };\r\n    /**\r\n     * Disable depth testing.\r\n     */\r\n    Depth.disable = function () {\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        gl.disable(gl.DEPTH_TEST);\r\n    };\r\n    /**\r\n     * Checks if depth test is activated\r\n     * @return {boolean}: True if activated\r\n     */\r\n    Depth.isEnabled = function () {\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        return gl.isEnabled(gl.DEPTH_TEST);\r\n    };\r\n    return Depth;\r\n}());\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = Depth;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/core/depth.ts\n ** module id = 6\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"../constants/_constants.ts\" />\r\n/// <reference path=\"context.ts\" />\r\nvar context_1 = require(\"./context\");\r\n\"use strict\";\r\nvar Cull = (function () {\r\n    function Cull() {\r\n    }\r\n    /**\r\n     * Enable cullFace test.\r\n     */\r\n    Cull.enable = function () {\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        gl.enable(gl.CULL_FACE);\r\n    };\r\n    /**\r\n     * Get current cullFace mode\r\n     * @return {Face}: Current cullFace mode\r\n     */\r\n    Cull.getMode = function () {\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        return gl.getParameter(gl.CULL_FACE_MODE);\r\n    };\r\n    /**\r\n     * Specify whether front/back-facing facets can be culled.\r\n     * @param {Face} mode: Cull face mode\r\n     */\r\n    Cull.setMode = function (mode) {\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        gl.cullFace(mode);\r\n    };\r\n    /**\r\n     * Disable cullFace test.\r\n     */\r\n    Cull.disable = function () {\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        gl.disable(gl.CULL_FACE);\r\n    };\r\n    /**\r\n     * Checks if cullFace is activated\r\n     * @return {boolean}: True if activated\r\n     */\r\n    Cull.isEnabled = function () {\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        return gl.isEnabled(gl.CULL_FACE);\r\n    };\r\n    return Cull;\r\n}());\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = Cull;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/core/cull.ts\n ** module id = 7\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"../constants/_constants.ts\" />\r\n/// <reference path=\"context.ts\" />\r\nvar context_1 = require(\"./context\");\r\nvar BlendingType_1 = require(\"../constants/BlendingType\");\r\n\"use strict\";\r\n/**\r\n * Blend wrapper\r\n * @class Blend\r\n */\r\nvar Blend = (function () {\r\n    function Blend() {\r\n    }\r\n    /**\r\n     * Enable blending\r\n     */\r\n    Blend.enable = function () {\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        gl.enable(gl.BLEND);\r\n    };\r\n    /**\r\n     * Specify the equation used for both the RGB blend equation and the Alpha blend equation\r\n     * @param {BlendingEq} mode: Specifies how source and destination colors are combined\r\n     */\r\n    Blend.equation = function (mode) {\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        gl.blendEquation(mode);\r\n    };\r\n    /**\r\n     * Set the RGB blend equation and the alpha blend equation separately\r\n     * @param {BlendingEqu} modeRGB: Specifies the RGB blend equation,\r\n     *      how thered, green, and blue components of the source and\r\n     *      destination colors are combined.\r\n     * @param {BlendingEqu} modeAlpha: Specifies the alpha blend equation,\r\n     *      how the alpha component of the source and destination colors\r\n     *      are combined.\r\n     */\r\n    Blend.equationSeparate = function (modeRGB, modeAlpha) {\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        gl.blendEquationSeparate(modeRGB, modeAlpha);\r\n    };\r\n    Blend.prototype.getBlendEquRGB = function () {\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        return gl.getParameter(gl.BLEND_EQUATION_RGB);\r\n    };\r\n    Blend.prototype.getBlendEquAlpha = function () {\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        return gl.getParameter(gl.BLEND_EQUATION_ALPHA);\r\n    };\r\n    /**\r\n     * Set the blend color\r\n     * @param {number = 0.0} red\r\n     * @param {number = 0.0} green\r\n     * @param {number = 0.0} blue\r\n     * @param {number = 0.0} alpha\r\n     */\r\n    Blend.color = function (red, green, blue, alpha) {\r\n        if (red === void 0) { red = 0.0; }\r\n        if (green === void 0) { green = 0.0; }\r\n        if (blue === void 0) { blue = 0.0; }\r\n        if (alpha === void 0) { alpha = 0.0; }\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        gl.blendColor(red, green, blue, alpha);\r\n    };\r\n    /**\r\n     * Specify pixel arithmetic.\r\n     * @param {BlendingType = BlendingType.One} sfactor: Specifies how the red,\r\n     *     green, blue, and alpha source blending factors are computed.\r\n     * @param {BlendingType = BlendingType.Zero} dfactor: Specifies how the red,\r\n     *     green, blue, and alpha destination blending factors are computed.\r\n     */\r\n    Blend.func = function (sfactor, dfactor) {\r\n        if (sfactor === void 0) { sfactor = BlendingType_1[\"default\"].One; }\r\n        if (dfactor === void 0) { dfactor = BlendingType_1[\"default\"].Zero; }\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        gl.blendFunc(sfactor, dfactor);\r\n    };\r\n    /**\r\n     * Specify pixel arithmetic for RGB and alpha components separately.\r\n     * @param {BlendingType = BlendingType.One} rcRGB: Specifies how the red, green,\r\n     *      and blue blending factors are computed.\r\n     * @param {BlendingType = BlendingType.Zero} dstRGB: Specifies how the red, green,\r\n     *      and blue destination blending factors are computed.\r\n     * @param {BlendingType = BlendingType.One} srcAlpha: Specified how the alpha source\r\n     *      blending factor is computed.\r\n     * @param {BlendingType = BlendingType.Zero} dstAlpha: Specified how the alpha destination\r\n     *      blending factor is computed.\r\n     */\r\n    Blend.funcSeparate = function (srcRGB, dstRGB, srcAlpha, dstAlpha) {\r\n        if (srcRGB === void 0) { srcRGB = BlendingType_1[\"default\"].One; }\r\n        if (dstRGB === void 0) { dstRGB = BlendingType_1[\"default\"].Zero; }\r\n        if (srcAlpha === void 0) { srcAlpha = BlendingType_1[\"default\"].One; }\r\n        if (dstAlpha === void 0) { dstAlpha = BlendingType_1[\"default\"].Zero; }\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        gl.blendFuncSeparate(srcRGB, dstRGB, srcAlpha, dstAlpha);\r\n    };\r\n    /**\r\n     * Disable blending\r\n     */\r\n    Blend.disable = function () {\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        gl.disable(gl.BLEND);\r\n    };\r\n    /**\r\n     * Checks if blending is activated\r\n     * @return {boolean}: True if activated\r\n     */\r\n    Blend.isEnabled = function () {\r\n        var gl = context_1[\"default\"].getContext(); // Core.getInstance().getGL();\r\n        return gl.isEnabled(gl.BLEND);\r\n    };\r\n    return Blend;\r\n}());\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = Blend;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/core/blend.ts\n ** module id = 8\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"../core/context.ts\" />\r\nvar context_1 = require(\"../core/context\");\r\n\"use strict\";\r\nvar gl = context_1[\"default\"].getContext();\r\n// Blending type\r\nvar BlendingType;\r\n(function (BlendingType) {\r\n    BlendingType[BlendingType[\"Zero\"] = gl.ZERO] = \"Zero\";\r\n    BlendingType[BlendingType[\"One\"] = gl.ONE] = \"One\";\r\n    BlendingType[BlendingType[\"SrcColor\"] = gl.SRC_COLOR] = \"SrcColor\";\r\n    BlendingType[BlendingType[\"OneMinusSrcColor\"] = gl.ONE_MINUS_SRC_COLOR] = \"OneMinusSrcColor\";\r\n    BlendingType[BlendingType[\"SrcAlpha\"] = gl.SRC_ALPHA] = \"SrcAlpha\";\r\n    BlendingType[BlendingType[\"OneMinusSrcAlpha\"] = gl.ONE_MINUS_SRC_ALPHA] = \"OneMinusSrcAlpha\";\r\n    BlendingType[BlendingType[\"DstAlpha\"] = gl.DST_ALPHA] = \"DstAlpha\";\r\n    BlendingType[BlendingType[\"OneMinusDstAlpha\"] = gl.ONE_MINUS_DST_ALPHA] = \"OneMinusDstAlpha\";\r\n    BlendingType[BlendingType[\"DstColor\"] = gl.DST_COLOR] = \"DstColor\";\r\n    BlendingType[BlendingType[\"OneMinusDstColor\"] = gl.ONE_MINUS_DST_COLOR] = \"OneMinusDstColor\";\r\n    BlendingType[BlendingType[\"SrcAlphaSaturate\"] = gl.SRC_ALPHA_SATURATE] = \"SrcAlphaSaturate\";\r\n    BlendingType[BlendingType[\"CteColor\"] = gl.CONSTANT_COLOR] = \"CteColor\";\r\n    BlendingType[BlendingType[\"OneMinusCteColor\"] = gl.ONE_MINUS_CONSTANT_COLOR] = \"OneMinusCteColor\";\r\n    BlendingType[BlendingType[\"CteAlpha\"] = gl.CONSTANT_ALPHA] = \"CteAlpha\";\r\n    BlendingType[BlendingType[\"OneMinusCteAlpha\"] = gl.ONE_MINUS_CONSTANT_ALPHA] = \"OneMinusCteAlpha\";\r\n})(BlendingType || (BlendingType = {}));\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = BlendingType;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/constants/BlendingType.ts\n ** module id = 9\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"../core/context.ts\" />\r\nvar context_1 = require(\"../core/context\");\r\n\"use strict\";\r\nvar gl = context_1[\"default\"].getContext();\r\n// Comparison function\r\nvar ComparisonFunc;\r\n(function (ComparisonFunc) {\r\n    ComparisonFunc[ComparisonFunc[\"Never\"] = gl.NEVER] = \"Never\";\r\n    ComparisonFunc[ComparisonFunc[\"Always\"] = gl.ALWAYS] = \"Always\";\r\n    ComparisonFunc[ComparisonFunc[\"Less\"] = gl.LESS] = \"Less\";\r\n    ComparisonFunc[ComparisonFunc[\"Equal\"] = gl.EQUAL] = \"Equal\";\r\n    ComparisonFunc[ComparisonFunc[\"NotEqual\"] = gl.NOTEQUAL] = \"NotEqual\";\r\n    ComparisonFunc[ComparisonFunc[\"LessEqual\"] = gl.LEQUAL] = \"LessEqual\";\r\n    ComparisonFunc[ComparisonFunc[\"Greater\"] = gl.GREATER] = \"Greater\";\r\n    ComparisonFunc[ComparisonFunc[\"GreaterEqual\"] = gl.GEQUAL] = \"GreaterEqual\"; ///< Passes if source is greater than or equal to the destination\r\n})(ComparisonFunc || (ComparisonFunc = {}));\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = ComparisonFunc;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/constants/ComparisonFunc.ts\n ** module id = 10\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n/// <reference path=\"../../typings/vanilla-toasts/vanilla-toasts.d.ts\" />\r\n\"use strict\";\r\nvar ResourceMap;\r\n(function (ResourceMap) {\r\n    var MapEntry = (function () {\r\n        function MapEntry(resName) {\r\n            this._asset = resName;\r\n            this._refCount = 1;\r\n        }\r\n        MapEntry.prototype.getAsset = function () { return this._asset; };\r\n        MapEntry.prototype.setAsset = function (name) {\r\n            this._asset = name;\r\n        };\r\n        MapEntry.prototype.count = function () {\r\n            return this._refCount;\r\n        };\r\n        MapEntry.prototype.incCount = function () {\r\n            this._refCount++;\r\n        };\r\n        MapEntry.prototype.decCount = function () {\r\n            this._refCount--;\r\n        };\r\n        return MapEntry;\r\n    }());\r\n    ResourceMap.MapEntry = MapEntry;\r\n    /**\r\n     * [_numOutstandingLoads description]\r\n     * @type {number}\r\n     */\r\n    var _numOutstandingLoads = 0;\r\n    /**\r\n     * [_loadCompleteCallback description]\r\n     * @type {Function}\r\n     */\r\n    var _loadCompleteCallback = null;\r\n    /**\r\n     * [MapEntry description]\r\n     * @type {[type]}\r\n     */\r\n    ResourceMap._resourceMap = {};\r\n    /**\r\n     * @param {string}\r\n     */\r\n    function asyncLoadRequested(resName) {\r\n        ResourceMap._resourceMap[resName] = new MapEntry(resName);\r\n        ++_numOutstandingLoads;\r\n    }\r\n    ResourceMap.asyncLoadRequested = asyncLoadRequested;\r\n    ;\r\n    /**\r\n     * @param {string}\r\n     */\r\n    function asyncLoadFailed(resName) {\r\n        VanillaToasts.create({\r\n            title: resName + \" completed\",\r\n            text: \"\",\r\n            type: \"error\",\r\n            timeout: 2500\r\n        });\r\n        --_numOutstandingLoads;\r\n        _checkForAllLoadCompleted();\r\n    }\r\n    ResourceMap.asyncLoadFailed = asyncLoadFailed;\r\n    /**\r\n     * @param {string}\r\n     * @param {[type]}\r\n     */\r\n    function asyncLoadCompleted(resName, loadedAsset) {\r\n        if (!isAssetLoaded(resName)) {\r\n            VanillaToasts.create({\r\n                title: \"asyncLoadCompleted: [\" + resName + \"] not in map!\",\r\n                text: \"\",\r\n                type: \"error\",\r\n                timeout: 2500\r\n            });\r\n        }\r\n        VanillaToasts.create({\r\n            title: resName + \" completed\",\r\n            text: \"\",\r\n            type: \"success\",\r\n            timeout: 1500\r\n        });\r\n        ResourceMap._resourceMap[resName].setAsset(loadedAsset);\r\n        --_numOutstandingLoads;\r\n        _checkForAllLoadCompleted();\r\n    }\r\n    ResourceMap.asyncLoadCompleted = asyncLoadCompleted;\r\n    ;\r\n    /**\r\n     *\r\n     */\r\n    function _checkForAllLoadCompleted() {\r\n        if ((_numOutstandingLoads === 0) && (_loadCompleteCallback !== null)) {\r\n            var funToCall = _loadCompleteCallback;\r\n            _loadCompleteCallback = null;\r\n            funToCall();\r\n        }\r\n    }\r\n    ;\r\n    /**\r\n     * Set callback function that called when all assets have finished loading.\r\n     * @param {Function}\r\n     */\r\n    function setLoadCompleteCallback(fn) {\r\n        _loadCompleteCallback = fn;\r\n        _checkForAllLoadCompleted();\r\n    }\r\n    ResourceMap.setLoadCompleteCallback = setLoadCompleteCallback;\r\n    ;\r\n    /**\r\n     * Get asset from alias/name\r\n     * @param  {string} resName [description]\r\n     * @return {any}\r\n     */\r\n    function retrieveAsset(resName) {\r\n        var r = null;\r\n        if (resName in ResourceMap._resourceMap) {\r\n            r = ResourceMap._resourceMap[resName].getAsset();\r\n        }\r\n        else {\r\n            alert(\"retrieveAsset: [\" + resName + \"] not in map!\");\r\n        }\r\n        return r;\r\n    }\r\n    ResourceMap.retrieveAsset = retrieveAsset;\r\n    ;\r\n    /**\r\n     * Check whether the resource has already been loaded.\r\n     * @param  {string} resName: Resource name\r\n     * @return {boolean}: True if resource exist\r\n     */\r\n    function isAssetLoaded(resName) {\r\n        return (resName in ResourceMap._resourceMap);\r\n    }\r\n    ResourceMap.isAssetLoaded = isAssetLoaded;\r\n    ;\r\n    /**\r\n     * @param {string}\r\n     */\r\n    function incAssetRefCount(resName) {\r\n        ResourceMap._resourceMap[resName].incCount();\r\n    }\r\n    ResourceMap.incAssetRefCount = incAssetRefCount;\r\n    ;\r\n    /**\r\n     * Unload a existing resource.\r\n     * @param {string}\r\n     */\r\n    function unloadAsset(resName) {\r\n        var c = 0;\r\n        if (resName in ResourceMap._resourceMap) {\r\n            ResourceMap._resourceMap[resName].decCount();\r\n            c = ResourceMap._resourceMap[resName].count();\r\n            if (c === 0) {\r\n                delete ResourceMap._resourceMap[resName];\r\n            }\r\n        }\r\n        return c;\r\n    }\r\n    ResourceMap.unloadAsset = unloadAsset;\r\n    ;\r\n})(ResourceMap || (ResourceMap = {}));\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = ResourceMap;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/resources/resourceMap.ts\n ** module id = 11\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\nvar Timer;\r\n(function (Timer) {\r\n    var _lastTime = Date.now();\r\n    var _deltaTime = 0.0;\r\n    var _currentTime, _timeElapsed;\r\n    /**\r\n     *\r\n     */\r\n    function update() {\r\n        _currentTime = Date.now();\r\n        _timeElapsed = _currentTime - _lastTime;\r\n        _deltaTime = _timeElapsed;\r\n        _lastTime = _currentTime;\r\n    }\r\n    Timer.update = update;\r\n    /**\r\n     * @return {number}\r\n     */\r\n    function deltaTime() {\r\n        return _deltaTime;\r\n    }\r\n    Timer.deltaTime = deltaTime;\r\n})(Timer || (Timer = {}));\r\nexports.__esModule = true;\r\nexports[\"default\"] = Timer;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/extras/timer.ts\n ** module id = 12\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\n/// <reference path=\"drawable.ts\" />\r\nvar drawable_1 = require(\"./drawable\");\r\n\"use strict\";\r\n/**\r\n * Sphere class\r\n * @class Sphere\r\n */\r\nvar Sphere = (function (_super) {\r\n    __extends(Sphere, _super);\r\n    /**\r\n     * Sphere constructor\r\n     * @param {number} radius [description]\r\n     * @param {number} slices [description]\r\n     * @param {number} stacks [description]\r\n     */\r\n    function Sphere(radius, slices, stacks) {\r\n        _super.call(this);\r\n        var nv = (slices + 1) * (stacks + 1);\r\n        var elements = (slices * 2 * (stacks - 1)) * 3;\r\n        // v\r\n        var v = new Array(3 * nv);\r\n        // Normals\r\n        var n = new Array(3 * nv);\r\n        // Tex coords\r\n        var tex = new Array(2 * nv);\r\n        // Elements\r\n        var el = new Array(elements);\r\n        // Generate the vertex data\r\n        // Generate positions and normals\r\n        var theta, phi;\r\n        var thetaFac = Math.PI * 2.0 / slices;\r\n        var phiFac = Math.PI / stacks;\r\n        var nx, ny, nz, s, t;\r\n        var idx = 0, tIdx = 0;\r\n        for (var i = 0; i <= slices; ++i) {\r\n            theta = i * thetaFac;\r\n            s = i / slices;\r\n            for (var j = 0; j <= stacks; ++j) {\r\n                phi = j * phiFac;\r\n                t = j / stacks;\r\n                nx = Math.sin(phi) * Math.cos(theta);\r\n                ny = Math.sin(phi) * Math.sin(theta);\r\n                nz = Math.cos(phi);\r\n                v[idx] = radius * nx;\r\n                v[idx + 1] = radius * ny;\r\n                v[idx + 2] = radius * nz;\r\n                n[idx] = nx;\r\n                n[idx + 1] = ny;\r\n                n[idx + 2] = nz;\r\n                idx += 3;\r\n                tex[tIdx] = s;\r\n                tex[tIdx + 1] = t;\r\n                tIdx += 2;\r\n            }\r\n        }\r\n        // Generate the element list\r\n        idx = 0;\r\n        for (var i = 0; i < slices; ++i) {\r\n            var stackStart = i * (stacks + 1);\r\n            var nextStackStart = (i + 1) * (stacks + 1);\r\n            for (var j = 0; j < stacks; ++j) {\r\n                if (j === 0) {\r\n                    el[idx] = stackStart;\r\n                    el[idx + 1] = stackStart + 1;\r\n                    el[idx + 2] = nextStackStart + 1;\r\n                    idx += 3;\r\n                }\r\n                else if (j === stacks - 1) {\r\n                    el[idx] = stackStart + j;\r\n                    el[idx + 1] = stackStart + j + 1;\r\n                    el[idx + 2] = nextStackStart + j;\r\n                    idx += 3;\r\n                }\r\n                else {\r\n                    el[idx] = stackStart + j;\r\n                    el[idx + 1] = stackStart + j + 1;\r\n                    el[idx + 2] = nextStackStart + j + 1;\r\n                    el[idx + 3] = nextStackStart + j;\r\n                    el[idx + 4] = stackStart + j;\r\n                    el[idx + 5] = nextStackStart + j + 1;\r\n                    idx += 6;\r\n                }\r\n            }\r\n        }\r\n        this._handle = [];\r\n        this._vao.bind();\r\n        this.addElementArray(new Uint16Array(el));\r\n        this.addBufferArray(0, new Float32Array(v), 3);\r\n        this.addBufferArray(1, new Float32Array(n), 3);\r\n        this.addBufferArray(2, new Float32Array(tex), 2);\r\n        this._indicesLen = el.length;\r\n    }\r\n    return Sphere;\r\n}(drawable_1[\"default\"]));\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = Sphere;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/models/sphere.ts\n ** module id = 13\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"../core/core.ts\" />\r\n/// <reference path=\"../core/vertexArray.ts\" />\r\n/// <reference path=\"../core/vertexBuffer.ts\" />\r\n/// <reference path=\"../constants/_constants.ts\" />\r\n/// <reference path=\"../extras/extensions.ts\" />\r\nvar core_ts_1 = require(\"../core/core.ts\");\r\nvar vertexArray_ts_1 = require(\"../core/vertexArray.ts\");\r\nvar vertexBuffer_ts_1 = require(\"../core/vertexBuffer.ts\");\r\nvar UsageType_ts_1 = require(\"../constants/UsageType.ts\");\r\nvar BufferType_ts_1 = require(\"../constants/BufferType.ts\");\r\nvar extensions_1 = require(\"../extras/extensions\");\r\n\"use strict\";\r\nvar gl = core_ts_1[\"default\"].getInstance().getGL();\r\n/**\r\n * Drawable abstract class\r\n * @class Drawable\r\n */\r\nvar Drawable = (function () {\r\n    /**\r\n     * Drawable constructor\r\n     */\r\n    function Drawable() {\r\n        this._vao = new vertexArray_ts_1[\"default\"]();\r\n    }\r\n    ;\r\n    /**\r\n     * Add Element buffer object.\r\n     * @param {Uint16Array} data [description]\r\n     * @param {UsageType = UsageType.StaticDraw} type [description]\r\n     */\r\n    Drawable.prototype.addElementArray = function (data, type) {\r\n        if (type === void 0) { type = UsageType_ts_1[\"default\"].StaticDraw; }\r\n        var vb = new vertexBuffer_ts_1[\"default\"](BufferType_ts_1[\"default\"].ElementArray);\r\n        vb.bufferData(new Uint16Array(data), type);\r\n        this._handle.push(vb);\r\n        return vb;\r\n    };\r\n    ;\r\n    /**\r\n     * Add Vertex buffer object.\r\n     * @param  {number} attribLocation [description]\r\n     * @param  {Float32Array} data [description]\r\n     * @param  {number} numElems [description]\r\n     * @param  {UsageType = UsageType.StaticDraw} type [description]\r\n     * @return {VertexBuffer} [description]\r\n     */\r\n    Drawable.prototype.addBufferArray = function (attribLocation, data, numElems, type) {\r\n        if (type === void 0) { type = UsageType_ts_1[\"default\"].StaticDraw; }\r\n        var vb = new vertexBuffer_ts_1[\"default\"](BufferType_ts_1[\"default\"].Array);\r\n        vb.bufferData(data, type);\r\n        vb.vertexAttribPointer(attribLocation, numElems, gl.FLOAT);\r\n        this._handle.push(vb);\r\n        return vb;\r\n    };\r\n    ;\r\n    /**\r\n     * Normal render\r\n     */\r\n    Drawable.prototype.render = function () {\r\n        this._vao.bind();\r\n        gl.drawElements(gl.TRIANGLES, this._indicesLen, gl.UNSIGNED_SHORT, 0);\r\n        this._vao.unbind();\r\n    };\r\n    ;\r\n    /**\r\n     * Render with element instance mode\r\n     * @param {number} numInstances: Instances to render\r\n     */\r\n    Drawable.prototype.renderElementInstance = function (numInstances) {\r\n        this._vao.bind();\r\n        if (gl instanceof WebGL2RenderingContext) {\r\n            gl.drawElementsInstanced(gl.TRIANGLES, this._indicesLen, gl.UNSIGNED_SHORT, 0, numInstances);\r\n        }\r\n        else {\r\n            var ext = extensions_1[\"default\"].get(\"ANGLE_instanced_arrays\");\r\n            if (ext) {\r\n                ext.drawElementsInstancedANGLE(gl.TRIANGLES, this._indicesLen, gl.UNSIGNED_SHORT, 0, numInstances);\r\n            }\r\n        }\r\n        this._vao.unbind();\r\n    };\r\n    ;\r\n    /**\r\n     * Render with array instance mode\r\n     * @param {number} numInstances: Instances to render\r\n     */\r\n    Drawable.prototype.renderArrayInstance = function (numInstances) {\r\n        this._vao.bind();\r\n        if (gl instanceof WebGL2RenderingContext) {\r\n            gl.drawArraysInstanced(gl.TRIANGLES, 0, this._indicesLen, numInstances);\r\n        }\r\n        else {\r\n            var ext = extensions_1[\"default\"].get(\"ANGLE_instanced_arrays\");\r\n            if (ext) {\r\n                ext.drawArraysInstancedANGLE(gl.TRIANGLES, 0, this._indicesLen, numInstances);\r\n            }\r\n        }\r\n        this._vao.unbind();\r\n    };\r\n    ;\r\n    return Drawable;\r\n}());\r\nexports.__esModule = true;\r\nexports[\"default\"] = Drawable;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/models/drawable.ts\n ** module id = 14\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"../core/core.ts\" />\r\n/// <reference path=\"../extras/extensions.ts\" />\r\nvar core_1 = require(\"../core/core\");\r\nvar extensions_1 = require(\"../extras/extensions\");\r\n\"use strict\";\r\n// TODO: Move to core\r\nvar gl = core_1[\"default\"].getInstance().getGL();\r\nvar VertexArray = (function () {\r\n    /**\r\n     * Vertex array constructor\r\n     * @param {WebGLVertexArrayObject} vao [description]\r\n     */\r\n    function VertexArray(vao /**/) {\r\n        if (vao !== undefined) {\r\n            this._handle = vao;\r\n        }\r\n        else {\r\n            if (gl instanceof WebGL2RenderingContext) {\r\n                this._handle = gl.createVertexArray();\r\n            }\r\n            else {\r\n                var ext = extensions_1[\"default\"].get(\"OES_vertex_array_object\");\r\n                if (ext) {\r\n                    this._handle = ext.createVertexArrayOES();\r\n                }\r\n            }\r\n        }\r\n        this.bind();\r\n    }\r\n    /**\r\n     * [wrap description]\r\n     * @param {WebGLVertexArrayObject} vao [description]\r\n     */\r\n    VertexArray.wrap = function (vao /*WebGLVertexArrayObject*/) {\r\n        return new VertexArray(vao);\r\n    };\r\n    /**\r\n     * [bind description]\r\n     */\r\n    VertexArray.prototype.bind = function () {\r\n        if (gl instanceof WebGL2RenderingContext) {\r\n            gl.bindVertexArray(this._handle);\r\n            return;\r\n        }\r\n        var ext = extensions_1[\"default\"].get(\"OES_vertex_array_object\");\r\n        if (ext) {\r\n            ext.bindVertexArrayOES(this._handle);\r\n        }\r\n    };\r\n    /**\r\n     * [unbind description]\r\n     */\r\n    VertexArray.prototype.unbind = function () {\r\n        if (gl instanceof WebGL2RenderingContext) {\r\n            gl.bindVertexArray(null);\r\n            return;\r\n        }\r\n        var ext = extensions_1[\"default\"].get(\"OES_vertex_array_object\");\r\n        if (ext) {\r\n            ext.bindVertexArrayOES(null);\r\n        }\r\n    };\r\n    /**\r\n     * Destroy vertex array\r\n     */\r\n    VertexArray.prototype.destroy = function () {\r\n        this.bind();\r\n        if (gl instanceof WebGL2RenderingContext) {\r\n            gl.deleteVertexArray(this._handle);\r\n            return;\r\n        }\r\n        var ext = extensions_1[\"default\"].get(\"OES_vertex_array_object\");\r\n        if (ext) {\r\n            ext.deleteVertexArrayOES(this._handle);\r\n        }\r\n    };\r\n    /**\r\n     * Check if current context supports VertexArray\r\n     * @return {boolean} True if current context supports VertexArray\r\n     */\r\n    VertexArray.isSupported = function () {\r\n        return gl instanceof WebGL2RenderingContext ||\r\n            extensions_1[\"default\"].get(\"OES_vertex_array_object\");\r\n    };\r\n    return VertexArray;\r\n}());\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = VertexArray;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/core/vertexArray.ts\n ** module id = 15\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"../core/core.ts\" />\r\nvar core_1 = require(\"../core/core\");\r\n\"use strict\";\r\nvar gl = core_1[\"default\"].getInstance().getGL();\r\n// TODO: UNUSED\r\nvar extensions;\r\n(function (extensions) {\r\n    /**\r\n     * [_extensions description]\r\n     * @type {Object}\r\n     */\r\n    var _extensions = {};\r\n    /**\r\n     * [get description]\r\n     * @param {string} name [description]\r\n     */\r\n    function get(name) {\r\n        if (name in _extensions) {\r\n            return _extensions[name];\r\n        }\r\n        var ext = gl.getExtension(name) || gl.getExtension(\"WEBKIT_\" + name) || gl.getExtension(\"MOZ_\" + name);\r\n        if (ext === null) {\r\n            console.warn(name + \" extension not supported.\");\r\n            return;\r\n        }\r\n        _extensions[name] = ext;\r\n        return ext;\r\n    }\r\n    extensions.get = get;\r\n})(extensions || (extensions = {}));\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = extensions;\r\n// const ext = gl_.getExtension(\"OES_draw_buffers_indexed\");\r\n// console.log(ext);\r\n/*let arr = [\r\n    'OES_element_index_uint',\r\n    'EXT_sRGB',\r\n    'EXT_blend_minmax',\r\n    'EXT_frag_depth',\r\n    'WEBGL_depth_texture',\r\n    'WEBKIT_WEBGL_depth_texture',\r\n    'EXT_shader_texture_lod',\r\n    'OES_standard_derivatives',\r\n    'OES_texture_float',\r\n    'OES_texture_half_float',\r\n    'OES_texture_half_float_linear',\r\n    'OES_vertex_array_object',\r\n    'WEBGL_draw_buffers',\r\n    'OES_fbo_render_mipmap',\r\n    'ANGLE_instanced_arrays'\r\n];\r\n\r\narr.forEach((v: string) => {\r\n    console.log(v);\r\n    console.log(gl_.getExtension(v));\r\n});*/\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/extras/extensions.ts\n ** module id = 16\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"../core/core.ts\" />\r\n/// <reference path=\"../constants/_constants.ts\" />\r\nvar core_1 = require(\"../core/core\");\r\nvar BufferType_1 = require(\"../constants/BufferType\");\r\nvar UsageType_1 = require(\"../constants/UsageType\");\r\n\"use strict\";\r\n// TODO: Move to core\r\nvar gl = core_1[\"default\"].getInstance().getGL();\r\nvar VertexBuffer = (function () {\r\n    /**\r\n     * Vertex buffer constructor\r\n     * @param {BufferType = BufferType.Array}\r\n     */\r\n    function VertexBuffer(type) {\r\n        if (type === void 0) { type = BufferType_1[\"default\"].Array; }\r\n        /**\r\n         * [_type description]\r\n         * @type {BufferType}\r\n         */\r\n        this._type = BufferType_1[\"default\"].Array;\r\n        this._buffer = gl.createBuffer();\r\n        this._type = type;\r\n        this.bind();\r\n    }\r\n    /**\r\n     * [bind description]\r\n     * @param {BufferType} type [description]\r\n     */\r\n    VertexBuffer.prototype.bind = function (type) {\r\n        if (type !== undefined) {\r\n            this._type = type;\r\n        }\r\n        gl.bindBuffer(this._type, this._buffer);\r\n    };\r\n    /**\r\n     * [unbind description]\r\n     */\r\n    VertexBuffer.prototype.unbind = function () {\r\n        gl.bindBuffer(this._type, null);\r\n    };\r\n    /**\r\n     * [getBufferType description]\r\n     * @return {BufferType} [description]\r\n     */\r\n    VertexBuffer.prototype.getBufferType = function () {\r\n        return this._type;\r\n    };\r\n    /**\r\n     * [getBuffer description]\r\n     * @return {WebGLBuffer} [description]\r\n     */\r\n    VertexBuffer.prototype.getBuffer = function () {\r\n        return this._buffer;\r\n    };\r\n    /**\r\n     * [destroy description]\r\n     */\r\n    VertexBuffer.prototype.destroy = function () {\r\n        gl.bindBuffer(this._type, 0);\r\n        if (!this._buffer) {\r\n            gl.deleteBuffer(this._buffer);\r\n        }\r\n        this._buffer = null;\r\n    };\r\n    /**\r\n     * [bufferData description]\r\n     * @param {Float32Array | Uint16Array}          data  [description]\r\n     * @param {UsageType    = UsageType.StaticDraw} usage [description]\r\n     */\r\n    VertexBuffer.prototype.bufferData = function (data, usage) {\r\n        if (usage === void 0) { usage = UsageType_1[\"default\"].StaticDraw; }\r\n        this.bind();\r\n        gl.bufferData(this._type, data, usage);\r\n    };\r\n    /**\r\n     * [attribDivisor description]\r\n     * @param {number}    position [description]\r\n     * @param {number}    length   [description]\r\n     * @param {number}    divisor  [description]\r\n     * @param {number =        0}           stride [description]\r\n     */\r\n    VertexBuffer.prototype.attribDivisor = function (position, length, divisor, stride) {\r\n        if (stride === void 0) { stride = 0; }\r\n        this.bind();\r\n        gl.enableVertexAttribArray(position);\r\n        gl.vertexAttribPointer(position, length, gl.FLOAT, false, length * Float32Array.BYTES_PER_ELEMENT, 0);\r\n        gl.vertexAttribDivisor(position, divisor);\r\n    };\r\n    /**\r\n     * [vertexAttribPointer description]\r\n     * @param {number}     attribLocation [description]\r\n     * @param {number}     numElems       [description]\r\n     * @param {number}     type           [description]\r\n     * @param {boolean =              false}       normalized [description]\r\n     * @param {number  =              0}           offset     [description]\r\n     */\r\n    VertexBuffer.prototype.vertexAttribPointer = function (attribLocation, numElems, type, normalized, offset) {\r\n        if (normalized === void 0) { normalized = false; }\r\n        if (offset === void 0) { offset = 0; }\r\n        this.bind();\r\n        gl.enableVertexAttribArray(attribLocation);\r\n        gl.vertexAttribPointer(attribLocation, // Attribute location\r\n        numElems, // Number of elements per attribute\r\n        type, // Type of elements\r\n        normalized, numElems * Float32Array.BYTES_PER_ELEMENT, // Size of an individual vertex\r\n        offset // Offset from the beginning of a single vertex to this attribute\r\n        );\r\n    };\r\n    return VertexBuffer;\r\n}());\r\nexports.__esModule = true;\r\nexports[\"default\"] = VertexBuffer;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/core/vertexBuffer.ts\n ** module id = 17\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"../core/context.ts\" />\r\nvar context_1 = require(\"../core/context\");\r\n\"use strict\";\r\nvar gl = context_1[\"default\"].getContext();\r\n// Array buffer type\r\nvar BufferType;\r\n(function (BufferType) {\r\n    BufferType[BufferType[\"Array\"] = gl.ARRAY_BUFFER] = \"Array\";\r\n    BufferType[BufferType[\"ElementArray\"] = gl.ELEMENT_ARRAY_BUFFER] = \"ElementArray\";\r\n    BufferType[BufferType[\"TransformFeedback\"] = gl.TRANSFORM_FEEDBACK_BUFFER] = \"TransformFeedback\";\r\n    BufferType[BufferType[\"Uniform\"] = gl.UNIFORM_BUFFER] = \"Uniform\";\r\n    BufferType[BufferType[\"PixelPack\"] = gl.PIXEL_PACK_BUFFER] = \"PixelPack\";\r\n    BufferType[BufferType[\"PixelUnpack\"] = gl.PIXEL_UNPACK_BUFFER] = \"PixelUnpack\";\r\n    BufferType[BufferType[\"CopyRead\"] = gl.COPY_READ_BUFFER] = \"CopyRead\";\r\n    BufferType[BufferType[\"CopyWrite\"] = gl.COPY_WRITE_BUFFER] = \"CopyWrite\";\r\n})(BufferType || (BufferType = {}));\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = BufferType;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/constants/BufferType.ts\n ** module id = 18\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"../core/context.ts\" />\r\nvar context_1 = require(\"../core/context\");\r\n\"use strict\";\r\nvar gl = context_1[\"default\"].getContext();\r\n// Usage type\r\nvar UsageType;\r\n(function (UsageType) {\r\n    UsageType[UsageType[\"StaticDraw\"] = gl.STATIC_DRAW] = \"StaticDraw\";\r\n    UsageType[UsageType[\"DynamicDraw\"] = gl.DYNAMIC_DRAW] = \"DynamicDraw\";\r\n    UsageType[UsageType[\"StreamDraw\"] = gl.STREAM_DRAW] = \"StreamDraw\";\r\n    UsageType[UsageType[\"StaticRead\"] = gl.STATIC_READ] = \"StaticRead\";\r\n    UsageType[UsageType[\"DynamicRead\"] = gl.DYNAMIC_READ] = \"DynamicRead\";\r\n    UsageType[UsageType[\"StreamRead\"] = gl.STREAM_READ] = \"StreamRead\";\r\n    UsageType[UsageType[\"StaticCopy\"] = gl.STATIC_COPY] = \"StaticCopy\";\r\n    UsageType[UsageType[\"DynamicCopy\"] = gl.DYNAMIC_COPY] = \"DynamicCopy\";\r\n    UsageType[UsageType[\"StreamCopy\"] = gl.STREAM_COPY] = \"StreamCopy\";\r\n})(UsageType || (UsageType = {}));\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = UsageType;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/constants/UsageType.ts\n ** module id = 19\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\n/// <reference path=\"drawable.ts\" />\r\nvar drawable_1 = require(\"./drawable\");\r\n\"use strict\";\r\n/**\r\n * Mesh class\r\n * @class Mesh\r\n */\r\nvar Mesh = (function (_super) {\r\n    __extends(Mesh, _super);\r\n    /**\r\n     * Mesh definition\r\n     * @param {string} fileRoute: Json file route\r\n     */\r\n    function Mesh(fileRoute) {\r\n        _super.call(this);\r\n        this.loadJSON(fileRoute);\r\n    }\r\n    /**\r\n     * Vao construction\r\n     * @param {[type]} model: Model object in JSON format\r\n     * @param {[type]} el: Indices array\r\n     */\r\n    Mesh.prototype.createVAO = function (model, el) {\r\n        this._handle = [];\r\n        this._vao.bind();\r\n        // console.log(model.meshes[0]);\r\n        if (model.meshes[0].vertices) {\r\n            var verts = model.meshes[0].vertices;\r\n            this.addBufferArray(0, new Float32Array(verts), 3);\r\n        }\r\n        if (model.meshes[0].normals) {\r\n            var norms = model.meshes[0].normals;\r\n            this.addBufferArray(1, new Float32Array(norms), 3);\r\n        }\r\n        if (model.meshes[0].texturecoords) {\r\n            var tc = model.meshes[0].texturecoords[0];\r\n            this.addBufferArray(2, new Float32Array(tc), 2);\r\n        }\r\n        this.addElementArray(new Uint16Array(el));\r\n        this._vao.unbind();\r\n        this._indicesLen = el.length;\r\n    };\r\n    /**\r\n     * Read JSON file\r\n     * @param {string} url: Json file route\r\n     */\r\n    Mesh.prototype.loadJSON = function (url) {\r\n        var request = new XMLHttpRequest();\r\n        request.open(\"GET\", url, false);\r\n        var self = this;\r\n        request.onload = function () {\r\n            if (request.status < 200 || request.status > 299) {\r\n                console.log(\"Error: HTTP Status \" + request.status + \" on resource \" + url);\r\n                return {};\r\n            }\r\n            else {\r\n                var modelObj = JSON.parse(request.responseText);\r\n                self.createVAO(modelObj, [].concat.apply([], modelObj.meshes[0].faces));\r\n            }\r\n        };\r\n        request.send();\r\n    };\r\n    return Mesh;\r\n}(drawable_1[\"default\"]));\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = Mesh;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/models/mesh.ts\n ** module id = 20\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\n/// <reference path=\"texture.ts\" />\r\n/// <reference path=\"texOptions.ts\" />\r\n/// <reference path=\"../extras/extensions.ts\" />\r\nvar core_1 = require(\"../core/core\");\r\nvar texture_1 = require(\"./texture\");\r\nvar extensions_1 = require(\"../extras/extensions\");\r\n\"use strict\";\r\nvar gl = core_1[\"default\"].getInstance().getGL();\r\n// TODO: Es necesario realmente el tamaño??\r\nvar Texture2D = (function (_super) {\r\n    __extends(Texture2D, _super);\r\n    function Texture2D(data /*: ImageData*/, options, onSuccess) {\r\n        if (options === void 0) { options = {}; }\r\n        if (onSuccess === void 0) { onSuccess = null; }\r\n        _super.call(this, gl.TEXTURE_2D);\r\n        // options = options || {};\r\n        // TODO: Support compression\r\n        this._flipY = options[\"flipY\"] === true;\r\n        this._handle = gl.createTexture();\r\n        var _internalformat = options[\"internalformat\"] || gl.RGBA;\r\n        var _format = options[\"format\"] || gl.RGBA;\r\n        var _type = options[\"type\"] || gl.UNSIGNED_BYTE;\r\n        var _level = options[\"level\"] || 0;\r\n        this._minFilter = options[\"minFilter\"] || gl.NEAREST;\r\n        this._magFilter = options[\"magFilter\"] || gl.NEAREST;\r\n        var wraps = options[\"wrap\"] || [gl.CLAMP_TO_EDGE, gl.CLAMP_TO_EDGE];\r\n        this.bind();\r\n        gl.texImage2D(this._target, _level, // Level of details\r\n        _internalformat, // Internal format\r\n        _format, // Format\r\n        _type, // Size of each channel\r\n        data);\r\n        gl.texParameteri(this._target, gl.TEXTURE_MIN_FILTER, this._minFilter);\r\n        gl.texParameteri(this._target, gl.TEXTURE_MAG_FILTER, this._magFilter);\r\n        this.wrap(wraps);\r\n        /*// Prevent NPOT textures\r\n        // gl.NEAREST is also allowed, instead of gl.LINEAR, as neither mipmap.\r\n        gl.texParameteri(this._target, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n        // Prevents s-coordinate wrapping (repeating).\r\n        gl.texParameteri(this._target, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n        // Prevents t-coordinate wrapping (repeating).\r\n        gl.texParameteri(this._target, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);*/\r\n        if (onSuccess) {\r\n            onSuccess();\r\n        }\r\n    }\r\n    Texture2D.prototype.genMipMap = function () {\r\n        this.bind();\r\n        // TODO: Check NPOT??\r\n        gl.generateMipmap(this._target);\r\n    };\r\n    Texture2D.prototype.wrap = function (modes) {\r\n        if (modes.length !== 2) {\r\n            throw new Error(\"Must specify wrapS, wrapT modes\");\r\n        }\r\n        this.bind();\r\n        gl.texParameteri(this._target, gl.TEXTURE_WRAP_S, modes[0]);\r\n        gl.texParameteri(this._target, gl.TEXTURE_WRAP_T, modes[1]);\r\n        this._wraps = modes;\r\n    };\r\n    Texture2D.prototype.minFilter = function (filter) {\r\n        this.bind();\r\n        gl.texParameteri(this._target, gl.TEXTURE_MIN_FILTER, filter);\r\n        this._minFilter = filter;\r\n    };\r\n    Texture2D.prototype.magFilter = function (filter) {\r\n        this.bind();\r\n        gl.texParameteri(this._target, gl.TEXTURE_MAG_FILTER, filter);\r\n        this._magFilter = filter;\r\n    };\r\n    Texture2D.prototype.bind = function (slot) {\r\n        if (typeof slot === \"number\") {\r\n            gl.activeTexture(gl.TEXTURE0 + slot);\r\n        }\r\n        gl.bindTexture(this._target, this._handle);\r\n    };\r\n    Texture2D.prototype.unbind = function () {\r\n        gl.bindTexture(this._target, null);\r\n    };\r\n    Texture2D.prototype.destroy = function () {\r\n        gl.deleteTexture(this._handle);\r\n        this._handle = null;\r\n    };\r\n    /*public setPixelStorage() {\r\n        //gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this.premultiplyAlpha)\r\n        //gl.pixelStorei(gl.UNPACK_ALIGNMENT, this.unpackAlignment)\r\n        //gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, this.flipY)\r\n    }*/\r\n    /**\r\n     * Set texture anisotropic level\r\n     * @param {number = 0} level: Anisotropic level\r\n     */\r\n    Texture2D.prototype.setAnisotropic = function (level) {\r\n        if (level === void 0) { level = 0; }\r\n        level = Math.floor(level);\r\n        var ext = extensions_1[\"default\"].get(\"EXT_texture_filter_anisotropic\");\r\n        var max_anisotropy = gl.getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT);\r\n        if (max_anisotropy < level) {\r\n            gl.texParameterf(this._target, ext.TEXTURE_MAX_ANISOTROPY_EXT, level);\r\n        }\r\n    };\r\n    return Texture2D;\r\n}(texture_1[\"default\"]));\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = Texture2D;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/textures/texture2d.ts\n ** module id = 21\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"../core/core.ts\" />\r\n/// <reference path=\"../maths/vector2.ts\" />\r\nvar core_1 = require(\"../core/core\");\r\n\"use strict\";\r\n// TODO: Redimension\r\nvar Texture = (function () {\r\n    function Texture(target) {\r\n        this._target = target;\r\n    }\r\n    Texture.prototype.handle = function () {\r\n        return this._handle;\r\n    };\r\n    Texture.prototype.setLOD = function (lod) {\r\n        var gl = core_1[\"default\"].getInstance().getGL();\r\n        gl.texParameterf(this._target, gl.TEXTURE_MIN_LOD, lod);\r\n        gl.texParameterf(this._target, gl.TEXTURE_MAX_LOD, lod);\r\n    };\r\n    // TODO: Move to abstract methods\r\n    Texture.prototype.getHeight = function () { return -1; };\r\n    Texture.prototype.getWidth = function () { return -1; };\r\n    return Texture;\r\n}());\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = Texture;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/textures/texture.ts\n ** module id = 22\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\n/// <reference path=\"texture.ts\" />\r\n/// <reference path=\"texOptions.ts\" />\r\nvar core_1 = require(\"../core/core\");\r\nvar texture_1 = require(\"./texture\");\r\n\"use strict\";\r\nvar gl = core_1[\"default\"].getInstance().getGL();\r\nvar SimpleTexture2D = (function (_super) {\r\n    __extends(SimpleTexture2D, _super);\r\n    function SimpleTexture2D(size, options) {\r\n        if (options === void 0) { options = {}; }\r\n        _super.call(this, gl.TEXTURE_2D);\r\n        options = options || {};\r\n        this._handle = gl.createTexture();\r\n        // TODO: Support compression\r\n        this._flipY = options.flipY === true;\r\n        var _internalformat = options.internalFormat || gl.RGBA;\r\n        var _format = options.format || gl.RGBA;\r\n        var _type = options.type || gl.UNSIGNED_BYTE;\r\n        var _level = options.level || 0;\r\n        this._minFilter = options.minFilter || gl.NEAREST;\r\n        this._magFilter = options.magFilter || gl.NEAREST;\r\n        var wraps = [\r\n            options.wrapS || gl.CLAMP_TO_EDGE,\r\n            options.wrapT || gl.CLAMP_TO_EDGE,\r\n        ];\r\n        this.bind();\r\n        gl.texImage2D(this._target, _level, // Level of details\r\n        _internalformat, // Internal format\r\n        size.x, size.y, 0, _format, // Format\r\n        _type, // Size of each channel\r\n        null);\r\n        gl.texParameteri(this._target, gl.TEXTURE_MIN_FILTER, this._minFilter);\r\n        gl.texParameteri(this._target, gl.TEXTURE_MAG_FILTER, this._magFilter);\r\n        this.wrap(wraps);\r\n        /*// Prevent NPOT textures\r\n        // gl.NEAREST is also allowed, instead of gl.LINEAR, as neither mipmap.\r\n        gl.texParameteri(this._target, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n        // Prevents s-coordinate wrapping (repeating).\r\n        gl.texParameteri(this._target, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n        // Prevents t-coordinate wrapping (repeating).\r\n        gl.texParameteri(this._target, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);*/\r\n    }\r\n    SimpleTexture2D.prototype.genMipMap = function () {\r\n        var gl = core_1[\"default\"].getInstance().getGL();\r\n        this.bind();\r\n        // TODO: Check NPOT??\r\n        gl.generateMipmap(this._target);\r\n    };\r\n    SimpleTexture2D.prototype.wrap = function (modes) {\r\n        if (modes.length !== 2) {\r\n            throw new Error(\"Must specify wrapS, wrapT modes\");\r\n        }\r\n        this.bind();\r\n        gl.texParameteri(this._target, gl.TEXTURE_WRAP_S, modes[0]);\r\n        gl.texParameteri(this._target, gl.TEXTURE_WRAP_T, modes[1]);\r\n        this._wraps = modes;\r\n    };\r\n    SimpleTexture2D.prototype.minFilter = function (filter) {\r\n        this.bind();\r\n        gl.texParameteri(this._target, gl.TEXTURE_MIN_FILTER, filter);\r\n        this._minFilter = filter;\r\n    };\r\n    SimpleTexture2D.prototype.magFilter = function (filter) {\r\n        this.bind();\r\n        gl.texParameteri(this._target, gl.TEXTURE_MAG_FILTER, filter);\r\n        this._magFilter = filter;\r\n    };\r\n    SimpleTexture2D.prototype.bind = function (slot) {\r\n        if (typeof slot === \"number\") {\r\n            gl.activeTexture(gl.TEXTURE0 + slot);\r\n        }\r\n        gl.bindTexture(this._target, this._handle);\r\n    };\r\n    SimpleTexture2D.prototype.unbind = function () {\r\n        gl.bindTexture(this._target, null);\r\n    };\r\n    SimpleTexture2D.prototype.destroy = function () {\r\n        gl.deleteTexture(this._handle);\r\n        this._handle = null;\r\n    };\r\n    return SimpleTexture2D;\r\n}(texture_1[\"default\"]));\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = SimpleTexture2D;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/textures/simpleTexture2d.ts\n ** module id = 23\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"core.ts\" />\r\n/// <reference path=\"../constants/ProgramCte.ts\" />\r\nvar core_1 = require(\"./core\");\r\nvar ProgramCte_1 = require(\"../constants/ProgramCte\");\r\n\"use strict\";\r\n/**\r\n * Program class\r\n * @class Program\r\n */\r\nvar Program = (function () {\r\n    function Program() {\r\n        this.uniformLocations = {};\r\n        this.attribLocations = {};\r\n        this._shaders = [];\r\n    }\r\n    /**\r\n     * @param {string[]}\r\n     */\r\n    Program.prototype.addAttributesArgs = function () {\r\n        var attrs = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            attrs[_i - 0] = arguments[_i];\r\n        }\r\n        this.addAttributes(attrs);\r\n    };\r\n    /**\r\n     * @param {Array<string>}\r\n     */\r\n    Program.prototype.addAttributes = function (attrs) {\r\n        var gl = core_1[\"default\"].getInstance().getGL();\r\n        for (var attr in attrs) {\r\n            attr = attrs[attr];\r\n            var attrID = gl.getAttribLocation(this._compiledShader, attr);\r\n            if (attrID < 0) {\r\n                console.error(attr + \" undefined\");\r\n                continue;\r\n            }\r\n            this.attribLocations[attr] = attrID;\r\n        }\r\n    };\r\n    /**\r\n     * @param {string[]}\r\n     */\r\n    Program.prototype.addUniformsArgs = function () {\r\n        var unifs = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            unifs[_i - 0] = arguments[_i];\r\n        }\r\n        this.addUniforms(unifs);\r\n    };\r\n    /**\r\n     * @param {Array<string>}\r\n     */\r\n    Program.prototype.addUniforms = function (unifs) {\r\n        var gl = core_1[\"default\"].getInstance().getGL();\r\n        for (var unif in unifs) {\r\n            unif = unifs[unif];\r\n            var unifID = gl.getUniformLocation(this._compiledShader, unif);\r\n            if (unifID < 0) {\r\n                console.error(unif + \" undefined\");\r\n                continue;\r\n            }\r\n            this.uniformLocations[unif] = unifID;\r\n        }\r\n    };\r\n    /**\r\n     * @return {WebGLProgram}\r\n     */\r\n    Program.prototype.program = function () {\r\n        return this._compiledShader;\r\n    };\r\n    /**\r\n     * @param {string}\r\n     * @param {shader_type}\r\n     * @param {mode}\r\n     */\r\n    Program.prototype.addShader = function (shader_, /*type: number*/ st, _mode) {\r\n        var gl = core_1[\"default\"].getInstance().getGL();\r\n        var shader;\r\n        var type = -1;\r\n        if (st === ProgramCte_1[\"default\"].shader_type.vertex) {\r\n            type = gl.VERTEX_SHADER;\r\n        }\r\n        else if (st === ProgramCte_1[\"default\"].shader_type.fragment) {\r\n            type = gl.FRAGMENT_SHADER;\r\n        }\r\n        if (type < 0) {\r\n            throw new Error(\"SHADER TYPE UNDEFINED\");\r\n        }\r\n        if (_mode === ProgramCte_1[\"default\"].mode.read_file) {\r\n            shader = this.loadAndCompileWithFile(shader_, type);\r\n        }\r\n        else if (_mode === ProgramCte_1[\"default\"].mode.read_script) {\r\n            shader = this.loadAndCompile(shader_, type);\r\n        }\r\n        else if (_mode === ProgramCte_1[\"default\"].mode.read_text) {\r\n            shader = this.loadAndCompileFromText(shader_, type);\r\n        }\r\n        this._shaders.push(shader);\r\n    };\r\n    Program.prototype._compile = function () {\r\n        var gl = core_1[\"default\"].getInstance().getGL();\r\n        // Create and compile shader\r\n        this._compiledShader = gl.createProgram();\r\n        for (var i = 0; i < this._shaders.length; ++i) {\r\n            gl.attachShader(this._compiledShader, this._shaders[i]);\r\n        }\r\n    };\r\n    Program.prototype._link = function () {\r\n        var gl = core_1[\"default\"].getInstance().getGL();\r\n        gl.linkProgram(this._compiledShader);\r\n        // Checkin errors\r\n        if (!gl.getProgramParameter(this._compiledShader, gl.LINK_STATUS)) {\r\n            alert(\"ERROR\");\r\n            console.warn(\"Error in program linking:\" + gl.getProgramInfoLog(this._compiledShader));\r\n            console.log({\r\n                vertex: this._vertexSource,\r\n                fragment: this._fragmentSource\r\n            });\r\n            throw \"SHADER ERROR\";\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * Compile and link program\r\n     * @return {boolean}: True if not errors\r\n     */\r\n    Program.prototype.compile = function () {\r\n        var gl = core_1[\"default\"].getInstance().getGL();\r\n        // Create and compile shader\r\n        this._compiledShader = gl.createProgram();\r\n        for (var i = 0; i < this._shaders.length; ++i) {\r\n            gl.attachShader(this._compiledShader, this._shaders[i]);\r\n        }\r\n        gl.linkProgram(this._compiledShader);\r\n        // Checkin errors\r\n        if (!gl.getProgramParameter(this._compiledShader, gl.LINK_STATUS)) {\r\n            alert(\"ERROR\");\r\n            console.warn(\"Error in program linking:\" + gl.getProgramInfoLog(this._compiledShader));\r\n            console.log({\r\n                vertex: this._vertexSource,\r\n                fragment: this._fragmentSource\r\n            });\r\n            throw \"SHADER ERROR\";\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * @param {string}\r\n     * @param {number}\r\n     */\r\n    Program.prototype.loadAndCompileWithFile = function (filePath, shaderType) {\r\n        var request = new XMLHttpRequest();\r\n        request.open(\"GET\", filePath, false);\r\n        try {\r\n            request.send();\r\n        }\r\n        catch (err) {\r\n            alert(\"ERROR: \" + filePath);\r\n            console.log(\"ERROR: \" + filePath);\r\n            return null;\r\n        }\r\n        var shaderSource = request.responseText;\r\n        if (shaderSource === null) {\r\n            alert(\"WARNING: \" + filePath + \" failed\");\r\n            console.log(this._fragmentSource);\r\n            throw \"SHADER ERROR\";\r\n        }\r\n        return this.compileShader(shaderSource, shaderType);\r\n    };\r\n    /**\r\n     * @param {string}\r\n     * @param {number}\r\n     */\r\n    Program.prototype.loadAndCompileFromText = function (shaderSource, shaderType) {\r\n        if (shaderSource === null) {\r\n            alert(\"WARNING: \" + shaderSource + \" failed\");\r\n            console.log(this._fragmentSource);\r\n            throw \"SHADER ERROR\";\r\n        }\r\n        return this.compileShader(shaderSource, shaderType);\r\n    };\r\n    /**\r\n     * @param {string}\r\n     * @param {number}\r\n     */\r\n    Program.prototype.loadAndCompile = function (id, shaderType) {\r\n        var shaderText, shaderSource;\r\n        // Get shader from index.html\r\n        shaderText = document.getElementById(id);\r\n        shaderSource = shaderText.firstChild.textContent;\r\n        if (shaderSource === null) {\r\n            alert(\"WARNING: \" + id + \" failed\");\r\n            console.log(this._fragmentSource);\r\n            throw \"SHADER ERROR\";\r\n        }\r\n        return this.compileShader(shaderSource, shaderType);\r\n    };\r\n    /**\r\n     * @param {string}\r\n     * @param {number}\r\n     */\r\n    Program.prototype.compileShader = function (shaderSource, shaderType) {\r\n        var gl = core_1[\"default\"].getInstance().getGL();\r\n        var compiledShader;\r\n        if (shaderType === gl.VERTEX_SHADER) {\r\n            this._vertexSource = shaderSource;\r\n        }\r\n        else if (shaderType === gl.FRAGMENT_SHADER) {\r\n            this._fragmentSource = shaderSource;\r\n        }\r\n        // Create shader\r\n        compiledShader = gl.createShader(shaderType);\r\n        // Compilate shader\r\n        gl.shaderSource(compiledShader, shaderSource);\r\n        gl.compileShader(compiledShader);\r\n        // Check errors\r\n        if (!gl.getShaderParameter(compiledShader, gl.COMPILE_STATUS)) {\r\n            alert(\"ERROR: \" + gl.getShaderInfoLog(compiledShader));\r\n            console.log(\"ERROR: \" + gl.getShaderInfoLog(compiledShader));\r\n            console.log({\r\n                vertex: this._vertexSource,\r\n                fragment: this._fragmentSource\r\n            });\r\n            throw \"SHADER ERROR\";\r\n        }\r\n        return compiledShader;\r\n    };\r\n    /**\r\n     *\r\n     */\r\n    Program.prototype.use = function () {\r\n        var gl = core_1[\"default\"].getInstance().getGL();\r\n        gl.useProgram(this._compiledShader);\r\n    };\r\n    /**\r\n     *\r\n     */\r\n    Program.prototype.destroy = function () {\r\n        var _this = this;\r\n        var gl = core_1[\"default\"].getInstance().getGL();\r\n        this._shaders.forEach(function (shader) {\r\n            gl.detachShader(_this.compileShader, shader);\r\n        });\r\n        gl.deleteShader(this._compiledShader);\r\n    };\r\n    /*\r\n    protected getPropSetter(path, location, type) {\r\n        // Check primitive types\r\n        switch (type) {\r\n            case \"bool\":\r\n            case \"int\":\r\n                return \"gl.uniform1i(location, value)\";\r\n            case \"float\":\r\n                return \"gl.uniform1f(location, value)\";\r\n            case \"uint\":\r\n                return \"gl.uniform1ui(location, value)\";\r\n        }\r\n\r\n        // Check sampler type\r\n        if (/^(u|i)?sampler(2D|3D|Cube|2DArray)$/.test(type)) {\r\n            return 'gl.uniform1i(location, value)'\r\n        }\r\n\r\n        // Check complex matrix type\r\n        if (/^mat[0-9]x[0-9]$/.test(type)) {\r\n            let dims = type.substring(type.length - 3)\r\n            return 'gl.uniformMatrix' + dims + 'fv(location, Boolean(transposed), value)'\r\n        }\r\n\r\n        // Checksimple type\r\n        let vecIdx = type.indexOf('vec');\r\n        let count = parseInt(type.charAt(type.length - 1), 10) || -1;\r\n\r\n        if ((vecIdx === 0 || vecIdx === 1) && (count >= 1 && count <= 4)) {\r\n            let vtype = type.charAt('0')\r\n            switch (vtype) {\r\n                case 'b':\r\n                case 'i':\r\n                    return 'gl.uniform' + count + 'iv(location, value)';\r\n                case 'u':\r\n                    return 'gl.uniform' + count + 'uiv(locaiton, value)';\r\n                case 'v': // regular vecN\r\n                    return 'gl.uniform' + count + 'fv(location, value)';\r\n                default:\r\n                    throw new Error('unrecognized uniform type ' + type + ' for ' + path);\r\n            }\r\n        }\r\n\r\n        let matIdx = type.indexOf('mat');\r\n        count = parseInt(type.charAt(type.length - 1), 10) || -1;\r\n        console.log(count);\r\n\r\n        if ((matIdx === 0 || matIdx === 1) && (count >= 2 && count <= 4)) {\r\n            return 'gl.uniformMatrix' + count + 'fv(location, Boolean(transposed), value)';\r\n        }\r\n        throw new Error('unrecognized uniform type ' + type + ' for ' + path);\r\n    }\r\n\r\n    public sendUniform(uniform, type) {\r\n        let path = uniform;\r\n        let location = this.uniformLocations[path];\r\n        let setter = this.getPropSetter(path, location, type);\r\n\r\n        let srcfn = `\r\n        return function uniformGetSet (value, transposed) {\r\n            transposed = typeof transposed !== 'undefined' ? transposed: false;\r\n            location = prog.uniformLocations[name];\r\n                if (!location) {\r\n                    prog.addUniforms([name]);\r\n                    location = prog.uniformLocations[name];\r\n                }\r\n                if (location) {\r\n                    ${setter}\r\n                    //console.log(\"SENDED\");\r\n                } else {\r\n                    //console.error(\"ERROR\");\r\n                }\r\n        }`;\r\n\r\n        let generated = new Function('prog', 'gl', 'name', 'location', srcfn);\r\n        const gl = Core.getInstance().getGL();\r\n        return generated(this, gl, uniform, location);\r\n    }*/\r\n    /**\r\n     * @param {string}\r\n     * @param {number}\r\n     */\r\n    Program.prototype.sendUniform1f = function (name, value) {\r\n        var gl = core_1[\"default\"].getInstance().getGL();\r\n        gl.uniform1f(this.uniformLocations[name], value);\r\n    };\r\n    /**\r\n     * @param {string}\r\n     * @param {number}\r\n     */\r\n    Program.prototype.sendUniform1i = function (name, value) {\r\n        var gl = core_1[\"default\"].getInstance().getGL();\r\n        gl.uniform1i(this.uniformLocations[name], value);\r\n    };\r\n    /**\r\n     * @param {string}\r\n     * @param {boolean}\r\n     */\r\n    Program.prototype.sendUniform1b = function (name, value) {\r\n        var gl = core_1[\"default\"].getInstance().getGL();\r\n        gl.uniform1i(this.uniformLocations[name], value === true ? 1 : 0);\r\n    };\r\n    /**\r\n     * @param {string}\r\n     * @param {Float32Array}\r\n     */\r\n    Program.prototype.sendUniformVec3 = function (name, value) {\r\n        var gl = core_1[\"default\"].getInstance().getGL();\r\n        gl.uniform3fv(this.uniformLocations[name], value);\r\n    };\r\n    /**\r\n     * @param {string}\r\n     * @param {Float32Array}\r\n     * @param {boolean   = false}\r\n     */\r\n    Program.prototype.sendUniformMat4 = function (name, value, transpose) {\r\n        if (transpose === void 0) { transpose = false; }\r\n        var gl = core_1[\"default\"].getInstance().getGL();\r\n        gl.uniformMatrix4fv(this.uniformLocations[name], transpose, value);\r\n    };\r\n    return Program;\r\n}());\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = Program;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/core/program.ts\n ** module id = 24\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\nvar ProgramCte;\r\n(function (ProgramCte) {\r\n    (function (mode) {\r\n        mode[mode[\"read_file\"] = 0] = \"read_file\";\r\n        mode[mode[\"read_script\"] = 1] = \"read_script\";\r\n        mode[mode[\"read_text\"] = 2] = \"read_text\";\r\n    })(ProgramCte.mode || (ProgramCte.mode = {}));\r\n    var mode = ProgramCte.mode;\r\n    ;\r\n    (function (shader_type) {\r\n        shader_type[shader_type[\"vertex\"] = 0] = \"vertex\";\r\n        shader_type[shader_type[\"fragment\"] = 1] = \"fragment\";\r\n    })(ProgramCte.shader_type || (ProgramCte.shader_type = {}));\r\n    var shader_type = ProgramCte.shader_type;\r\n})(ProgramCte || (ProgramCte = {}));\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = ProgramCte;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/constants/ProgramCte.ts\n ** module id = 25\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"core.ts\" />\r\n/// <reference path=\"../textures/texture.ts\" />\r\n/// <reference path=\"../textures/simpleTexture2D.ts\" />\r\n/// <reference path=\"../textures/renderBufferTexture.ts\" />\r\n/// <reference path=\"..//maths/vector2.ts\" />\r\n///\r\nvar core_1 = require(\"./core\");\r\nvar renderBufferTexture_1 = require(\"../textures/renderBufferTexture\");\r\n\"use strict\";\r\nvar gl = core_1[\"default\"].getInstance().getGL();\r\n// TODO: Redimension\r\n// TODO: Blit FBO (https://www.opengl.org/wiki/Framebuffer#Blitting)\r\nvar Framebuffer = (function () {\r\n    // TODO: Stencil unused\r\n    function Framebuffer(textures, size, depth, stencil, options) {\r\n        if (depth === void 0) { depth = false; }\r\n        if (stencil === void 0) { stencil = false; }\r\n        if (options === void 0) { options = {}; }\r\n        var numColors = textures.length;\r\n        if (numColors < 0) {\r\n            throw new Error(\"must specify >= 0 color attachments\");\r\n        }\r\n        else if (numColors > 1) {\r\n            if (numColors > gl.getParameter(gl.MAX_COLOR_ATTACHMENTS)) {\r\n                throw new Error(\"GL context doesn\\u00B4t support \" + numColors + \" color attachments\");\r\n            }\r\n        }\r\n        options = options || {};\r\n        this._colors = textures;\r\n        this._size = size;\r\n        this._handle = gl.createFramebuffer();\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this._handle);\r\n        // Each textures to fbo\r\n        textures.forEach(function (texture, i) {\r\n            texture.bind();\r\n            // Only supported simple textures\r\n            // TODO: Cubemap or texture3D\r\n            var target = texture._target;\r\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0 + i, target, texture.handle(), 0);\r\n            texture.unbind(); // TODO: Unbind debería ser un abstract de texture\r\n        });\r\n        // TODO: Check no texture attachments (default render buffer storage)\r\n        if (depth) {\r\n            this._renderBuffer = new renderBufferTexture_1[\"default\"](size, gl.DEPTH_COMPONENT16, gl.DEPTH_ATTACHMENT);\r\n        }\r\n        /**\r\n        // TODO\r\n        if (depth && stencil) {\r\n            this._depth = new SimpleTexture2D(size, {\r\n                type: (<any>gl).UNSIGNED_INT_24_8,\r\n                format: gl.DEPTH_STENCIL\r\n            });\r\n            let target = this._depth.target;\r\n\r\n            gl.framebufferTexture2D(gl.FRAMEBUFFER,\r\n                gl.DEPTH_STENCIL_ATTACHMENT,\r\n                target,\r\n                this._depth.handle(), 0);\r\n        } else if (depth && !stencil) {\r\n            this._depth = new SimpleTexture2D(size, {\r\n                type: (<any>gl).UNSIGNED_SHORT,\r\n                format: gl.DEPTH_COMPONENT\r\n            });\r\n            let target = this._depth.target;\r\n\r\n            gl.framebufferTexture2D(gl.FRAMEBUFFER,\r\n                gl.DEPTH_ATTACHMENT,\r\n                target,\r\n                this._depth.handle(), 0);\r\n        } else {\r\n            this._renderBuffer = new RenderBufferTexture(\r\n                size,\r\n                gl.STENCIL_INDEX,\r\n                gl.STENCIL_ATTACHMENT\r\n            );\r\n        }\r\n        /**/\r\n        if (numColors > 1) {\r\n            var drawBuffs = [];\r\n            for (var i = 0; i < numColors; ++i) {\r\n                drawBuffs.push(gl.COLOR_ATTACHMENT0 + i);\r\n            }\r\n            gl.drawBuffers(drawBuffs);\r\n        }\r\n        // Check status\r\n        var status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\r\n        if (status !== gl.FRAMEBUFFER_COMPLETE) {\r\n            this.destroy();\r\n            this.checkStatus(status);\r\n        }\r\n        this.unbind();\r\n    }\r\n    Framebuffer.prototype.checkStatus = function (status) {\r\n        switch (status) {\r\n            case gl.FRAMEBUFFER_UNSUPPORTED:\r\n                throw new Error(\"framebuffer: Framebuffer unsupported\");\r\n            case gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:\r\n                throw new Error(\"framebuffer: Framebuffer incomplete attachment\");\r\n            case gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:\r\n                throw new Error(\"framebuffer: Framebuffer incomplete dimensions\");\r\n            case gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:\r\n                throw new Error(\"framebuffer: Framebuffer incomplete missing attachment\");\r\n            default:\r\n                throw new Error(\"framebuffer: Framebuffer failed for unspecified reason\");\r\n        }\r\n    };\r\n    Framebuffer.prototype.bind = function () {\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this._handle);\r\n    };\r\n    Framebuffer.prototype.onlyBindTextures = function () {\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n        this._colors.forEach(function (tex, idx) {\r\n            tex.bind(idx);\r\n        });\r\n    };\r\n    Framebuffer.prototype.unbind = function () {\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n    };\r\n    Framebuffer.prototype.rebuild = function (size) {\r\n        if (!size.isEqual(this._size)) {\r\n        }\r\n    };\r\n    Framebuffer.prototype.destroy = function () {\r\n        var oldBinding = gl.getParameter(gl.FRAMEBUFFER_BINDING);\r\n        if (oldBinding === this._handle) {\r\n            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n        }\r\n        this._colors.forEach(function (texture) {\r\n            texture.destroy();\r\n        });\r\n        gl.deleteFramebuffer(this._handle);\r\n        // Destroy depth/stencil\r\n        if (this._renderBuffer) {\r\n            this._renderBuffer.destroy();\r\n            this._renderBuffer = null;\r\n        }\r\n        // Destroy depth\r\n        if (this._depth) {\r\n            this._depth.destroy();\r\n            this._depth = null;\r\n        }\r\n    };\r\n    return Framebuffer;\r\n}());\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = Framebuffer;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/core/framebuffer.ts\n ** module id = 26\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"../maths/vector2.ts\" />\r\n/// <reference path=\"../core/Core.ts\" />\r\nvar core_1 = require(\"../core/core\");\r\n\"use strict\";\r\nvar gl = core_1[\"default\"].getInstance().getGL();\r\nvar RenderBufferTexture = (function () {\r\n    function RenderBufferTexture(size, format, attachment) {\r\n        this._handle = gl.createRenderbuffer();\r\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this._handle);\r\n        gl.renderbufferStorage(gl.RENDERBUFFER, format, size.x, size.y);\r\n        gl.framebufferRenderbuffer(gl.FRAMEBUFFER, attachment, gl.RENDERBUFFER, this._handle);\r\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\r\n    }\r\n    RenderBufferTexture.prototype.destroy = function () {\r\n        gl.deleteTexture(this._handle);\r\n    };\r\n    return RenderBufferTexture;\r\n}());\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = RenderBufferTexture;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/textures/renderBufferTexture.ts\n ** module id = 27\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n\"use strict\";\r\n;\r\n;\r\nvar ProgramManager;\r\n(function (ProgramManager) {\r\n    /**\r\n     * [Program cache]\r\n     */\r\n    var _progDictionary = {};\r\n    /**\r\n     * Get program from name\r\n     * @param  {string} name: Program name\r\n     * @return {Program}\r\n     */\r\n    function get(name) {\r\n        var prog = _progDictionary[name];\r\n        if (!prog) {\r\n            throw new Error(\"Program \" + name + \" undefined\");\r\n        }\r\n        return prog;\r\n    }\r\n    ProgramManager.get = get;\r\n    /**\r\n     * Execute a callback function using the specified program (name).\r\n     * @param  {string} name: Program name\r\n     * @param {ProgramUseCallback}: Function to execute\r\n     */\r\n    function getCB(name, cb) {\r\n        var prog = get(name);\r\n        if (!prog) {\r\n            throw new Error(\"Program \" + name + \" undefined\");\r\n        }\r\n        cb(prog);\r\n    }\r\n    ProgramManager.getCB = getCB;\r\n    /**\r\n     * Add a new program with his name and a function that creates the program.\r\n     * @param {string} name: Program name\r\n     * @param {ProgramCallback}: Function that creates the program (return program)\r\n     */\r\n    function addWithFun(name, fn) {\r\n        add(name, fn());\r\n    }\r\n    ProgramManager.addWithFun = addWithFun;\r\n    /**\r\n     * Add a existing program with his name and the program.\r\n     * @param {string} name: Program name.\r\n     * @param {Program} prog: Existing program.\r\n     */\r\n    function add(name, prog) {\r\n        if (!prog) {\r\n            throw new Error(\"Program \" + name + \" undefined\");\r\n        }\r\n        _progDictionary[name] = prog;\r\n    }\r\n    ProgramManager.add = add;\r\n    /**\r\n     * Destroy all programs and clear cache.\r\n     */\r\n    function destroy() {\r\n        for (var key in _progDictionary) {\r\n            _progDictionary[key].destroy();\r\n        }\r\n        _progDictionary = {};\r\n    }\r\n    ProgramManager.destroy = destroy;\r\n})(ProgramManager || (ProgramManager = {}));\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = ProgramManager;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/resources/programManager.ts\n ** module id = 28\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"resourceMap.ts\" />\r\nvar resourceMap_1 = require(\"./resourceMap\");\r\n\"use strict\";\r\nvar loaders;\r\n(function (loaders) {\r\n    function _getAlias(imageSrc, alias) {\r\n        return (alias.length < 1) ? imageSrc : alias;\r\n    }\r\n    function loadVideo(videoSrc, alias) {\r\n        if (alias === void 0) { alias = \"\"; }\r\n        /*alias = _getAlias(videoSrc, alias);\r\n        if (!ResourceMap.isAssetLoaded(alias)) {\r\n            // Update resources in load counter\r\n            ResourceMap.asyncLoadRequested(alias);\r\n\r\n            // Async request the data from server\r\n            let request = new XMLHttpRequest();\r\n            request.open(\"GET\", videoSrc, true);\r\n\r\n            request.responseType = \"arraybuffer\";\r\n\r\n            request.onload = function () {\r\n                // Asynchronously decode, then call the function in parameter.\r\n                var video: HTMLVideoElement = <HTMLVideoElement> document.createElement(alias);\r\n                video.src = videoSrc;\r\n                ResourceMap.asyncLoadCompleted(alias, video);\r\n            }.bind(this);\r\n\r\n            request.send();\r\n        }*/\r\n        /*// Create HTML Video Element to play the video\r\n        var video = document.createElement('video');\r\n        video.addEventListener('canplay', function (e) {\r\n            videoTexture.setSource(video);\r\n        });\r\n        video.src = this.videoUrl;\r\n        video.crossOrigin = 'anonymous';\r\n        video.loop = true;\r\n        video.play();*/\r\n    }\r\n    loaders.loadVideo = loadVideo;\r\n    /**\r\n     * @param {string}\r\n     * @param {string = \"\"}\r\n     */\r\n    function loadImage(imageSrc, alias) {\r\n        if (alias === void 0) { alias = \"\"; }\r\n        alias = _getAlias(imageSrc, alias);\r\n        if (!resourceMap_1[\"default\"].isAssetLoaded(alias)) {\r\n            var img_1 = new Image();\r\n            resourceMap_1[\"default\"].asyncLoadRequested(alias);\r\n            img_1.onload = function () {\r\n                // setTimeout(function() {\r\n                resourceMap_1[\"default\"].asyncLoadCompleted(alias, img_1);\r\n                // }, 2500);\r\n            };\r\n            img_1.onerror = function (err) {\r\n                resourceMap_1[\"default\"].asyncLoadFailed(alias);\r\n            };\r\n            img_1.src = imageSrc;\r\n        }\r\n        else {\r\n            resourceMap_1[\"default\"].incAssetRefCount(alias);\r\n        }\r\n    }\r\n    loaders.loadImage = loadImage;\r\n    /**\r\n     * @param {string}\r\n     */\r\n    function unloadImage(imageSrc) {\r\n        resourceMap_1[\"default\"].unloadAsset(imageSrc);\r\n    }\r\n    loaders.unloadImage = unloadImage;\r\n    /**\r\n     * @param {string}\r\n     */\r\n    function loadAudio(clipName, alias) {\r\n        if (alias === void 0) { alias = \"\"; }\r\n        alias = _getAlias(clipName, alias);\r\n        if (!(resourceMap_1[\"default\"].isAssetLoaded(alias))) {\r\n            // Update resources in load counter\r\n            resourceMap_1[\"default\"].asyncLoadRequested(alias);\r\n            // Async request the data from server\r\n            var request_1 = new XMLHttpRequest();\r\n            request_1.open(\"GET\", clipName, true);\r\n            // Specify that the request retrieves binary data.\r\n            request_1.responseType = \"arraybuffer\";\r\n            request_1.onload = function () {\r\n                // Asynchronously decode, then call the function in parameter.\r\n                this._audioContext.decodeAudioData(request_1.response, function (buffer) {\r\n                    resourceMap_1[\"default\"].asyncLoadCompleted(alias, buffer);\r\n                });\r\n            }.bind(this);\r\n            request_1.send();\r\n        }\r\n    }\r\n    loaders.loadAudio = loadAudio;\r\n    /**\r\n     * @param {string}\r\n     */\r\n    function unloadAudio(clipName) {\r\n        resourceMap_1[\"default\"].unloadAsset(clipName);\r\n    }\r\n    loaders.unloadAudio = unloadAudio;\r\n    /**\r\n     * @param {string}\r\n     * @param {number}\r\n     * @param {number}\r\n     * @param {string = \"\"}\r\n     */\r\n    function loadHDRImage(imageSrc, width, height, alias) {\r\n        if (alias === void 0) { alias = \"\"; }\r\n        alias = _getAlias(imageSrc, alias);\r\n        if (!resourceMap_1[\"default\"].isAssetLoaded(alias)) {\r\n            resourceMap_1[\"default\"].asyncLoadRequested(alias);\r\n            // Async request the data from server\r\n            var request_2 = new XMLHttpRequest();\r\n            request_2.open(\"GET\", imageSrc, true);\r\n            // Specify that the request retrieves binary data.\r\n            request_2.responseType = \"arraybuffer\";\r\n            request_2.onload = function () {\r\n                // Asynchronously decode, then call the function in parameter.\r\n                var arrayBuffer = request_2.response;\r\n                if (arrayBuffer) {\r\n                    var bytes = new Uint8Array(arrayBuffer);\r\n                    var data = new Float32Array(width * height * 3);\r\n                    var byteIdx = 0;\r\n                    // skip the main header (we already assume the format, width and height)\r\n                    for (; byteIdx < bytes.length; byteIdx++) {\r\n                        if (bytes[byteIdx] === 0x0A && bytes[byteIdx + 1] === 0x0A) {\r\n                            byteIdx = byteIdx + 2;\r\n                            break;\r\n                        }\r\n                    }\r\n                    // skip the resolution bit\r\n                    for (; byteIdx < bytes.length; byteIdx++) {\r\n                        if (bytes[byteIdx] === 0x0A) {\r\n                            byteIdx = byteIdx + 1;\r\n                            break;\r\n                        }\r\n                    }\r\n                    var idx = 0;\r\n                    for (var row = 0; row < height; row++) {\r\n                        for (var col = 0; col < width; col++) {\r\n                            var r = bytes[byteIdx++];\r\n                            var g = bytes[byteIdx++];\r\n                            var b = bytes[byteIdx++];\r\n                            var e = bytes[byteIdx++];\r\n                            var expFactor = Math.pow(2, e - 128);\r\n                            data[idx++] = (r / 256) * expFactor;\r\n                            data[idx++] = (g / 256) * expFactor;\r\n                            data[idx++] = (b / 256) * expFactor;\r\n                        }\r\n                    }\r\n                    resourceMap_1[\"default\"].asyncLoadCompleted(alias, data);\r\n                }\r\n            }.bind(this);\r\n            request_2.send();\r\n        }\r\n        else {\r\n            resourceMap_1[\"default\"].incAssetRefCount(alias);\r\n        }\r\n    }\r\n    loaders.loadHDRImage = loadHDRImage;\r\n    /**\r\n     * @param {string}\r\n     */\r\n    function unloadHDRImage(imageSrc) {\r\n        resourceMap_1[\"default\"].unloadAsset(imageSrc);\r\n    }\r\n    loaders.unloadHDRImage = unloadHDRImage;\r\n})(loaders || (loaders = {}));\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = loaders;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/resources/loaders.ts\n ** module id = 29\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\n/// <reference path=\"light.ts\" />\r\nvar light_1 = require(\"./light\");\r\nvar vector3_1 = require(\"../maths/vector3\");\r\n\"use strict\";\r\n// TODO: Replace Vector3 to Vect3\r\n/**\r\n * Point light class\r\n * @class PointLight\r\n */\r\nvar PointLight = (function (_super) {\r\n    __extends(PointLight, _super);\r\n    /**\r\n     * @param {Vector3<number> = new Vector3<number>(0.0, 0.0, 0.0)} position\r\n     */\r\n    function PointLight(position) {\r\n        if (position === void 0) { position = new vector3_1[\"default\"](0.0, 0.0, 0.0); }\r\n        _super.call(this);\r\n        this._position = position;\r\n    }\r\n    /**\r\n     * Get light position\r\n     * @return {Vector3<number>}\r\n     */\r\n    // TODO: get position(): Vector3<number> { return this._position; }\r\n    /**\r\n     * Set light position\r\n     * @param {Vector3<number>} position\r\n     */\r\n    // TODO: set position(position: Vector3<number>) { this._position = position; }\r\n    /**\r\n     * Increment position from current position\r\n     * @param {number = 0.0} x\r\n     * @param {number = 0.0} y\r\n     * @param {number = 0.0} z\r\n     */\r\n    PointLight.prototype.addTransform = function (x, y, z) {\r\n        if (x === void 0) { x = 0.0; }\r\n        if (y === void 0) { y = 0.0; }\r\n        if (z === void 0) { z = 0.0; }\r\n        this._position.x += x;\r\n        this._position.y += y;\r\n        this._position.z += z;\r\n    };\r\n    return PointLight;\r\n}(light_1[\"default\"]));\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = PointLight;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/lights/pointLight.ts\n ** module id = 30\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"../extras/color.ts\" />\r\n/// <reference path=\"../maths/vector3.ts\" />\r\nvar color_1 = require(\"../extras/color\");\r\nvar vector3_1 = require(\"../maths/vector3\");\r\n\"use strict\";\r\n// TODO: Replace Vector3 to Vect3\r\n/**\r\n * Light abstract class\r\n * @class Light\r\n */\r\nvar Light = (function () {\r\n    function Light() {\r\n        this._intensity = 1.0;\r\n        this._color = new color_1[\"default\"](1.0, 1.0, 1.0);\r\n        this._enable = true;\r\n        this._attenuation = new vector3_1[\"default\"](1.0, // Constant\r\n        0.014, // Linear\r\n        0.0007 // Quadratic\r\n        );\r\n    }\r\n    /**\r\n     * Set constant attenuation value.\r\n     * @param {number} v: Constant attenuation value.\r\n     */\r\n    Light.prototype.setConstantAtt = function (value) {\r\n        this._attenuation.x = value;\r\n    };\r\n    /**\r\n     * Set linear attenuation value.\r\n     * @param {number} v: Linear attenuation value.\r\n     */\r\n    Light.prototype.setLinearAtt = function (value) {\r\n        this._attenuation.y = value;\r\n    };\r\n    /**\r\n     * Set quadratic attenuation value.\r\n     * @param {number} v: Quadratic attenuation value.\r\n     */\r\n    Light.prototype.setQuadraticAtt = function (value) {\r\n        this._attenuation.z = value;\r\n    };\r\n    return Light;\r\n}());\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = Light;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/lights/light.ts\n ** module id = 31\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n// TODO: Change _color to Vector3\r\n\"use strict\";\r\nvar Color = (function () {\r\n    /**\r\n     * [constructor description]\r\n     * @param {number} r [description]\r\n     * @param {number} g [description]\r\n     * @param {number} b [description]\r\n     */\r\n    function Color(r, g, b) {\r\n        /**\r\n         * [Array description]\r\n         * @param {[type]} 3 [description]\r\n         */\r\n        this._color = new Array(3);\r\n        this.setRGB(r, g, b);\r\n    }\r\n    /**\r\n     * @return {number}\r\n     */\r\n    // TODO: get r(): number { return this._color[0]; }\r\n    /**\r\n     * @return {number}\r\n     */\r\n    // TODO: get g(): number { return this._color[1]; }\r\n    /**\r\n     * @return {number}\r\n     */\r\n    // TODO: get b(): number { return this._color[2]; }\r\n    /**\r\n     * @param {number}\r\n     */\r\n    // TODO: set r(r: number) { this._color[0] = r; }\r\n    /**\r\n     * @param {number}\r\n     */\r\n    // TODO: set g(g: number) { this._color[1] = g; }\r\n    /**\r\n     * @param {number}\r\n     */\r\n    // TODO: set b(b: number) { this._color[2] = b; }\r\n    /**\r\n     * [setRGB description]\r\n     * @param  {number} r [description]\r\n     * @param  {number} g [description]\r\n     * @param  {number} b [description]\r\n     * @return {Color}    [description]\r\n     */\r\n    Color.prototype.setRGB = function (r, g, b) {\r\n        // this.r = r;\r\n        // this.g = g;\r\n        // this.b = b;\r\n        this._color[0] = r;\r\n        this._color[1] = g;\r\n        this._color[2] = b;\r\n        return this;\r\n    };\r\n    /**\r\n     * [toHSL description]\r\n     * @return {Color} [description]\r\n     */\r\n    Color.prototype.toHSL = function () {\r\n        var max = Math.max(this._color[0], this._color[1], this._color[2]), min = Math.min(this._color[0], this._color[1], this._color[2]);\r\n        var h, s, l = (max + min) / 2;\r\n        if (max === min) {\r\n            h = s = 0; // achromatic\r\n        }\r\n        else {\r\n            var d = max - min;\r\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n            switch (max) {\r\n                case this._color[0]:\r\n                    h = (this._color[1] - this._color[2]) / d +\r\n                        (this._color[1] < this._color[2] ? 6 : 0);\r\n                    break;\r\n                case this._color[1]:\r\n                    h = (this._color[2] - this._color[0]) / d + 2;\r\n                    break;\r\n                case this._color[2]:\r\n                    h = (this._color[0] - this._color[1]) / d + 4;\r\n                    break;\r\n            }\r\n            h /= 6;\r\n        }\r\n        return new Color(h, s, l);\r\n    };\r\n    return Color;\r\n}());\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = Color;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/extras/color.ts\n ** module id = 32\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/**\r\n * Vector3<T> class\r\n * @class Vector3<T>\r\n */\r\nvar Vector3 = (function () {\r\n    /**\r\n     * Vector3<T> constructor\r\n     * @param {T} x: First value\r\n     * @param {T} y: Second value\r\n     * @param {T} z: Third value\r\n     */\r\n    function Vector3(x, y, z) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n    }\r\n    /**\r\n     * Check if two vector3<T> are equals\r\n     * @param  {Vector3<T>} other: Second vector\r\n     * @return {boolean}: True if both equals\r\n     */\r\n    Vector3.prototype.isEqual = function (other) {\r\n        return this.x === other.x && this.y === other.y && this.z === other.z;\r\n    };\r\n    return Vector3;\r\n}());\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = Vector3;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/maths/vector3.ts\n ** module id = 33\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/**\r\n * Vector2<T> class\r\n * @class Vector2<T>\r\n */\r\nvar Vector2 = (function () {\r\n    /**\r\n     * Vector2<T> constructor\r\n     * @param {T} x: First value\r\n     * @param {T} y: Second value\r\n     */\r\n    function Vector2(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    /**\r\n     * Check if two vector2<T> are equals\r\n     * @param  {Vector2<T>} other: Second vector\r\n     * @return {boolean}: True if both equals\r\n     */\r\n    Vector2.prototype.isEqual = function (other) {\r\n        return this.x === other.x && this.y === other.y;\r\n    };\r\n    return Vector2;\r\n}());\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = Vector2;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/maths/vector2.ts\n ** module id = 34\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"core/input.ts\" />\r\nvar input_1 = require(\"./core/input\");\r\n\"use strict\";\r\nvar Camera2 = (function () {\r\n    function Camera2(position, up, yaw, pitch) {\r\n        if (position === void 0) { position = vec3.fromValues(0, 0, 0); }\r\n        if (up === void 0) { up = vec3.fromValues(0, 1, 0); }\r\n        if (yaw === void 0) { yaw = -90.0; }\r\n        if (pitch === void 0) { pitch = 0.0; }\r\n        // Camera options\r\n        this.movSpeed = 0.05;\r\n        this.mouseSensivity = 0.25;\r\n        this._updateCamera = false;\r\n        this.view = mat4.create();\r\n        this.proj = mat4.create();\r\n        this.front = vec3.fromValues(0, 0, -1);\r\n        this.position = position;\r\n        this.worldUp = up;\r\n        this.yaw = yaw;\r\n        this.pitch = pitch;\r\n        this.right = vec3.create();\r\n        this.up = vec3.create();\r\n        this.updateCameraVectors();\r\n    }\r\n    Camera2.prototype.GetPos = function () {\r\n        return this.position;\r\n    };\r\n    Camera2.prototype.update = function (callback) {\r\n        this._updateCamera = false;\r\n        var speed = 1.0;\r\n        if (input_1[\"default\"].getInstance().isKeyPressed(input_1[\"default\"].getInstance().keys.Left_Shift)) {\r\n            speed = 2.5;\r\n        }\r\n        if (input_1[\"default\"].getInstance().isKeyPressed(input_1[\"default\"].getInstance().keys.W)) {\r\n            this.processKeyboard(4, speed);\r\n            this._updateCamera = true;\r\n        }\r\n        if (input_1[\"default\"].getInstance().isKeyPressed(input_1[\"default\"].getInstance().keys.S)) {\r\n            this.processKeyboard(5, speed);\r\n            this._updateCamera = true;\r\n        }\r\n        if (input_1[\"default\"].getInstance().isKeyPressed(input_1[\"default\"].getInstance().keys.A)) {\r\n            this.processKeyboard(2, speed);\r\n            this._updateCamera = true;\r\n        }\r\n        if (input_1[\"default\"].getInstance().isKeyPressed(input_1[\"default\"].getInstance().keys.D)) {\r\n            this.processKeyboard(3, speed);\r\n            this._updateCamera = true;\r\n        }\r\n        if (input_1[\"default\"].getInstance().isKeyPressed(input_1[\"default\"].getInstance().keys.E)) {\r\n            this.processKeyboard(0, speed);\r\n            this._updateCamera = true;\r\n        }\r\n        if (input_1[\"default\"].getInstance().isKeyPressed(input_1[\"default\"].getInstance().keys.Q)) {\r\n            this.processKeyboard(1, speed);\r\n            this._updateCamera = true;\r\n        }\r\n        if (input_1[\"default\"].getInstance().isKeyPressed(38)) {\r\n            this.processMouseMovement(0.0, 2.5);\r\n            this._updateCamera = true;\r\n        }\r\n        if (input_1[\"default\"].getInstance().isKeyPressed(40)) {\r\n            this.processMouseMovement(0.0, -2.5);\r\n            this._updateCamera = true;\r\n        }\r\n        if (input_1[\"default\"].getInstance().isKeyPressed(37)) {\r\n            // this.processMouseMovement(2.5, 0.0);\r\n            this.processMouseMovement(-2.5, 0.0);\r\n            this._updateCamera = true;\r\n        }\r\n        if (input_1[\"default\"].getInstance().isKeyPressed(39)) {\r\n            // this.processMouseMovement(-2.5, 0.0);\r\n            this.processMouseMovement(2.5, 0.0);\r\n            this._updateCamera = true;\r\n        }\r\n        if (this._updateCamera && callback) {\r\n            callback();\r\n        }\r\n    };\r\n    Camera2.prototype.processKeyboard = function (direction, speed) {\r\n        if (speed === void 0) { speed = 1.0; }\r\n        if (this.timeElapsed > 25) {\r\n            return;\r\n        }\r\n        var velocity = this.movSpeed * this.timeElapsed * speed;\r\n        // console.log(direction);\r\n        if (direction === 0) {\r\n            this.position = vec3.scaleAndAdd(this.position, this.position, this.front, velocity);\r\n        }\r\n        else if (direction === 1) {\r\n            this.position = vec3.scaleAndAdd(this.position, this.position, this.front, -velocity);\r\n        }\r\n        else if (direction === 2) {\r\n            this.position = vec3.scaleAndAdd(this.position, this.position, this.right, -velocity);\r\n        }\r\n        else if (direction === 3) {\r\n            this.position = vec3.scaleAndAdd(this.position, this.position, this.right, velocity);\r\n        }\r\n        else if (direction === 4) {\r\n            this.position = vec3.scaleAndAdd(this.position, this.position, this.up, velocity);\r\n        }\r\n        else if (direction === 5) {\r\n            this.position = vec3.scaleAndAdd(this.position, this.position, this.up, -velocity);\r\n        }\r\n    };\r\n    Camera2.prototype.processMouseMovement = function (xOffset, yOffset) {\r\n        xOffset *= this.movSpeed * 2.0 * this.timeElapsed;\r\n        yOffset *= this.movSpeed * 2.0 * this.timeElapsed;\r\n        this.yaw += xOffset;\r\n        this.pitch += yOffset;\r\n        if (this.pitch > 89.0) {\r\n            this.pitch = 89.0;\r\n        }\r\n        if (this.pitch < -89.0) {\r\n            this.pitch = -89.0;\r\n        }\r\n        this.updateCameraVectors();\r\n    };\r\n    Camera2.prototype.updateCameraVectors = function () {\r\n        var front = vec3.fromValues(Math.cos(glMatrix.toRadian(this.yaw)) * Math.cos(glMatrix.toRadian(this.pitch)), Math.sin(glMatrix.toRadian(this.pitch)), Math.sin(glMatrix.toRadian(this.yaw)) * Math.cos(glMatrix.toRadian(this.pitch)));\r\n        this.front = vec3.normalize(this.front, front);\r\n        // Recalculate right and up vector\r\n        this.right = vec3.cross(this.right, this.front, this.worldUp);\r\n        this.right = vec3.normalize(this.right, this.right);\r\n        this.up = vec3.cross(this.up, this.right, this.front);\r\n        this.up = vec3.normalize(this.up, this.up);\r\n    };\r\n    Camera2.prototype.GetViewMatrix = function () {\r\n        var aux = vec3.create();\r\n        this.view = mat4.lookAt(this.view, this.position, vec3.add(aux, this.position, this.front), this.up);\r\n        return this.view;\r\n    };\r\n    Camera2.prototype.GetOrthoProjectionMatrix = function (w, h) {\r\n        var ymax = 0.001 * Math.tan(45.0 * Math.PI / 360);\r\n        var ymin = -ymax;\r\n        var xmin = ymin * (w * 1.0) / (h * 1.0);\r\n        var xmax = ymax * (w * 1.0) / (h * 1.0);\r\n        this.proj = mat4.ortho(this.proj, xmin, xmax, ymin, ymax, 0.001, 1000.0);\r\n        return this.proj;\r\n    };\r\n    Camera2.prototype.GetProjectionMatrix = function (w, h) {\r\n        this.proj = mat4.perspective(this.proj, 45.0, (w * 1.0) / (h * 1.0), 0.001, 1000.0);\r\n        // this.proj = mat4.ortho(this.proj, -10.0, 10.0, -10.0, 10.0, 0.001, 1000.0);\r\n        return this.proj;\r\n    };\r\n    return Camera2;\r\n}());\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = Camera2;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/_demoCamera.ts\n ** module id = 35\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"../core/core.ts\" />\r\n/// <reference path=\"../core/program.ts\" />\r\n/// <reference path=\"../resources/resourceMap.ts\" />\r\n/// <reference path=\"../textures/cubemapTexture.ts\" />\r\n/// <reference path=\"../core/depth.ts\" />\r\n/// <reference path=\"../constants/ProgramCte.ts\" />\r\n/// <reference path=\"../constants/ComparisonFunc.ts\" />\r\n/// <reference path=\"../core/vertexBuffer.ts\" />\r\n/// <reference path=\"../core/vertexArray.ts\" />\r\nvar core_ts_1 = require(\"../core/core.ts\");\r\nvar program_ts_1 = require(\"../core/program.ts\");\r\nvar resourceMap_ts_1 = require(\"../resources/resourceMap.ts\");\r\nvar cubemapTexture_ts_1 = require(\"../textures/cubemapTexture.ts\");\r\nvar depth_ts_1 = require(\"../core/depth.ts\");\r\nvar ProgramCte_1 = require(\"../constants/ProgramCte\");\r\nvar ComparisonFunc_1 = require(\"../constants/ComparisonFunc\");\r\nvar vertexBuffer_ts_1 = require(\"../core/vertexBuffer.ts\");\r\nvar vertexArray_1 = require(\"../core/vertexArray\");\r\nvar UsageType_ts_1 = require(\"../constants/UsageType.ts\");\r\nvar BufferType_ts_1 = require(\"../constants/BufferType.ts\");\r\n\"use strict\";\r\nvar Skybox = (function () {\r\n    /**\r\n     * @param {string}\r\n     */\r\n    function Skybox(dir, isWebGL2) {\r\n        if (isWebGL2 === void 0) { isWebGL2 = true; }\r\n        var faces = [];\r\n        faces.push(dir + \"/right.jpg\");\r\n        faces.push(dir + \"/left.jpg\");\r\n        faces.push(dir + \"/top.jpg\");\r\n        faces.push(dir + \"/bottom.jpg\");\r\n        faces.push(dir + \"/back.jpg\");\r\n        faces.push(dir + \"/front.jpg\");\r\n        var gl = core_ts_1[\"default\"].getInstance().getGL();\r\n        this._prog = new program_ts_1[\"default\"]();\r\n        var vs;\r\n        if (isWebGL2) {\r\n            vs = \"#version 300 es\\n            precision highp float;\\n            layout (location = 0) in vec3 position;\\n            out vec3 TexCoords;\\n            uniform mat4 projection;\\n            uniform mat4 view;\\n            void main() {\\n                vec4 pos = projection * view * vec4(position, 1.0);\\n                gl_Position = pos.xyww;\\n                TexCoords = position;\\n            }\";\r\n        }\r\n        else {\r\n            vs = \"precision highp float;\\n            attribute vec3 position;\\n            varying vec3 TexCoords;\\n            uniform mat4 projection;\\n            uniform mat4 view;\\n            void main() {\\n                vec4 pos = projection * view * vec4(position, 1.0);\\n                gl_Position = pos.xyww;\\n                TexCoords = position;\\n            }\";\r\n        }\r\n        this._prog.addShader(vs, ProgramCte_1[\"default\"].shader_type.vertex, ProgramCte_1[\"default\"].mode.read_text);\r\n        var fg;\r\n        if (isWebGL2) {\r\n            fg = \"#version 300 es\\n            precision highp float;\\n            in vec3 TexCoords;\\n            out vec4 color;\\n            uniform samplerCube skybox;\\n            void main() {\\n                color = texture(skybox, TexCoords);\\n            }\";\r\n        }\r\n        else {\r\n            fg = \"precision highp float;\\n            varying vec3 TexCoords;\\n            uniform samplerCube skybox;\\n            void main() {\\n                gl_FragColor = textureCube(skybox, TexCoords);\\n            }\";\r\n        }\r\n        this._prog.addShader(fg, ProgramCte_1[\"default\"].shader_type.fragment, ProgramCte_1[\"default\"].mode.read_text);\r\n        this._prog.compile();\r\n        this._prog.addUniforms([\"view\", \"projection\"]);\r\n        var skyboxVertices = new Float32Array([\r\n            // Positions\r\n            -1.0, 1.0, -1.0,\r\n            -1.0, -1.0, -1.0,\r\n            1.0, -1.0, -1.0,\r\n            1.0, -1.0, -1.0,\r\n            1.0, 1.0, -1.0,\r\n            -1.0, 1.0, -1.0,\r\n            -1.0, -1.0, 1.0,\r\n            -1.0, -1.0, -1.0,\r\n            -1.0, 1.0, -1.0,\r\n            -1.0, 1.0, -1.0,\r\n            -1.0, 1.0, 1.0,\r\n            -1.0, -1.0, 1.0,\r\n            1.0, -1.0, -1.0,\r\n            1.0, -1.0, 1.0,\r\n            1.0, 1.0, 1.0,\r\n            1.0, 1.0, 1.0,\r\n            1.0, 1.0, -1.0,\r\n            1.0, -1.0, -1.0,\r\n            -1.0, -1.0, 1.0,\r\n            -1.0, 1.0, 1.0,\r\n            1.0, 1.0, 1.0,\r\n            1.0, 1.0, 1.0,\r\n            1.0, -1.0, 1.0,\r\n            -1.0, -1.0, 1.0,\r\n            -1.0, 1.0, -1.0,\r\n            1.0, 1.0, -1.0,\r\n            1.0, 1.0, 1.0,\r\n            1.0, 1.0, 1.0,\r\n            -1.0, 1.0, 1.0,\r\n            -1.0, 1.0, -1.0,\r\n            -1.0, -1.0, -1.0,\r\n            -1.0, -1.0, 1.0,\r\n            1.0, -1.0, -1.0,\r\n            1.0, -1.0, -1.0,\r\n            -1.0, -1.0, 1.0,\r\n            1.0, -1.0, 1.0\r\n        ]);\r\n        this.skyboxVAO = new vertexArray_1[\"default\"]();\r\n        this.skyboxVAO.bind();\r\n        this.skyboxVBO = new vertexBuffer_ts_1[\"default\"](BufferType_ts_1[\"default\"].Array);\r\n        this.skyboxVBO.bind();\r\n        this.skyboxVBO.bufferData(skyboxVertices, UsageType_ts_1[\"default\"].StaticDraw);\r\n        this.skyboxVBO.vertexAttribPointer(0, 3, gl.FLOAT, false, 0);\r\n        this._loadCubemap(faces);\r\n        this.skyboxVAO.unbind();\r\n    }\r\n    /**\r\n     * @param {Float32Array}\r\n     * @param {Float32Array}\r\n     */\r\n    Skybox.prototype.render = function (view, projection) {\r\n        var gl = core_ts_1[\"default\"].getInstance().getGL();\r\n        depth_ts_1[\"default\"].comparison(ComparisonFunc_1[\"default\"].LessEqual);\r\n        this._prog.use();\r\n        var auxView = mat3.create();\r\n        auxView = mat3.fromMat4(auxView, view);\r\n        // Remove any translation\r\n        auxView = new Float32Array([\r\n            auxView[0], auxView[1], auxView[2], 0.0,\r\n            auxView[3], auxView[4], auxView[5], 0.0,\r\n            auxView[6], auxView[7], auxView[8], 0.0,\r\n            0.0, 0.0, 0.0, 0.0\r\n        ]);\r\n        this._prog.sendUniformMat4(\"view\", auxView);\r\n        this._prog.sendUniformMat4(\"projection\", projection);\r\n        this.cubeMapTexture.bind(0);\r\n        this.skyboxVAO.bind();\r\n        gl.drawArrays(gl.TRIANGLES, 0, 36);\r\n        this.skyboxVAO.unbind();\r\n        depth_ts_1[\"default\"].comparison(ComparisonFunc_1[\"default\"].Less);\r\n    };\r\n    /**\r\n     *\r\n     */\r\n    Skybox.prototype.destroy = function () {\r\n        this.cubeMapTexture.destroy();\r\n    };\r\n    /**\r\n     * @param {Array<string>}\r\n     */\r\n    Skybox.prototype._loadCubemap = function (faces) {\r\n        this.cubeMapTexture = new cubemapTexture_ts_1[\"default\"]();\r\n        this.cubeMapTexture.bind();\r\n        faces.forEach(function (face, i) {\r\n            var img = resourceMap_ts_1[\"default\"].retrieveAsset(face);\r\n            this.cubeMapTexture.addImage(i, img);\r\n        }.bind(this));\r\n        this.cubeMapTexture.finishTex();\r\n        this.cubeMapTexture.unbind();\r\n    };\r\n    return Skybox;\r\n}());\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = Skybox;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/extras/skybox.ts\n ** module id = 36\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\n/// <reference path=\"texture.ts\" />\r\n/// <reference path=\"texOptions.ts\" />\r\nvar texture_1 = require(\"./texture\");\r\nvar core_1 = require(\"../core/core\");\r\n\"use strict\";\r\nvar CubeMapTexture = (function (_super) {\r\n    __extends(CubeMapTexture, _super);\r\n    function CubeMapTexture(options) {\r\n        if (options === void 0) { options = {}; }\r\n        var gl = core_1[\"default\"].getInstance().getGL();\r\n        _super.call(this, gl.TEXTURE_CUBE_MAP);\r\n        options = options || {};\r\n        this.finished = false;\r\n        // TODO: Faltan todo el tema de filtrados o wrap de las opciones\r\n        // que me he saltado por falta de tiempo :(\r\n        this._handle = gl.createTexture();\r\n    }\r\n    CubeMapTexture.prototype.addImage = function (i, data) {\r\n        var gl = core_1[\"default\"].getInstance().getGL();\r\n        gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, data);\r\n    };\r\n    CubeMapTexture.prototype.bind = function (slot) {\r\n        var gl = core_1[\"default\"].getInstance().getGL();\r\n        if (typeof slot === \"number\") {\r\n            gl.activeTexture(gl.TEXTURE0 + slot);\r\n        }\r\n        gl.bindTexture(this._target, this._handle);\r\n    };\r\n    CubeMapTexture.prototype.unbind = function () {\r\n        var gl = core_1[\"default\"].getInstance().getGL();\r\n        gl.bindTexture(this._target, null);\r\n    };\r\n    CubeMapTexture.prototype.destroy = function () {\r\n        var gl = core_1[\"default\"].getInstance().getGL();\r\n        gl.deleteTexture(this._handle);\r\n        this._handle = null;\r\n    };\r\n    CubeMapTexture.prototype.finishTex = function () {\r\n        var gl = core_1[\"default\"].getInstance().getGL();\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n        if (gl.TEXTURE_WRAP_R) {\r\n            gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_R, gl.CLAMP_TO_EDGE);\r\n        }\r\n        this.finished = true;\r\n    };\r\n    return CubeMapTexture;\r\n}(texture_1[\"default\"]));\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = CubeMapTexture;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/textures/cubemapTexture.ts\n ** module id = 37\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"../core/context.ts\" />\r\n///\r\nvar context_1 = require(\"../core/context\");\r\n\"use strict\";\r\nvar gl = context_1[\"default\"].getContext();\r\nvar TextureFormat;\r\n(function (TextureFormat) {\r\n    TextureFormat[TextureFormat[\"RGB\"] = gl.RGB] = \"RGB\";\r\n    TextureFormat[TextureFormat[\"Float\"] = gl.FLOAT] = \"Float\";\r\n})(TextureFormat || (TextureFormat = {}));\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = TextureFormat;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/constants/TextureFormat.ts\n ** module id = 38\n ** module chunks = 0\n **/","/// Copyright (C) 2016 [MonkeyBrush.js]\r\n///\r\n/// Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n/// software and associated documentation files (the \"Software\"), to deal in the Software\r\n/// without restriction, including without limitation the rights to use, copy, modify,\r\n/// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\r\n/// permit persons to whom the Software is furnished to do so, subject to the following\r\n/// conditions:\r\n///\r\n/// The above copyright notice and this permission notice shall be included in\r\n/// all copies or substantial portions of the Software.\r\n///\r\n/// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n/// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n/// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n/// OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n/// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n/// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\"use strict\";\r\n/// <reference path=\"../core/context.ts\" />\r\n///\r\nvar context_1 = require(\"../core/context\");\r\n\"use strict\";\r\nvar gl = context_1[\"default\"].getContext();\r\nvar TextureType;\r\n(function (TextureType) {\r\n    TextureType[TextureType[\"Nearest\"] = gl.NEAREST] = \"Nearest\";\r\n    TextureType[TextureType[\"Linear\"] = gl.LINEAR] = \"Linear\";\r\n    TextureType[TextureType[\"Clamp2Edge\"] = gl.CLAMP_TO_EDGE] = \"Clamp2Edge\";\r\n})(TextureType || (TextureType = {}));\r\n;\r\nexports.__esModule = true;\r\nexports[\"default\"] = TextureType;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/library/constants/TextureType.ts\n ** module id = 39\n ** module chunks = 0\n **/"],"sourceRoot":""}